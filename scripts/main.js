"use strict";function makeLink(e,t){return new joint.dia.Link({source:{id:e},target:{id:t},attrs:{".marker-target":{d:"M 4 0 L 0 2 L 4 4 z"}},smooth:!0})}function makeElement(e){var t=_.max(e.split("\n"),function(e){return e.length}).length,a=8,n=2*(a*(.6*t+1)),r=2*((e.split("\n").length+1)*a);return new joint.shapes.basic.Rect({id:e,size:{width:n,height:r},attrs:{text:{text:e,"font-size":a,"font-family":"monospace"},rect:{width:n,height:r,rx:5,ry:5,stroke:"#555"}}})}function buildGraphFromAdjacencyList(e){var t=[],a=[];return _.each(e,function(e,n){t.push(makeElement(n)),_.each(e,function(e){a.push(makeLink(n,e))})}),t.concat(a)}function layout(){try{var adjacencyList=eval("adjacencyList = "+$("#adjacency-list").val())}catch(e){alert(e)}var cells=buildGraphFromAdjacencyList(adjacencyList);graph.resetCells(cells),joint.layout.DirectedGraph.layout(graph,{setLinkVertices:!1})}function renderCanvas(){var e=document.querySelector("svg"),t=new XMLSerializer,a=t.serializeToString(e),n=document.getElementById("canvas");canvg(n,a);var r=n.toDataURL("image/png");$("#renderImage").attr("src",r)}var graph=new joint.dia.Graph,paper=new joint.dia.Paper({el:$("#paper"),width:"100%",height:800,gridSize:1,model:graph});V(paper.viewport).translate(20,20),$("#layout").on("click",layout),$("#render").on("click",renderCanvas);