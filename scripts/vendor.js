function RGBColor(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var n in e)t==n&&(t=e[n]);for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<i.length;r++){var a=i[r].re,o=i[r].process,s=a.exec(t);s&&(channels=o(s),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,n=0;n<i.length;n++)for(var r=i[n].example,a=0;a<r.length;a++)t[t.length]=r[a];for(var o in e)t[t.length]=o;var s=document.createElement("ul");s.setAttribute("id","rgbcolor-examples");for(var n=0;n<t.length;n++)try{var l=document.createElement("li"),u=new RGBColor(t[n]),c=document.createElement("div");c.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),c.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+t[n]+" -> "+u.toRGB()+" -> "+u.toHex());l.appendChild(c),l.appendChild(h),s.appendChild(l)}catch(d){}return s}}function stackBlurImage(t,e,n,i){var r=document.getElementById(t),a=r.naturalWidth,o=r.naturalHeight,s=document.getElementById(e);s.style.width=a+"px",s.style.height=o+"px",s.width=a,s.height=o;var l=s.getContext("2d");l.clearRect(0,0,a,o),l.drawImage(r,0,0),isNaN(n)||1>n||(i?stackBlurCanvasRGBA(e,0,0,a,o,n):stackBlurCanvasRGB(e,0,0,a,o,n))}function stackBlurCanvasRGBA(t,e,n,i,r,a){if(!(isNaN(a)||1>a)){a|=0;var o,s=document.getElementById(t),l=s.getContext("2d");try{try{o=l.getImageData(e,n,i,r)}catch(u){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),o=l.getImageData(e,n,i,r)}catch(u){throw alert("Cannot access local image"),new Error("unable to access local image data: "+u)}}}catch(u){throw alert("Cannot access image"),new Error("unable to access image data: "+u)}var c,h,d,f,g,p,m,v,y,I,b,C,w,A,x,N,M,k,T,j,D,E,B,z,S=o.data,P=a+a+1,G=i-1,Z=r-1,L=a+1,O=L*(L+1)/2,R=new BlurStack,W=R;for(d=1;P>d;d++)if(W=W.next=new BlurStack,d==L)var Y=W;W.next=R;var _=null,V=null;m=p=0;var X=mul_table[a],U=shg_table[a];for(h=0;r>h;h++){for(N=M=k=T=v=y=I=b=0,C=L*(j=S[p]),w=L*(D=S[p+1]),A=L*(E=S[p+2]),x=L*(B=S[p+3]),v+=O*j,y+=O*D,I+=O*E,b+=O*B,W=R,d=0;L>d;d++)W.r=j,W.g=D,W.b=E,W.a=B,W=W.next;for(d=1;L>d;d++)f=p+((d>G?G:d)<<2),v+=(W.r=j=S[f])*(z=L-d),y+=(W.g=D=S[f+1])*z,I+=(W.b=E=S[f+2])*z,b+=(W.a=B=S[f+3])*z,N+=j,M+=D,k+=E,T+=B,W=W.next;for(_=R,V=Y,c=0;i>c;c++)S[p+3]=B=b*X>>U,0!=B?(B=255/B,S[p]=(v*X>>U)*B,S[p+1]=(y*X>>U)*B,S[p+2]=(I*X>>U)*B):S[p]=S[p+1]=S[p+2]=0,v-=C,y-=w,I-=A,b-=x,C-=_.r,w-=_.g,A-=_.b,x-=_.a,f=m+((f=c+a+1)<G?f:G)<<2,N+=_.r=S[f],M+=_.g=S[f+1],k+=_.b=S[f+2],T+=_.a=S[f+3],v+=N,y+=M,I+=k,b+=T,_=_.next,C+=j=V.r,w+=D=V.g,A+=E=V.b,x+=B=V.a,N-=j,M-=D,k-=E,T-=B,V=V.next,p+=4;m+=i}for(c=0;i>c;c++){for(M=k=T=N=y=I=b=v=0,p=c<<2,C=L*(j=S[p]),w=L*(D=S[p+1]),A=L*(E=S[p+2]),x=L*(B=S[p+3]),v+=O*j,y+=O*D,I+=O*E,b+=O*B,W=R,d=0;L>d;d++)W.r=j,W.g=D,W.b=E,W.a=B,W=W.next;for(g=i,d=1;a>=d;d++)p=g+c<<2,v+=(W.r=j=S[p])*(z=L-d),y+=(W.g=D=S[p+1])*z,I+=(W.b=E=S[p+2])*z,b+=(W.a=B=S[p+3])*z,N+=j,M+=D,k+=E,T+=B,W=W.next,Z>d&&(g+=i);for(p=c,_=R,V=Y,h=0;r>h;h++)f=p<<2,S[f+3]=B=b*X>>U,B>0?(B=255/B,S[f]=(v*X>>U)*B,S[f+1]=(y*X>>U)*B,S[f+2]=(I*X>>U)*B):S[f]=S[f+1]=S[f+2]=0,v-=C,y-=w,I-=A,b-=x,C-=_.r,w-=_.g,A-=_.b,x-=_.a,f=c+((f=h+L)<Z?f:Z)*i<<2,v+=N+=_.r=S[f],y+=M+=_.g=S[f+1],I+=k+=_.b=S[f+2],b+=T+=_.a=S[f+3],_=_.next,C+=j=V.r,w+=D=V.g,A+=E=V.b,x+=B=V.a,N-=j,M-=D,k-=E,T-=B,V=V.next,p+=i}l.putImageData(o,e,n)}}function stackBlurCanvasRGB(t,e,n,i,r,a){if(!(isNaN(a)||1>a)){a|=0;var o,s=document.getElementById(t),l=s.getContext("2d");try{try{o=l.getImageData(e,n,i,r)}catch(u){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),o=l.getImageData(e,n,i,r)}catch(u){throw alert("Cannot access local image"),new Error("unable to access local image data: "+u)}}}catch(u){throw alert("Cannot access image"),new Error("unable to access image data: "+u)}var c,h,d,f,g,p,m,v,y,I,b,C,w,A,x,N,M,k,T,j,D=o.data,E=a+a+1,B=i-1,z=r-1,S=a+1,P=S*(S+1)/2,G=new BlurStack,Z=G;for(d=1;E>d;d++)if(Z=Z.next=new BlurStack,d==S)var L=Z;Z.next=G;var O=null,R=null;m=p=0;var W=mul_table[a],Y=shg_table[a];for(h=0;r>h;h++){for(A=x=N=v=y=I=0,b=S*(M=D[p]),C=S*(k=D[p+1]),w=S*(T=D[p+2]),v+=P*M,y+=P*k,I+=P*T,Z=G,d=0;S>d;d++)Z.r=M,Z.g=k,Z.b=T,Z=Z.next;for(d=1;S>d;d++)f=p+((d>B?B:d)<<2),v+=(Z.r=M=D[f])*(j=S-d),y+=(Z.g=k=D[f+1])*j,I+=(Z.b=T=D[f+2])*j,A+=M,x+=k,N+=T,Z=Z.next;for(O=G,R=L,c=0;i>c;c++)D[p]=v*W>>Y,D[p+1]=y*W>>Y,D[p+2]=I*W>>Y,v-=b,y-=C,I-=w,b-=O.r,C-=O.g,w-=O.b,f=m+((f=c+a+1)<B?f:B)<<2,A+=O.r=D[f],x+=O.g=D[f+1],N+=O.b=D[f+2],v+=A,y+=x,I+=N,O=O.next,b+=M=R.r,C+=k=R.g,w+=T=R.b,A-=M,x-=k,N-=T,R=R.next,p+=4;m+=i}for(c=0;i>c;c++){for(x=N=A=y=I=v=0,p=c<<2,b=S*(M=D[p]),C=S*(k=D[p+1]),w=S*(T=D[p+2]),v+=P*M,y+=P*k,I+=P*T,Z=G,d=0;S>d;d++)Z.r=M,Z.g=k,Z.b=T,Z=Z.next;for(g=i,d=1;a>=d;d++)p=g+c<<2,v+=(Z.r=M=D[p])*(j=S-d),y+=(Z.g=k=D[p+1])*j,I+=(Z.b=T=D[p+2])*j,A+=M,x+=k,N+=T,Z=Z.next,z>d&&(g+=i);for(p=c,O=G,R=L,h=0;r>h;h++)f=p<<2,D[f]=v*W>>Y,D[f+1]=y*W>>Y,D[f+2]=I*W>>Y,v-=b,y-=C,I-=w,b-=O.r,C-=O.g,w-=O.b,f=c+((f=h+S)<z?f:z)*i<<2,v+=A+=O.r=D[f],y+=x+=O.g=D[f+1],I+=N+=O.b=D[f+2],O=O.next,b+=M=R.r,C+=k=R.g,w+=T=R.b,A-=M,x-=k,N-=T,R=R.next,p+=i}l.putImageData(o,e,n)}}function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function RGBColor(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var n in e)t==n&&(t=e[n]);for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<i.length;r++){var a=i[r].re,o=i[r].process,s=a.exec(t);s&&(channels=o(s),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,n=0;n<i.length;n++)for(var r=i[n].example,a=0;a<r.length;a++)t[t.length]=r[a];for(var o in e)t[t.length]=o;var s=document.createElement("ul");s.setAttribute("id","rgbcolor-examples");for(var n=0;n<t.length;n++)try{var l=document.createElement("li"),u=new RGBColor(t[n]),c=document.createElement("div");c.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),c.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+t[n]+" -> "+u.toRGB()+" -> "+u.toHex());l.appendChild(c),l.appendChild(h),s.appendChild(l)}catch(d){}return s}}function stackBlurImage(t,e,n,i){var r=document.getElementById(t),a=r.naturalWidth,o=r.naturalHeight,s=document.getElementById(e);s.style.width=a+"px",s.style.height=o+"px",s.width=a,s.height=o;var l=s.getContext("2d");l.clearRect(0,0,a,o),l.drawImage(r,0,0),isNaN(n)||1>n||(i?stackBlurCanvasRGBA(e,0,0,a,o,n):stackBlurCanvasRGB(e,0,0,a,o,n))}function stackBlurCanvasRGBA(t,e,n,i,r,a){if(!(isNaN(a)||1>a)){a|=0;var o,s=document.getElementById(t),l=s.getContext("2d");try{try{o=l.getImageData(e,n,i,r)}catch(u){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),o=l.getImageData(e,n,i,r)}catch(u){throw alert("Cannot access local image"),new Error("unable to access local image data: "+u)}}}catch(u){throw alert("Cannot access image"),new Error("unable to access image data: "+u)}var c,h,d,f,g,p,m,v,y,I,b,C,w,A,x,N,M,k,T,j,D,E,B,z,S=o.data,P=a+a+1,G=i-1,Z=r-1,L=a+1,O=L*(L+1)/2,R=new BlurStack,W=R;for(d=1;P>d;d++)if(W=W.next=new BlurStack,d==L)var Y=W;W.next=R;var _=null,V=null;m=p=0;var X=mul_table[a],U=shg_table[a];for(h=0;r>h;h++){for(N=M=k=T=v=y=I=b=0,C=L*(j=S[p]),w=L*(D=S[p+1]),A=L*(E=S[p+2]),x=L*(B=S[p+3]),v+=O*j,y+=O*D,I+=O*E,b+=O*B,W=R,d=0;L>d;d++)W.r=j,W.g=D,W.b=E,W.a=B,W=W.next;for(d=1;L>d;d++)f=p+((d>G?G:d)<<2),v+=(W.r=j=S[f])*(z=L-d),y+=(W.g=D=S[f+1])*z,I+=(W.b=E=S[f+2])*z,b+=(W.a=B=S[f+3])*z,N+=j,M+=D,k+=E,T+=B,W=W.next;for(_=R,V=Y,c=0;i>c;c++)S[p+3]=B=b*X>>U,0!=B?(B=255/B,S[p]=(v*X>>U)*B,S[p+1]=(y*X>>U)*B,S[p+2]=(I*X>>U)*B):S[p]=S[p+1]=S[p+2]=0,v-=C,y-=w,I-=A,b-=x,C-=_.r,w-=_.g,A-=_.b,x-=_.a,f=m+((f=c+a+1)<G?f:G)<<2,N+=_.r=S[f],M+=_.g=S[f+1],k+=_.b=S[f+2],T+=_.a=S[f+3],v+=N,y+=M,I+=k,b+=T,_=_.next,C+=j=V.r,w+=D=V.g,A+=E=V.b,x+=B=V.a,N-=j,M-=D,k-=E,T-=B,V=V.next,p+=4;m+=i}for(c=0;i>c;c++){for(M=k=T=N=y=I=b=v=0,p=c<<2,C=L*(j=S[p]),w=L*(D=S[p+1]),A=L*(E=S[p+2]),x=L*(B=S[p+3]),v+=O*j,y+=O*D,I+=O*E,b+=O*B,W=R,d=0;L>d;d++)W.r=j,W.g=D,W.b=E,W.a=B,W=W.next;for(g=i,d=1;a>=d;d++)p=g+c<<2,v+=(W.r=j=S[p])*(z=L-d),y+=(W.g=D=S[p+1])*z,I+=(W.b=E=S[p+2])*z,b+=(W.a=B=S[p+3])*z,N+=j,M+=D,k+=E,T+=B,W=W.next,Z>d&&(g+=i);for(p=c,_=R,V=Y,h=0;r>h;h++)f=p<<2,S[f+3]=B=b*X>>U,B>0?(B=255/B,S[f]=(v*X>>U)*B,S[f+1]=(y*X>>U)*B,S[f+2]=(I*X>>U)*B):S[f]=S[f+1]=S[f+2]=0,v-=C,y-=w,I-=A,b-=x,C-=_.r,w-=_.g,A-=_.b,x-=_.a,f=c+((f=h+L)<Z?f:Z)*i<<2,v+=N+=_.r=S[f],y+=M+=_.g=S[f+1],I+=k+=_.b=S[f+2],b+=T+=_.a=S[f+3],_=_.next,C+=j=V.r,w+=D=V.g,A+=E=V.b,x+=B=V.a,N-=j,M-=D,k-=E,T-=B,V=V.next,p+=i}l.putImageData(o,e,n)}}function stackBlurCanvasRGB(t,e,n,i,r,a){if(!(isNaN(a)||1>a)){a|=0;var o,s=document.getElementById(t),l=s.getContext("2d");try{try{o=l.getImageData(e,n,i,r)}catch(u){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),o=l.getImageData(e,n,i,r)}catch(u){throw alert("Cannot access local image"),new Error("unable to access local image data: "+u)}}}catch(u){throw alert("Cannot access image"),new Error("unable to access image data: "+u)}var c,h,d,f,g,p,m,v,y,I,b,C,w,A,x,N,M,k,T,j,D=o.data,E=a+a+1,B=i-1,z=r-1,S=a+1,P=S*(S+1)/2,G=new BlurStack,Z=G;for(d=1;E>d;d++)if(Z=Z.next=new BlurStack,d==S)var L=Z;Z.next=G;var O=null,R=null;m=p=0;var W=mul_table[a],Y=shg_table[a];for(h=0;r>h;h++){for(A=x=N=v=y=I=0,b=S*(M=D[p]),C=S*(k=D[p+1]),w=S*(T=D[p+2]),v+=P*M,y+=P*k,I+=P*T,Z=G,d=0;S>d;d++)Z.r=M,Z.g=k,Z.b=T,Z=Z.next;for(d=1;S>d;d++)f=p+((d>B?B:d)<<2),v+=(Z.r=M=D[f])*(j=S-d),y+=(Z.g=k=D[f+1])*j,I+=(Z.b=T=D[f+2])*j,A+=M,x+=k,N+=T,Z=Z.next;for(O=G,R=L,c=0;i>c;c++)D[p]=v*W>>Y,D[p+1]=y*W>>Y,D[p+2]=I*W>>Y,v-=b,y-=C,I-=w,b-=O.r,C-=O.g,w-=O.b,f=m+((f=c+a+1)<B?f:B)<<2,A+=O.r=D[f],x+=O.g=D[f+1],N+=O.b=D[f+2],v+=A,y+=x,I+=N,O=O.next,b+=M=R.r,C+=k=R.g,w+=T=R.b,A-=M,x-=k,N-=T,R=R.next,p+=4;m+=i}for(c=0;i>c;c++){for(x=N=A=y=I=v=0,p=c<<2,b=S*(M=D[p]),C=S*(k=D[p+1]),w=S*(T=D[p+2]),v+=P*M,y+=P*k,I+=P*T,Z=G,d=0;S>d;d++)Z.r=M,Z.g=k,Z.b=T,Z=Z.next;for(g=i,d=1;a>=d;d++)p=g+c<<2,v+=(Z.r=M=D[p])*(j=S-d),y+=(Z.g=k=D[p+1])*j,I+=(Z.b=T=D[p+2])*j,A+=M,x+=k,N+=T,Z=Z.next,z>d&&(g+=i);for(p=c,O=G,R=L,h=0;r>h;h++)f=p<<2,D[f]=v*W>>Y,D[f+1]=y*W>>Y,D[f+2]=I*W>>Y,v-=b,y-=C,I-=w,b-=O.r,C-=O.g,w-=O.b,f=c+((f=h+S)<z?f:z)*i<<2,v+=A+=O.r=D[f],y+=x+=O.g=D[f+1],I+=N+=O.b=D[f+2],O=O.next,b+=M=R.r,C+=k=R.g,w+=T=R.b,A-=M,x-=k,N-=T,R=R.next,p+=i}l.putImageData(o,e,n)}}function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}if(function(t,e){function n(t){var e=t.length,n=at.type(t);return at.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t){var e=gt[t]={};return at.each(t.match(st)||[],function(t,n){e[n]=!0}),e}function r(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=at.expando+Math.random()}function a(t,n,i){var r;if(i===e&&1===t.nodeType)if(r="data-"+n.replace(yt,"-$1").toLowerCase(),i=t.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:vt.test(i)?JSON.parse(i):i}catch(a){}pt.set(t,n,i)}else i=e;return i}function o(){return!0}function s(){return!1}function l(){try{return X.activeElement}catch(t){}}function u(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function c(t,e,n){if(at.isFunction(e))return at.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return at.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(Tt.test(e))return at.filter(e,t,n);e=at.filter(e,t)}return at.grep(t,function(t){return et.call(e,t)>=0!==n})}function h(t,e){return at.nodeName(t,"table")&&at.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function d(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function f(t){var e=Ot.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function g(t,e){for(var n=t.length,i=0;n>i;i++)mt.set(t[i],"globalEval",!e||mt.get(e[i],"globalEval"))}function p(t,e){var n,i,r,a,o,s,l,u;if(1===e.nodeType){if(mt.hasData(t)&&(a=mt.access(t),o=mt.set(e,a),u=a.events)){delete o.handle,o.events={};for(r in u)for(n=0,i=u[r].length;i>n;n++)at.event.add(e,r,u[r][n])}pt.hasData(t)&&(s=pt.access(t),l=at.extend({},s),pt.set(e,l))}}function m(t,n){var i=t.getElementsByTagName?t.getElementsByTagName(n||"*"):t.querySelectorAll?t.querySelectorAll(n||"*"):[];return n===e||n&&at.nodeName(t,n)?at.merge([t],i):i}function v(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Gt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function y(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=$t.length;r--;)if(e=$t[r]+n,e in t)return e;return i}function I(t,e){return t=e||t,"none"===at.css(t,"display")||!at.contains(t.ownerDocument,t)}function b(e){return t.getComputedStyle(e,null)}function C(t,e){for(var n,i,r,a=[],o=0,s=t.length;s>o;o++)i=t[o],i.style&&(a[o]=mt.get(i,"olddisplay"),n=i.style.display,e?(a[o]||"none"!==n||(i.style.display=""),""===i.style.display&&I(i)&&(a[o]=mt.access(i,"olddisplay",N(i.nodeName)))):a[o]||(r=I(i),(n&&"none"!==n||!r)&&mt.set(i,"olddisplay",r?n:at.css(i,"display"))));for(o=0;s>o;o++)i=t[o],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?a[o]||"":"none"));return t}function w(t,e,n){var i=Ut.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function A(t,e,n,i,r){for(var a=n===(i?"border":"content")?4:"width"===e?1:0,o=0;4>a;a+=2)"margin"===n&&(o+=at.css(t,n+qt[a],!0,r)),i?("content"===n&&(o-=at.css(t,"padding"+qt[a],!0,r)),"margin"!==n&&(o-=at.css(t,"border"+qt[a]+"Width",!0,r))):(o+=at.css(t,"padding"+qt[a],!0,r),"padding"!==n&&(o+=at.css(t,"border"+qt[a]+"Width",!0,r)));return o}function x(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,a=b(t),o=at.support.boxSizing&&"border-box"===at.css(t,"boxSizing",!1,a);if(0>=r||null==r){if(r=Yt(t,e,a),(0>r||null==r)&&(r=t.style[e]),Ft.test(r))return r;i=o&&(at.support.boxSizingReliable||r===t.style[e]),r=parseFloat(r)||0}return r+A(t,e,n||(o?"border":"content"),i,a)+"px"}function N(t){var e=X,n=Jt[t];return n||(n=M(t,e),"none"!==n&&n||(_t=(_t||at("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(_t[0].contentWindow||_t[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=M(t,e),_t.detach()),Jt[t]=n),n}function M(t,e){var n=at(e.createElement(t)).appendTo(e.body),i=at.css(n[0],"display");return n.remove(),i}function k(t,e,n,i){var r;if(at.isArray(e))at.each(e,function(e,r){n||ee.test(t)?i(t,r):k(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==at.type(e))i(t,e);else for(r in e)k(t+"["+r+"]",e[r],n,i)}function T(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,a=e.toLowerCase().match(st)||[];if(at.isFunction(n))for(;i=a[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function j(t,e,n,i){function r(s){var l;return a[s]=!0,at.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||o||a[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),l}var a={},o=t===ye;return r(e.dataTypes[0])||!a["*"]&&r("*")}function D(t,n){var i,r,a=at.ajaxSettings.flatOptions||{};for(i in n)n[i]!==e&&((a[i]?t:r||(r={}))[i]=n[i]);return r&&at.extend(!0,t,r),t}function E(t,n,i){for(var r,a,o,s,l=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),r===e&&(r=t.mimeType||n.getResponseHeader("Content-Type"));if(r)for(a in l)if(l[a]&&l[a].test(r)){u.unshift(a);break}if(u[0]in i)o=u[0];else{for(a in i){if(!u[0]||t.converters[a+" "+u[0]]){o=a;break}s||(s=a)}o=o||s}return o?(o!==u[0]&&u.unshift(o),i[o]):void 0}function B(t,e,n,i){var r,a,o,s,l,u={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)u[o.toLowerCase()]=t.converters[o];for(a=c.shift();a;)if(t.responseFields[a]&&(n[t.responseFields[a]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(o=u[l+" "+a]||u["* "+a],!o)for(r in u)if(s=r.split(" "),s[1]===a&&(o=u[l+" "+s[0]]||u["* "+s[0]])){o===!0?o=u[r]:u[r]!==!0&&(a=s[0],c.unshift(s[1]));break}if(o!==!0)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(h){return{state:"parsererror",error:o?h:"No conversion from "+l+" to "+a}}}return{state:"success",data:e}}function z(){return setTimeout(function(){ke=e}),ke=at.now()}function S(t,e,n){for(var i,r=(ze[e]||[]).concat(ze["*"]),a=0,o=r.length;o>a;a++)if(i=r[a].call(n,e,t))return i}function P(t,e,n){var i,r,a=0,o=Be.length,s=at.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=ke||z(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,a=1-i,o=0,l=u.tweens.length;l>o;o++)u.tweens[o].run(a);return s.notifyWith(t,[u,a,n]),1>a&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:at.extend({},e),opts:at.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:ke||z(),duration:n.duration,tweens:[],createTween:function(e,n){var i=at.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return e?s.resolveWith(t,[u,e]):s.rejectWith(t,[u,e]),this}}),c=u.props;for(G(c,u.opts.specialEasing);o>a;a++)if(i=Be[a].call(u,t,c,u.opts))return i;return at.map(c,S,u),at.isFunction(u.opts.start)&&u.opts.start.call(t,u),at.fx.timer(at.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function G(t,e){var n,i,r,a,o;for(n in t)if(i=at.camelCase(n),r=e[i],a=t[n],at.isArray(a)&&(r=a[1],a=t[n]=a[0]),n!==i&&(t[i]=a,delete t[n]),o=at.cssHooks[i],o&&"expand"in o){a=o.expand(a),delete t[i];for(n in a)n in t||(t[n]=a[n],e[n]=r)}else e[i]=r}function Z(t,n,i){var r,a,o,s,l,u,c=this,h={},d=t.style,f=t.nodeType&&I(t),g=mt.get(t,"fxshow");i.queue||(l=at._queueHooks(t,"fx"),null==l.unqueued&&(l.unqueued=0,u=l.empty.fire,l.empty.fire=function(){l.unqueued||u()}),l.unqueued++,c.always(function(){c.always(function(){l.unqueued--,at.queue(t,"fx").length||l.empty.fire()})})),1===t.nodeType&&("height"in n||"width"in n)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===at.css(t,"display")&&"none"===at.css(t,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",c.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(r in n)if(a=n[r],je.exec(a)){if(delete n[r],o=o||"toggle"===a,a===(f?"hide":"show")){if("show"!==a||!g||g[r]===e)continue;f=!0}h[r]=g&&g[r]||at.style(t,r)}if(!at.isEmptyObject(h)){g?"hidden"in g&&(f=g.hidden):g=mt.access(t,"fxshow",{}),o&&(g.hidden=!f),f?at(t).show():c.done(function(){at(t).hide()}),c.done(function(){var e;mt.remove(t,"fxshow");for(e in h)at.style(t,e,h[e])});for(r in h)s=S(f?g[r]:0,r,c),r in g||(g[r]=s.start,f&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function L(t,e,n,i,r){return new L.prototype.init(t,e,n,i,r)}function O(t,e){var n,i={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)n=qt[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function R(t){return at.isWindow(t)?t:9===t.nodeType&&t.defaultView}var W,Y,_=typeof e,V=t.location,X=t.document,U=X.documentElement,F=t.jQuery,H=t.$,J={},Q=[],K="2.0.3",q=Q.concat,$=Q.push,tt=Q.slice,et=Q.indexOf,nt=J.toString,it=J.hasOwnProperty,rt=K.trim,at=function(t,e){return new at.fn.init(t,e,W)},ot=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,st=/\S+/g,lt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ut=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ct=/^-ms-/,ht=/-([\da-z])/gi,dt=function(t,e){return e.toUpperCase()},ft=function(){X.removeEventListener("DOMContentLoaded",ft,!1),t.removeEventListener("load",ft,!1),at.ready()};at.fn=at.prototype={jquery:K,constructor:at,init:function(t,n,i){var r,a;if(!t)return this;if("string"==typeof t){if(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:lt.exec(t),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(r[1]){if(n=n instanceof at?n[0]:n,at.merge(this,at.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:X,!0)),ut.test(r[1])&&at.isPlainObject(n))for(r in n)at.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}return a=X.getElementById(r[2]),a&&a.parentNode&&(this.length=1,this[0]=a),this.context=X,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):at.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),at.makeArray(t,this))},selector:"",length:0,toArray:function(){return tt.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=at.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return at.each(this,t,e)},ready:function(t){return at.ready.promise().done(t),this},slice:function(){return this.pushStack(tt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(at.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:$,sort:[].sort,splice:[].splice},at.fn.init.prototype=at.fn,at.extend=at.fn.extend=function(){var t,n,i,r,a,o,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"==typeof s||at.isFunction(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(t=arguments[l]))for(n in t)i=s[n],r=t[n],s!==r&&(c&&r&&(at.isPlainObject(r)||(a=at.isArray(r)))?(a?(a=!1,o=i&&at.isArray(i)?i:[]):o=i&&at.isPlainObject(i)?i:{},s[n]=at.extend(c,o,r)):r!==e&&(s[n]=r));return s},at.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===at&&(t.$=H),e&&t.jQuery===at&&(t.jQuery=F),at},isReady:!1,readyWait:1,holdReady:function(t){t?at.readyWait++:at.ready(!0)},ready:function(t){(t===!0?--at.readyWait:at.isReady)||(at.isReady=!0,t!==!0&&--at.readyWait>0||(Y.resolveWith(X,[at]),at.fn.trigger&&at(X).trigger("ready").off("ready")))},isFunction:function(t){return"function"===at.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?J[nt.call(t)]||"object":typeof t},isPlainObject:function(t){if("object"!==at.type(t)||t.nodeType||at.isWindow(t))return!1;try{if(t.constructor&&!it.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw new Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||X;var i=ut.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=at.buildFragment([t],e,r),r&&at(r).remove(),at.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(t){var n,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,n=i.parseFromString(t,"text/xml")}catch(r){n=e}return n&&!n.getElementsByTagName("parsererror").length||at.error("Invalid XML: "+t),n},noop:function(){},globalEval:function(t){var e,n=eval;t=at.trim(t),t&&(1===t.indexOf("use strict")?(e=X.createElement("script"),e.text=t,X.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ct,"ms-").replace(ht,dt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,a=0,o=t.length,s=n(t);if(i){if(s)for(;o>a&&(r=e.apply(t[a],i),r!==!1);a++);else for(a in t)if(r=e.apply(t[a],i),r===!1)break}else if(s)for(;o>a&&(r=e.call(t[a],a,t[a]),r!==!1);a++);else for(a in t)if(r=e.call(t[a],a,t[a]),r===!1)break;return t},trim:function(t){return null==t?"":rt.call(t)},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?at.merge(i,"string"==typeof t?[t]:t):$.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:et.call(e,t,n)},merge:function(t,n){var i=n.length,r=t.length,a=0;if("number"==typeof i)for(;i>a;a++)t[r++]=n[a];else for(;n[a]!==e;)t[r++]=n[a++];return t.length=r,t},grep:function(t,e,n){var i,r=[],a=0,o=t.length;for(n=!!n;o>a;a++)i=!!e(t[a],a),n!==i&&r.push(t[a]);return r},map:function(t,e,i){var r,a=0,o=t.length,s=n(t),l=[];if(s)for(;o>a;a++)r=e(t[a],a,i),null!=r&&(l[l.length]=r);else for(a in t)r=e(t[a],a,i),null!=r&&(l[l.length]=r);return q.apply([],l)},guid:1,proxy:function(t,n){var i,r,a;return"string"==typeof n&&(i=t[n],n=t,t=i),at.isFunction(t)?(r=tt.call(arguments,2),a=function(){return t.apply(n||this,r.concat(tt.call(arguments)))},a.guid=t.guid=t.guid||at.guid++,
a):e},access:function(t,n,i,r,a,o,s){var l=0,u=t.length,c=null==i;if("object"===at.type(i)){a=!0;for(l in i)at.access(t,n,l,i[l],!0,o,s)}else if(r!==e&&(a=!0,at.isFunction(r)||(s=!0),c&&(s?(n.call(t,r),n=null):(c=n,n=function(t,e,n){return c.call(at(t),n)})),n))for(;u>l;l++)n(t[l],i,s?r:r.call(t[l],l,n(t[l],i)));return a?t:c?n.call(t):u?n(t[0],i):o},now:Date.now,swap:function(t,e,n,i){var r,a,o={};for(a in e)o[a]=t.style[a],t.style[a]=e[a];r=n.apply(t,i||[]);for(a in e)t.style[a]=o[a];return r}}),at.ready.promise=function(e){return Y||(Y=at.Deferred(),"complete"===X.readyState?setTimeout(at.ready):(X.addEventListener("DOMContentLoaded",ft,!1),t.addEventListener("load",ft,!1))),Y.promise(e)},at.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){J["[object "+e+"]"]=e.toLowerCase()}),W=at(X),function(t,e){function n(t,e,n,i){var r,a,o,s,l,u,c,h,g,p;if((e?e.ownerDocument||e:R)!==B&&E(e),e=e||B,n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=e.nodeType)&&9!==s)return[];if(S&&!i){if(r=It.exec(t))if(o=r[1]){if(9===s){if(a=e.getElementById(o),!a||!a.parentNode)return n;if(a.id===o)return n.push(a),n}else if(e.ownerDocument&&(a=e.ownerDocument.getElementById(o))&&L(e,a)&&a.id===o)return n.push(a),n}else{if(r[2])return tt.apply(n,e.getElementsByTagName(t)),n;if((o=r[3])&&A.getElementsByClassName&&e.getElementsByClassName)return tt.apply(n,e.getElementsByClassName(o)),n}if(A.qsa&&(!P||!P.test(t))){if(h=c=O,g=e,p=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(u=d(t),(c=e.getAttribute("id"))?h=c.replace(wt,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",l=u.length;l--;)u[l]=h+f(u[l]);g=ft.test(t)&&e.parentNode||e,p=u.join(",")}if(p)try{return tt.apply(n,g.querySelectorAll(p)),n}catch(m){}finally{c||e.removeAttribute("id")}}}return C(t.replace(ct,"$1"),e,n,i)}function i(){function t(n,i){return e.push(n+=" ")>N.cacheLength&&delete t[e.shift()],t[n]=i}var e=[];return t}function r(t){return t[O]=!0,t}function a(t){var e=B.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=t.length;i--;)N.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||J)-(~t.sourceIndex||J);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function l(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return r(function(e){return e=+e,r(function(n,i){for(var r,a=t([],n.length,e),o=a.length;o--;)n[r=a[o]]&&(n[r]=!(i[r]=n[r]))})})}function h(){}function d(t,e){var i,r,a,o,s,l,u,c=V[t+" "];if(c)return e?0:c.slice(0);for(s=t,l=[],u=N.preFilter;s;){i&&!(r=ht.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(a=[])),i=!1,(r=dt.exec(s))&&(i=r.shift(),a.push({value:i,type:r[0].replace(ct," ")}),s=s.slice(i.length));for(o in N.filter)!(r=vt[o].exec(s))||u[o]&&!(r=u[o](r))||(i=r.shift(),a.push({value:i,type:o,matches:r}),s=s.slice(i.length));if(!i)break}return e?s.length:s?n.error(t):V(t,l).slice(0)}function f(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function g(t,e,n){var i=e.dir,r=n&&"parentNode"===i,a=Y++;return e.first?function(e,n,a){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,a)}:function(e,n,o){var s,l,u,c=W+" "+a;if(o){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,o))return!0}else for(;e=e[i];)if(1===e.nodeType||r)if(u=e[O]||(e[O]={}),(l=u[i])&&l[0]===c){if((s=l[1])===!0||s===x)return s===!0}else if(l=u[i]=[c],l[1]=t(e,n,o)||x,l[1]===!0)return!0}}function p(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function m(t,e,n,i,r){for(var a,o=[],s=0,l=t.length,u=null!=e;l>s;s++)(a=t[s])&&(n&&!n(a,i,r)||(o.push(a),u&&e.push(s)));return o}function v(t,e,n,i,a,o){return i&&!i[O]&&(i=v(i)),a&&!a[O]&&(a=v(a,o)),r(function(r,o,s,l){var u,c,h,d=[],f=[],g=o.length,p=r||b(e||"*",s.nodeType?[s]:s,[]),v=!t||!r&&e?p:m(p,d,t,s,l),y=n?a||(r?t:g||i)?[]:o:v;if(n&&n(v,y,s,l),i)for(u=m(y,f),i(u,[],s,l),c=u.length;c--;)(h=u[c])&&(y[f[c]]=!(v[f[c]]=h));if(r){if(a||t){if(a){for(u=[],c=y.length;c--;)(h=y[c])&&u.push(v[c]=h);a(null,y=[],u,l)}for(c=y.length;c--;)(h=y[c])&&(u=a?nt.call(r,h):d[c])>-1&&(r[u]=!(o[u]=h))}}else y=m(y===o?y.splice(g,y.length):y),a?a(null,o,y,l):tt.apply(o,y)})}function y(t){for(var e,n,i,r=t.length,a=N.relative[t[0].type],o=a||N.relative[" "],s=a?1:0,l=g(function(t){return t===e},o,!0),u=g(function(t){return nt.call(e,t)>-1},o,!0),c=[function(t,n,i){return!a&&(i||n!==j)||((e=n).nodeType?l(t,n,i):u(t,n,i))}];r>s;s++)if(n=N.relative[t[s].type])c=[g(p(c),n)];else{if(n=N.filter[t[s].type].apply(null,t[s].matches),n[O]){for(i=++s;r>i&&!N.relative[t[i].type];i++);return v(s>1&&p(c),s>1&&f(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(ct,"$1"),n,i>s&&y(t.slice(s,i)),r>i&&y(t=t.slice(i)),r>i&&f(t))}c.push(n)}return p(c)}function I(t,e){var i=0,a=e.length>0,o=t.length>0,s=function(r,s,l,u,c){var h,d,f,g=[],p=0,v="0",y=r&&[],I=null!=c,b=j,C=r||o&&N.find.TAG("*",c&&s.parentNode||s),w=W+=null==b?1:Math.random()||.1;for(I&&(j=s!==B&&s,x=i);null!=(h=C[v]);v++){if(o&&h){for(d=0;f=t[d++];)if(f(h,s,l)){u.push(h);break}I&&(W=w,x=++i)}a&&((h=!f&&h)&&p--,r&&y.push(h))}if(p+=v,a&&v!==p){for(d=0;f=e[d++];)f(y,g,s,l);if(r){if(p>0)for(;v--;)y[v]||g[v]||(g[v]=q.call(u));g=m(g)}tt.apply(u,g),I&&!r&&g.length>0&&p+e.length>1&&n.uniqueSort(u)}return I&&(W=w,j=b),y};return a?r(s):s}function b(t,e,i){for(var r=0,a=e.length;a>r;r++)n(t,e[r],i);return i}function C(t,e,n,i){var r,a,o,s,l,u=d(t);if(!i&&1===u.length){if(a=u[0]=u[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&A.getById&&9===e.nodeType&&S&&N.relative[a[1].type]){if(e=(N.find.ID(o.matches[0].replace(At,xt),e)||[])[0],!e)return n;t=t.slice(a.shift().value.length)}for(r=vt.needsContext.test(t)?0:a.length;r--&&(o=a[r],!N.relative[s=o.type]);)if((l=N.find[s])&&(i=l(o.matches[0].replace(At,xt),ft.test(a[0].type)&&e.parentNode||e))){if(a.splice(r,1),t=i.length&&f(a),!t)return tt.apply(n,i),n;break}}return T(t,u)(i,e,!S,n,ft.test(t)),n}var w,A,x,N,M,k,T,j,D,E,B,z,S,P,G,Z,L,O="sizzle"+-new Date,R=t.document,W=0,Y=0,_=i(),V=i(),X=i(),U=!1,F=function(t,e){return t===e?(U=!0,0):0},H=typeof e,J=1<<31,Q={}.hasOwnProperty,K=[],q=K.pop,$=K.push,tt=K.push,et=K.slice,nt=K.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=ot.replace("w","w#"),lt="\\["+rt+"*("+ot+")"+rt+"*(?:([*^$|!~]?=)"+rt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+st+")|)|)"+rt+"*\\]",ut=":("+ot+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+lt.replace(3,8)+")*)|.*)\\)|)",ct=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),ht=new RegExp("^"+rt+"*,"+rt+"*"),dt=new RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),ft=new RegExp(rt+"*[+~]"),gt=new RegExp("="+rt+"*([^\\]'\"]*)"+rt+"*\\]","g"),pt=new RegExp(ut),mt=new RegExp("^"+st+"$"),vt={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot.replace("w","w*")+")"),ATTR:new RegExp("^"+lt),PSEUDO:new RegExp("^"+ut),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},yt=/^[^{]+\{\s*\[native \w/,It=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/^(?:input|select|textarea|button)$/i,Ct=/^h\d$/i,wt=/'|\\/g,At=new RegExp("\\\\([\\da-f]{1,6}"+rt+"?|("+rt+")|.)","ig"),xt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{tt.apply(K=et.call(R.childNodes),R.childNodes),K[R.childNodes.length].nodeType}catch(Nt){tt={apply:K.length?function(t,e){$.apply(t,et.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}k=n.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},A=n.support={},E=n.setDocument=function(t){var e=t?t.ownerDocument||t:R,n=e.defaultView;return e!==B&&9===e.nodeType&&e.documentElement?(B=e,z=e.documentElement,S=!k(e),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){E()}),A.attributes=a(function(t){return t.className="i",!t.getAttribute("className")}),A.getElementsByTagName=a(function(t){return t.appendChild(e.createComment("")),!t.getElementsByTagName("*").length}),A.getElementsByClassName=a(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),A.getById=a(function(t){return z.appendChild(t).id=O,!e.getElementsByName||!e.getElementsByName(O).length}),A.getById?(N.find.ID=function(t,e){if(typeof e.getElementById!==H&&S){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},N.filter.ID=function(t){var e=t.replace(At,xt);return function(t){return t.getAttribute("id")===e}}):(delete N.find.ID,N.filter.ID=function(t){var e=t.replace(At,xt);return function(t){var n=typeof t.getAttributeNode!==H&&t.getAttributeNode("id");return n&&n.value===e}}),N.find.TAG=A.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==H?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],r=0,a=e.getElementsByTagName(t);if("*"===t){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},N.find.CLASS=A.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==H&&S?e.getElementsByClassName(t):void 0},G=[],P=[],(A.qsa=yt.test(e.querySelectorAll))&&(a(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||P.push("\\["+rt+"*(?:value|"+it+")"),t.querySelectorAll(":checked").length||P.push(":checked")}),a(function(t){var n=e.createElement("input");n.setAttribute("type","hidden"),t.appendChild(n).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&P.push("[*^$]="+rt+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),P.push(",.*:")})),(A.matchesSelector=yt.test(Z=z.webkitMatchesSelector||z.mozMatchesSelector||z.oMatchesSelector||z.msMatchesSelector))&&a(function(t){A.disconnectedMatch=Z.call(t,"div"),Z.call(t,"[s!='']:x"),G.push("!=",ut)}),P=P.length&&new RegExp(P.join("|")),G=G.length&&new RegExp(G.join("|")),L=yt.test(z.contains)||z.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},F=z.compareDocumentPosition?function(t,n){if(t===n)return U=!0,0;var i=n.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(n);return i?1&i||!A.sortDetached&&n.compareDocumentPosition(t)===i?t===e||L(R,t)?-1:n===e||L(R,n)?1:D?nt.call(D,t)-nt.call(D,n):0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,n){var i,r=0,a=t.parentNode,o=n.parentNode,l=[t],u=[n];if(t===n)return U=!0,0;if(!a||!o)return t===e?-1:n===e?1:a?-1:o?1:D?nt.call(D,t)-nt.call(D,n):0;if(a===o)return s(t,n);for(i=t;i=i.parentNode;)l.unshift(i);for(i=n;i=i.parentNode;)u.unshift(i);for(;l[r]===u[r];)r++;return r?s(l[r],u[r]):l[r]===R?-1:u[r]===R?1:0},e):B},n.matches=function(t,e){return n(t,null,null,e)},n.matchesSelector=function(t,e){if((t.ownerDocument||t)!==B&&E(t),e=e.replace(gt,"='$1']"),A.matchesSelector&&S&&(!G||!G.test(e))&&(!P||!P.test(e)))try{var i=Z.call(t,e);if(i||A.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return n(e,B,null,[t]).length>0},n.contains=function(t,e){return(t.ownerDocument||t)!==B&&E(t),L(t,e)},n.attr=function(t,n){(t.ownerDocument||t)!==B&&E(t);var i=N.attrHandle[n.toLowerCase()],r=i&&Q.call(N.attrHandle,n.toLowerCase())?i(t,n,!S):e;return r===e?A.attributes||!S?t.getAttribute(n):(r=t.getAttributeNode(n))&&r.specified?r.value:null:r},n.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},n.uniqueSort=function(t){var e,n=[],i=0,r=0;if(U=!A.detectDuplicates,D=!A.sortStable&&t.slice(0),t.sort(F),U){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return t},M=n.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=M(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i];i++)n+=M(e);return n},N=n.selectors={cacheLength:50,createPseudo:r,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(At,xt),t[3]=(t[4]||t[5]||"").replace(At,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||n.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&n.error(t[0]),t},PSEUDO:function(t){var n,i=!t[5]&&t[2];return vt.CHILD.test(t[0])?null:(t[3]&&t[4]!==e?t[2]=t[4]:i&&pt.test(i)&&(n=d(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(t[0]=t[0].slice(0,n),t[2]=i.slice(0,n)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(At,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=_[t+" "];return e||(e=new RegExp("(^|"+rt+")"+t+"("+rt+"|$)"))&&_(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==H&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(r){var a=n.attr(r,t);return null==a?"!="===e:e?(a+="","="===e?a===i:"!="===e?a!==i:"^="===e?i&&0===a.indexOf(i):"*="===e?i&&a.indexOf(i)>-1:"$="===e?i&&a.slice(-i.length)===i:"~="===e?(" "+a+" ").indexOf(i)>-1:"|="===e?a===i||a.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,r){var a="nth"!==t.slice(0,3),o="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,d,f,g,p=a!==o?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s;if(m){if(a){for(;p;){for(h=e;h=h[p];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;g=p="only"===t&&!g&&"nextSibling"}return!0}if(g=[o?m.firstChild:m.lastChild],o&&y){for(c=m[O]||(m[O]={}),u=c[t]||[],f=u[0]===W&&u[1],d=u[0]===W&&u[2],h=f&&m.childNodes[f];h=++f&&h&&h[p]||(d=f=0)||g.pop();)if(1===h.nodeType&&++d&&h===e){c[t]=[W,f,d];break}}else if(y&&(u=(e[O]||(e[O]={}))[t])&&u[0]===W)d=u[1];else for(;(h=++f&&h&&h[p]||(d=f=0)||g.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(y&&((h[O]||(h[O]={}))[t]=[W,d]),h!==e)););return d-=r,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,e){var i,a=N.pseudos[t]||N.setFilters[t.toLowerCase()]||n.error("unsupported pseudo: "+t);return a[O]?a(e):a.length>1?(i=[t,t,"",e],N.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,n){for(var i,r=a(t,e),o=r.length;o--;)i=nt.call(t,r[o]),t[i]=!(n[i]=r[o])}):function(t){return a(t,0,i)}):a}},pseudos:{not:r(function(t){var e=[],n=[],i=T(t.replace(ct,"$1"));return i[O]?r(function(t,e,n,r){for(var a,o=i(t,null,r,[]),s=t.length;s--;)(a=o[s])&&(t[s]=!(e[s]=a))}):function(t,r,a){return e[0]=t,i(e,null,a,n),!n.pop()}}),has:r(function(t){return function(e){return n(t,e).length>0}}),contains:r(function(t){return function(e){return(e.textContent||e.innerText||M(e)).indexOf(t)>-1}}),lang:r(function(t){return mt.test(t||"")||n.error("unsupported lang: "+t),t=t.replace(At,xt).toLowerCase(),function(e){var n;do if(n=S?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===z},focus:function(t){return t===B.activeElement&&(!B.hasFocus||B.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!N.pseudos.empty(t)},header:function(t){return Ct.test(t.nodeName)},input:function(t){return bt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},N.pseudos.nth=N.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})N.pseudos[w]=l(w);for(w in{submit:!0,reset:!0})N.pseudos[w]=u(w);h.prototype=N.filters=N.pseudos,N.setFilters=new h,T=n.compile=function(t,e){var n,i=[],r=[],a=X[t+" "];if(!a){for(e||(e=d(t)),n=e.length;n--;)a=y(e[n]),a[O]?i.push(a):r.push(a);a=X(t,I(r,i))}return a},A.sortStable=O.split("").sort(F).join("")===O,A.detectDuplicates=U,E(),A.sortDetached=a(function(t){return 1&t.compareDocumentPosition(B.createElement("div"))}),a(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),A.attributes&&a(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),a(function(t){return null==t.getAttribute("disabled")})||o(it,function(t,e,n){var i;return n?void 0:(i=t.getAttributeNode(e))&&i.specified?i.value:t[e]===!0?e.toLowerCase():null}),at.find=n,at.expr=n.selectors,at.expr[":"]=at.expr.pseudos,at.unique=n.uniqueSort,at.text=n.getText,at.isXMLDoc=n.isXML,at.contains=n.contains}(t);var gt={};at.Callbacks=function(t){t="string"==typeof t?gt[t]||i(t):at.extend({},t);var n,r,a,o,s,l,u=[],c=!t.once&&[],h=function(e){for(n=t.memory&&e,r=!0,l=o||0,o=0,s=u.length,a=!0;u&&s>l;l++)if(u[l].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}a=!1,u&&(c?c.length&&h(c.shift()):n?u=[]:d.disable())},d={add:function(){if(u){var e=u.length;!function i(e){at.each(e,function(e,n){var r=at.type(n);"function"===r?t.unique&&d.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),a?s=u.length:n&&(o=e,h(n))}return this},remove:function(){return u&&at.each(arguments,function(t,e){for(var n;(n=at.inArray(e,u,n))>-1;)u.splice(n,1),a&&(s>=n&&s--,l>=n&&l--)}),this},has:function(t){return t?at.inArray(t,u)>-1:!(!u||!u.length)},empty:function(){return u=[],s=0,this},disable:function(){return u=c=n=e,this},disabled:function(){return!u},lock:function(){return c=e,n||d.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!u||r&&!c||(e=e||[],e=[t,e.slice?e.slice():e],a?c.push(e):h(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},at.extend({Deferred:function(t){var e=[["resolve","done",at.Callbacks("once memory"),"resolved"],["reject","fail",at.Callbacks("once memory"),"rejected"],["notify","progress",at.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return at.Deferred(function(n){at.each(e,function(e,a){var o=a[0],s=at.isFunction(t[e])&&t[e];r[a[1]](function(){var t=s&&s.apply(this,arguments);t&&at.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===i?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?at.extend(t,i):i}},r={};return i.pipe=i.then,at.each(e,function(t,a){var o=a[2],s=a[3];i[a[1]]=o.add,s&&o.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),r[a[0]]=function(){return r[a[0]+"With"](this===r?i:this,arguments),this},r[a[0]+"With"]=o.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,a=tt.call(arguments),o=a.length,s=1!==o||t&&at.isFunction(t.promise)?o:0,l=1===s?t:at.Deferred(),u=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?tt.call(arguments):r,i===e?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(o>1)for(e=new Array(o),n=new Array(o),i=new Array(o);o>r;r++)a[r]&&at.isFunction(a[r].promise)?a[r].promise().done(u(r,i,a)).fail(l.reject).progress(u(r,n,e)):--s;return s||l.resolveWith(i,a),l.promise()}}),at.support=function(e){var n=X.createElement("input"),i=X.createDocumentFragment(),r=X.createElement("div"),a=X.createElement("select"),o=a.appendChild(X.createElement("option"));return n.type?(n.type="checkbox",e.checkOn=""!==n.value,e.optSelected=o.selected,e.reliableMarginRight=!0,e.boxSizingReliable=!0,e.pixelPosition=!1,n.checked=!0,e.noCloneChecked=n.cloneNode(!0).checked,a.disabled=!0,e.optDisabled=!o.disabled,n=X.createElement("input"),n.value="t",n.type="radio",e.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),i.appendChild(n),e.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,e.focusinBubbles="onfocusin"in t,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===r.style.backgroundClip,at(function(){var n,i,a="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",o=X.getElementsByTagName("body")[0];o&&(n=X.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",o.appendChild(n).appendChild(r),r.innerHTML="",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",at.swap(o,null!=o.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===r.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(r,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(r,null)||{width:"4px"}).width,i=r.appendChild(X.createElement("div")),i.style.cssText=r.style.cssText=a,i.style.marginRight=i.style.width="0",r.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),o.removeChild(n))}),e):e}({});var pt,mt,vt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,yt=/([A-Z])/g;r.uid=1,r.accepts=function(t){return t.nodeType?1===t.nodeType||9===t.nodeType:!0},r.prototype={key:function(t){if(!r.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=r.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,at.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,r=this.key(t),a=this.cache[r];if("string"==typeof e)a[e]=n;else if(at.isEmptyObject(a))at.extend(this.cache[r],e);else for(i in e)a[i]=e[i];return a},get:function(t,n){var i=this.cache[this.key(t)];return n===e?i:i[n]},access:function(t,n,i){var r;return n===e||n&&"string"==typeof n&&i===e?(r=this.get(t,n),r!==e?r:this.get(t,at.camelCase(n))):(this.set(t,n,i),i!==e?i:n)},remove:function(t,n){var i,r,a,o=this.key(t),s=this.cache[o];if(n===e)this.cache[o]={};else{at.isArray(n)?r=n.concat(n.map(at.camelCase)):(a=at.camelCase(n),n in s?r=[n,a]:(r=a,r=r in s?[r]:r.match(st)||[])),i=r.length;for(;i--;)delete s[r[i]]}},hasData:function(t){return!at.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}},pt=new r,mt=new r,at.extend({acceptData:r.accepts,hasData:function(t){return pt.hasData(t)||mt.hasData(t)},data:function(t,e,n){return pt.access(t,e,n)},removeData:function(t,e){pt.remove(t,e)},_data:function(t,e,n){return mt.access(t,e,n)},_removeData:function(t,e){mt.remove(t,e)}}),at.fn.extend({data:function(t,n){var i,r,o=this[0],s=0,l=null;if(t===e){if(this.length&&(l=pt.get(o),1===o.nodeType&&!mt.get(o,"hasDataAttrs"))){for(i=o.attributes;s<i.length;s++)r=i[s].name,0===r.indexOf("data-")&&(r=at.camelCase(r.slice(5)),a(o,r,l[r]));mt.set(o,"hasDataAttrs",!0)}return l}return"object"==typeof t?this.each(function(){pt.set(this,t)}):at.access(this,function(n){var i,r=at.camelCase(t);if(o&&n===e){if(i=pt.get(o,t),i!==e)return i;if(i=pt.get(o,r),i!==e)return i;if(i=a(o,r,e),i!==e)return i}else this.each(function(){var i=pt.get(this,r);pt.set(this,r,n),-1!==t.indexOf("-")&&i!==e&&pt.set(this,t,n)})},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){pt.remove(this,t)})}}),at.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=mt.get(t,e),n&&(!i||at.isArray(n)?i=mt.access(t,e,at.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=at.queue(t,e),i=n.length,r=n.shift(),a=at._queueHooks(t,e),o=function(){at.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete a.stop,r.call(t,o,a)),!i&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return mt.get(t,n)||mt.access(t,n,{empty:at.Callbacks("once memory").add(function(){mt.remove(t,[e+"queue",n])})})}}),at.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),arguments.length<i?at.queue(this[0],t):n===e?this:this.each(function(){var e=at.queue(this,t,n);at._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&at.dequeue(this,t)})},dequeue:function(t){return this.each(function(){at.dequeue(this,t)})},delay:function(t,e){return t=at.fx?at.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,r=1,a=at.Deferred(),o=this,s=this.length,l=function(){--r||a.resolveWith(o,[o])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";s--;)i=mt.get(o[s],t+"queueHooks"),i&&i.empty&&(r++,i.empty.add(l));return l(),a.promise(n)}});var It,bt,Ct=/[\t\r\n\f]/g,wt=/\r/g,At=/^(?:input|select|textarea|button)$/i;at.fn.extend({attr:function(t,e){return at.access(this,at.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){at.removeAttr(this,t)})},prop:function(t,e){return at.access(this,at.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[at.propFix[t]||t]})},addClass:function(t){var e,n,i,r,a,o=0,s=this.length,l="string"==typeof t&&t;if(at.isFunction(t))return this.each(function(e){at(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(st)||[];s>o;o++)if(n=this[o],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ct," "):" ")){for(a=0;r=e[a++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");n.className=at.trim(i)}return this},removeClass:function(t){var e,n,i,r,a,o=0,s=this.length,l=0===arguments.length||"string"==typeof t&&t;if(at.isFunction(t))return this.each(function(e){at(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(st)||[];s>o;o++)if(n=this[o],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ct," "):"")){for(a=0;r=e[a++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=t?at.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):at.isFunction(t)?this.each(function(n){at(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,i=0,r=at(this),a=t.match(st)||[];e=a[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else n!==_&&"boolean"!==n||(this.className&&mt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":mt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Ct," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,r,a=this[0];{if(arguments.length)return r=at.isFunction(t),this.each(function(i){var a;1===this.nodeType&&(a=r?t.call(this,i,at(this).val()):t,null==a?a="":"number"==typeof a?a+="":at.isArray(a)&&(a=at.map(a,function(t){return null==t?"":t+""})),n=at.valHooks[this.type]||at.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,a,"value")!==e||(this.value=a))});if(a)return n=at.valHooks[a.type]||at.valHooks[a.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(a,"value"))!==e?i:(i=a.value,"string"==typeof i?i.replace(wt,""):null==i?"":i)}}}),at.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,a="select-one"===t.type||0>r,o=a?null:[],s=a?r+1:i.length,l=0>r?s:a?r:0;s>l;l++)if(n=i[l],(n.selected||l===r)&&(at.support.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!at.nodeName(n.parentNode,"optgroup"))){if(e=at(n).val(),a)return e;o.push(e)}return o},set:function(t,e){for(var n,i,r=t.options,a=at.makeArray(e),o=r.length;o--;)i=r[o],(i.selected=at.inArray(at(i).val(),a)>=0)&&(n=!0);return n||(t.selectedIndex=-1),a}}},attr:function(t,n,i){var r,a,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===_?at.prop(t,n,i):(1===o&&at.isXMLDoc(t)||(n=n.toLowerCase(),r=at.attrHooks[n]||(at.expr.match.bool.test(n)?bt:It)),i===e?r&&"get"in r&&null!==(a=r.get(t,n))?a:(a=at.find.attr(t,n),null==a?e:a):null!==i?r&&"set"in r&&(a=r.set(t,i,n))!==e?a:(t.setAttribute(n,i+""),i):void at.removeAttr(t,n))},removeAttr:function(t,e){var n,i,r=0,a=e&&e.match(st);if(a&&1===t.nodeType)for(;n=a[r++];)i=at.propFix[n]||n,at.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!at.support.radioValue&&"radio"===e&&at.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,n,i){var r,a,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return o=1!==s||!at.isXMLDoc(t),o&&(n=at.propFix[n]||n,a=at.propHooks[n]),i!==e?a&&"set"in a&&(r=a.set(t,i,n))!==e?r:t[n]=i:a&&"get"in a&&null!==(r=a.get(t,n))?r:t[n]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||At.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),bt={set:function(t,e,n){return e===!1?at.removeAttr(t,n):t.setAttribute(n,n),n}},at.each(at.expr.match.bool.source.match(/\w+/g),function(t,n){var i=at.expr.attrHandle[n]||at.find.attr;at.expr.attrHandle[n]=function(t,n,r){var a=at.expr.attrHandle[n],o=r?e:(at.expr.attrHandle[n]=e)!=i(t,n,r)?n.toLowerCase():null;return at.expr.attrHandle[n]=a,o}}),at.support.optSelected||(at.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),at.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){at.propFix[this.toLowerCase()]=this}),at.each(["radio","checkbox"],function(){at.valHooks[this]={set:function(t,e){return at.isArray(e)?t.checked=at.inArray(at(t).val(),e)>=0:void 0}},at.support.checkOn||(at.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value;
})});var xt=/^key/,Nt=/^(?:mouse|contextmenu)|click/,Mt=/^(?:focusinfocus|focusoutblur)$/,kt=/^([^.]*)(?:\.(.+)|)$/;at.event={global:{},add:function(t,n,i,r,a){var o,s,l,u,c,h,d,f,g,p,m,v=mt.get(t);if(v){for(i.handler&&(o=i,i=o.handler,a=o.selector),i.guid||(i.guid=at.guid++),(u=v.events)||(u=v.events={}),(s=v.handle)||(s=v.handle=function(t){return typeof at===_||t&&at.event.triggered===t.type?e:at.event.dispatch.apply(s.elem,arguments)},s.elem=t),n=(n||"").match(st)||[""],c=n.length;c--;)l=kt.exec(n[c])||[],g=m=l[1],p=(l[2]||"").split(".").sort(),g&&(d=at.event.special[g]||{},g=(a?d.delegateType:d.bindType)||g,d=at.event.special[g]||{},h=at.extend({type:g,origType:m,data:r,handler:i,guid:i.guid,selector:a,needsContext:a&&at.expr.match.needsContext.test(a),namespace:p.join(".")},o),(f=u[g])||(f=u[g]=[],f.delegateCount=0,d.setup&&d.setup.call(t,r,p,s)!==!1||t.addEventListener&&t.addEventListener(g,s,!1)),d.add&&(d.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),a?f.splice(f.delegateCount++,0,h):f.push(h),at.event.global[g]=!0);t=null}},remove:function(t,e,n,i,r){var a,o,s,l,u,c,h,d,f,g,p,m=mt.hasData(t)&&mt.get(t);if(m&&(l=m.events)){for(e=(e||"").match(st)||[""],u=e.length;u--;)if(s=kt.exec(e[u])||[],f=p=s[1],g=(s[2]||"").split(".").sort(),f){for(h=at.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,d=l[f]||[],s=s[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=d.length;a--;)c=d[a],!r&&p!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));o&&!d.length&&(h.teardown&&h.teardown.call(t,g,m.handle)!==!1||at.removeEvent(t,f,m.handle),delete l[f])}else for(f in l)at.event.remove(t,f+e[u],n,i,!0);at.isEmptyObject(l)&&(delete m.handle,mt.remove(t,"events"))}},trigger:function(n,i,r,a){var o,s,l,u,c,h,d,f=[r||X],g=it.call(n,"type")?n.type:n,p=it.call(n,"namespace")?n.namespace.split("."):[];if(s=l=r=r||X,3!==r.nodeType&&8!==r.nodeType&&!Mt.test(g+at.event.triggered)&&(g.indexOf(".")>=0&&(p=g.split("."),g=p.shift(),p.sort()),c=g.indexOf(":")<0&&"on"+g,n=n[at.expando]?n:new at.Event(g,"object"==typeof n&&n),n.isTrigger=a?2:3,n.namespace=p.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=r),i=null==i?[n]:at.makeArray(i,[n]),d=at.event.special[g]||{},a||!d.trigger||d.trigger.apply(r,i)!==!1)){if(!a&&!d.noBubble&&!at.isWindow(r)){for(u=d.delegateType||g,Mt.test(u+g)||(s=s.parentNode);s;s=s.parentNode)f.push(s),l=s;l===(r.ownerDocument||X)&&f.push(l.defaultView||l.parentWindow||t)}for(o=0;(s=f[o++])&&!n.isPropagationStopped();)n.type=o>1?u:d.bindType||g,h=(mt.get(s,"events")||{})[n.type]&&mt.get(s,"handle"),h&&h.apply(s,i),h=c&&s[c],h&&at.acceptData(s)&&h.apply&&h.apply(s,i)===!1&&n.preventDefault();return n.type=g,a||n.isDefaultPrevented()||d._default&&d._default.apply(f.pop(),i)!==!1||!at.acceptData(r)||c&&at.isFunction(r[g])&&!at.isWindow(r)&&(l=r[c],l&&(r[c]=null),at.event.triggered=g,r[g](),at.event.triggered=e,l&&(r[c]=l)),n.result}},dispatch:function(t){t=at.event.fix(t);var n,i,r,a,o,s=[],l=tt.call(arguments),u=(mt.get(this,"events")||{})[t.type]||[],c=at.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(s=at.event.handlers.call(this,t,u),n=0;(a=s[n++])&&!t.isPropagationStopped();)for(t.currentTarget=a.elem,i=0;(o=a.handlers[i++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(o.namespace)||(t.handleObj=o,t.data=o.data,r=((at.event.special[o.origType]||{}).handle||o.handler).apply(a.elem,l),r!==e&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,r,a,o,s=[],l=n.delegateCount,u=t.target;if(l&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==t.type){for(r=[],i=0;l>i;i++)o=n[i],a=o.selector+" ",r[a]===e&&(r[a]=o.needsContext?at(a,this).index(u)>=0:at.find(a,this,null,[u]).length),r[a]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return l<n.length&&s.push({elem:this,handlers:n.slice(l)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,r,a,o=n.button;return null==t.pageX&&null!=n.clientX&&(i=t.target.ownerDocument||X,r=i.documentElement,a=i.body,t.pageX=n.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),t.pageY=n.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)),t.which||o===e||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[at.expando])return t;var e,n,i,r=t.type,a=t,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=Nt.test(r)?this.mouseHooks:xt.test(r)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,t=new at.Event(a),e=i.length;e--;)n=i[e],t[n]=a[n];return t.target||(t.target=X),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,a):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&at.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return at.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=at.extend(new at.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?at.event.trigger(r,null,e):at.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},at.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},at.Event=function(t,e){return this instanceof at.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.getPreventDefault&&t.getPreventDefault()?o:s):this.type=t,e&&at.extend(this,e),this.timeStamp=t&&t.timeStamp||at.now(),void(this[at.expando]=!0)):new at.Event(t,e)},at.Event.prototype={isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=o,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=o,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()}},at.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){at.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,a=t.handleObj;return r&&(r===i||at.contains(i,r))||(t.type=a.origType,n=a.handler.apply(this,arguments),t.type=e),n}}}),at.support.focusinBubbles||at.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){at.event.simulate(e,t.target,at.event.fix(t),!0)};at.event.special[e]={setup:function(){0===n++&&X.addEventListener(t,i,!0)},teardown:function(){0===--n&&X.removeEventListener(t,i,!0)}}}),at.fn.extend({on:function(t,n,i,r,a){var o,l;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(l in t)this.on(l,n,i,t[l],a);return this}if(null==i&&null==r?(r=n,i=n=e):null==r&&("string"==typeof n?(r=i,i=e):(r=i,i=n,n=e)),r===!1)r=s;else if(!r)return this;return 1===a&&(o=r,r=function(t){return at().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=at.guid++)),this.each(function(){at.event.add(this,t,r,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var r,a;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,at(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(a in t)this.off(a,n,t[a]);return this}return n!==!1&&"function"!=typeof n||(i=n,n=e),i===!1&&(i=s),this.each(function(){at.event.remove(this,t,i,n)})},trigger:function(t,e){return this.each(function(){at.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?at.event.trigger(t,e,n,!0):void 0}});var Tt=/^.[^:#\[\.,]*$/,jt=/^(?:parents|prev(?:Until|All))/,Dt=at.expr.match.needsContext,Et={children:!0,contents:!0,next:!0,prev:!0};at.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!=typeof t)return this.pushStack(at(t).filter(function(){for(e=0;r>e;e++)if(at.contains(i[e],this))return!0}));for(e=0;r>e;e++)at.find(t,i[e],n);return n=this.pushStack(r>1?at.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},has:function(t){var e=at(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(at.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(c(this,t||[],!0))},filter:function(t){return this.pushStack(c(this,t||[],!1))},is:function(t){return!!c(this,"string"==typeof t&&Dt.test(t)?at(t):t||[],!1).length},closest:function(t,e){for(var n,i=0,r=this.length,a=[],o=Dt.test(t)||"string"!=typeof t?at(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&at.find.matchesSelector(n,t))){n=a.push(n);break}return this.pushStack(a.length>1?at.unique(a):a)},index:function(t){return t?"string"==typeof t?et.call(at(t),this[0]):et.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?at(t,e):at.makeArray(t&&t.nodeType?[t]:t),i=at.merge(this.get(),n);return this.pushStack(at.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),at.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return at.dir(t,"parentNode")},parentsUntil:function(t,e,n){return at.dir(t,"parentNode",n)},next:function(t){return u(t,"nextSibling")},prev:function(t){return u(t,"previousSibling")},nextAll:function(t){return at.dir(t,"nextSibling")},prevAll:function(t){return at.dir(t,"previousSibling")},nextUntil:function(t,e,n){return at.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return at.dir(t,"previousSibling",n)},siblings:function(t){return at.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return at.sibling(t.firstChild)},contents:function(t){return t.contentDocument||at.merge([],t.childNodes)}},function(t,e){at.fn[t]=function(n,i){var r=at.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=at.filter(i,r)),this.length>1&&(Et[t]||at.unique(r),jt.test(t)&&r.reverse()),this.pushStack(r)}}),at.extend({filter:function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?at.find.matchesSelector(i,t)?[i]:[]:at.find.matches(t,at.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,n,i){for(var r=[],a=i!==e;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(a&&at(t).is(i))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var Bt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,zt=/<([\w:]+)/,St=/<|&#?\w+;/,Pt=/<(?:script|style|link)/i,Gt=/^(?:checkbox|radio)$/i,Zt=/checked\s*(?:[^=]|=\s*.checked.)/i,Lt=/^$|\/(?:java|ecma)script/i,Ot=/^true\/(.*)/,Rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Wt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Wt.optgroup=Wt.option,Wt.tbody=Wt.tfoot=Wt.colgroup=Wt.caption=Wt.thead,Wt.th=Wt.td,at.fn.extend({text:function(t){return at.access(this,function(t){return t===e?at.text(this):this.empty().append((this[0]&&this[0].ownerDocument||X).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=h(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=h(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?at.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||at.cleanData(m(n)),n.parentNode&&(e&&at.contains(n.ownerDocument,n)&&g(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(at.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return at.clone(this,t,e)})},html:function(t){return at.access(this,function(t){var n=this[0]||{},i=0,r=this.length;if(t===e&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!Pt.test(t)&&!Wt[(zt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Bt,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(at.cleanData(m(n,!1)),n.innerHTML=t);n=0}catch(a){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=at.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(n){var i=t[e++],r=t[e++];r&&(i&&i.parentNode!==r&&(i=this.nextSibling),at(this).remove(),r.insertBefore(n,i))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,n){t=q.apply([],t);var i,r,a,o,s,l,u=0,c=this.length,h=this,g=c-1,p=t[0],v=at.isFunction(p);if(v||!(1>=c||"string"!=typeof p||at.support.checkClone)&&Zt.test(p))return this.each(function(i){var r=h.eq(i);v&&(t[0]=p.call(this,i,r.html())),r.domManip(t,e,n)});if(c&&(i=at.buildFragment(t,this[0].ownerDocument,!1,!n&&this),r=i.firstChild,1===i.childNodes.length&&(i=r),r)){for(a=at.map(m(i,"script"),d),o=a.length;c>u;u++)s=i,u!==g&&(s=at.clone(s,!0,!0),o&&at.merge(a,m(s,"script"))),e.call(this[u],s,u);if(o)for(l=a[a.length-1].ownerDocument,at.map(a,f),u=0;o>u;u++)s=a[u],Lt.test(s.type||"")&&!mt.access(s,"globalEval")&&at.contains(l,s)&&(s.src?at._evalUrl(s.src):at.globalEval(s.textContent.replace(Rt,"")))}return this}}),at.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){at.fn[t]=function(t){for(var n,i=[],r=at(t),a=r.length-1,o=0;a>=o;o++)n=o===a?this:this.clone(!0),at(r[o])[e](n),$.apply(i,n.get());return this.pushStack(i)}}),at.extend({clone:function(t,e,n){var i,r,a,o,s=t.cloneNode(!0),l=at.contains(t.ownerDocument,t);if(!(at.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||at.isXMLDoc(t)))for(o=m(s),a=m(t),i=0,r=a.length;r>i;i++)v(a[i],o[i]);if(e)if(n)for(a=a||m(t),o=o||m(s),i=0,r=a.length;r>i;i++)p(a[i],o[i]);else p(t,s);return o=m(s,"script"),o.length>0&&g(o,!l&&m(t,"script")),s},buildFragment:function(t,e,n,i){for(var r,a,o,s,l,u,c=0,h=t.length,d=e.createDocumentFragment(),f=[];h>c;c++)if(r=t[c],r||0===r)if("object"===at.type(r))at.merge(f,r.nodeType?[r]:r);else if(St.test(r)){for(a=a||d.appendChild(e.createElement("div")),o=(zt.exec(r)||["",""])[1].toLowerCase(),s=Wt[o]||Wt._default,a.innerHTML=s[1]+r.replace(Bt,"<$1></$2>")+s[2],u=s[0];u--;)a=a.lastChild;at.merge(f,a.childNodes),a=d.firstChild,a.textContent=""}else f.push(e.createTextNode(r));for(d.textContent="",c=0;r=f[c++];)if((!i||-1===at.inArray(r,i))&&(l=at.contains(r.ownerDocument,r),a=m(d.appendChild(r),"script"),l&&g(a),n))for(u=0;r=a[u++];)Lt.test(r.type||"")&&n.push(r);return d},cleanData:function(t){for(var n,i,a,o,s,l,u=at.event.special,c=0;(i=t[c])!==e;c++){if(r.accepts(i)&&(s=i[mt.expando],s&&(n=mt.cache[s]))){if(a=Object.keys(n.events||{}),a.length)for(l=0;(o=a[l])!==e;l++)u[o]?at.event.remove(i,o):at.removeEvent(i,o,n.handle);mt.cache[s]&&delete mt.cache[s]}delete pt.cache[i[pt.expando]]}},_evalUrl:function(t){return at.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),at.fn.extend({wrapAll:function(t){var e;return at.isFunction(t)?this.each(function(e){at(this).wrapAll(t.call(this,e))}):(this[0]&&(e=at(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return at.isFunction(t)?this.each(function(e){at(this).wrapInner(t.call(this,e))}):this.each(function(){var e=at(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=at.isFunction(t);return this.each(function(n){at(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){at.nodeName(this,"body")||at(this).replaceWith(this.childNodes)}).end()}});var Yt,_t,Vt=/^(none|table(?!-c[ea]).+)/,Xt=/^margin/,Ut=new RegExp("^("+ot+")(.*)$","i"),Ft=new RegExp("^("+ot+")(?!px)[a-z%]+$","i"),Ht=new RegExp("^([+-])=("+ot+")","i"),Jt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},qt=["Top","Right","Bottom","Left"],$t=["Webkit","O","Moz","ms"];at.fn.extend({css:function(t,n){return at.access(this,function(t,n,i){var r,a,o={},s=0;if(at.isArray(n)){for(r=b(t),a=n.length;a>s;s++)o[n[s]]=at.css(t,n[s],!1,r);return o}return i!==e?at.style(t,n,i):at.css(t,n)},t,n,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){I(this)?at(this).show():at(this).hide()})}}),at.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Yt(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,n,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var a,o,s,l=at.camelCase(n),u=t.style;return n=at.cssProps[l]||(at.cssProps[l]=y(u,l)),s=at.cssHooks[n]||at.cssHooks[l],i===e?s&&"get"in s&&(a=s.get(t,!1,r))!==e?a:u[n]:(o=typeof i,"string"===o&&(a=Ht.exec(i))&&(i=(a[1]+1)*a[2]+parseFloat(at.css(t,n)),o="number"),null==i||"number"===o&&isNaN(i)||("number"!==o||at.cssNumber[l]||(i+="px"),at.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(u[n]="inherit"),s&&"set"in s&&(i=s.set(t,i,r))===e||(u[n]=i)),void 0)}},css:function(t,n,i,r){var a,o,s,l=at.camelCase(n);return n=at.cssProps[l]||(at.cssProps[l]=y(t.style,l)),s=at.cssHooks[n]||at.cssHooks[l],s&&"get"in s&&(a=s.get(t,!0,i)),a===e&&(a=Yt(t,n,r)),"normal"===a&&n in Kt&&(a=Kt[n]),""===i||i?(o=parseFloat(a),i===!0||at.isNumeric(o)?o||0:a):a}}),Yt=function(t,n,i){var r,a,o,s=i||b(t),l=s?s.getPropertyValue(n)||s[n]:e,u=t.style;return s&&(""!==l||at.contains(t.ownerDocument,t)||(l=at.style(t,n)),Ft.test(l)&&Xt.test(n)&&(r=u.width,a=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=s.width,u.width=r,u.minWidth=a,u.maxWidth=o)),l},at.each(["height","width"],function(t,e){at.cssHooks[e]={get:function(t,n,i){return n?0===t.offsetWidth&&Vt.test(at.css(t,"display"))?at.swap(t,Qt,function(){return x(t,e,i)}):x(t,e,i):void 0},set:function(t,n,i){var r=i&&b(t);return w(t,n,i?A(t,e,i,at.support.boxSizing&&"border-box"===at.css(t,"boxSizing",!1,r),r):0)}}}),at(function(){at.support.reliableMarginRight||(at.cssHooks.marginRight={get:function(t,e){return e?at.swap(t,{display:"inline-block"},Yt,[t,"marginRight"]):void 0}}),!at.support.pixelPosition&&at.fn.position&&at.each(["top","left"],function(t,e){at.cssHooks[e]={get:function(t,n){return n?(n=Yt(t,e),Ft.test(n)?at(t).position()[e]+"px":n):void 0}}})}),at.expr&&at.expr.filters&&(at.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},at.expr.filters.visible=function(t){return!at.expr.filters.hidden(t)}),at.each({margin:"",padding:"",border:"Width"},function(t,e){at.cssHooks[t+e]={expand:function(n){for(var i=0,r={},a="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+qt[i]+e]=a[i]||a[i-2]||a[0];return r}},Xt.test(t)||(at.cssHooks[t+e].set=w)});var te=/%20/g,ee=/\[\]$/,ne=/\r?\n/g,ie=/^(?:submit|button|image|reset|file)$/i,re=/^(?:input|select|textarea|keygen)/i;at.fn.extend({serialize:function(){return at.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=at.prop(this,"elements");return t?at.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!at(this).is(":disabled")&&re.test(this.nodeName)&&!ie.test(t)&&(this.checked||!Gt.test(t))}).map(function(t,e){var n=at(this).val();return null==n?null:at.isArray(n)?at.map(n,function(t){return{name:e.name,value:t.replace(ne,"\r\n")}}):{name:e.name,value:n.replace(ne,"\r\n")}}).get()}}),at.param=function(t,n){var i,r=[],a=function(t,e){e=at.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=at.ajaxSettings&&at.ajaxSettings.traditional),at.isArray(t)||t.jquery&&!at.isPlainObject(t))at.each(t,function(){a(this.name,this.value)});else for(i in t)k(i,t[i],n,a);return r.join("&").replace(te,"+")},at.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){at.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),at.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var ae,oe,se=at.now(),le=/\?/,ue=/#.*$/,ce=/([?&])_=[^&]*/,he=/^(.*?):[ \t]*([^\r\n]*)$/gm,de=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,fe=/^(?:GET|HEAD)$/,ge=/^\/\//,pe=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,me=at.fn.load,ve={},ye={},Ie="*/".concat("*");try{oe=V.href}catch(be){oe=X.createElement("a"),oe.href="",oe=oe.href}ae=pe.exec(oe.toLowerCase())||[],at.fn.load=function(t,n,i){if("string"!=typeof t&&me)return me.apply(this,arguments);var r,a,o,s=this,l=t.indexOf(" ");return l>=0&&(r=t.slice(l),t=t.slice(0,l)),at.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(a="POST"),s.length>0&&at.ajax({url:t,type:a,dataType:"html",data:n}).done(function(t){o=arguments,s.html(r?at("<div>").append(at.parseHTML(t)).find(r):t)}).complete(i&&function(t,e){s.each(i,o||[t.responseText,e,t])}),this},at.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){at.fn[e]=function(t){return this.on(e,t)}}),at.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:oe,type:"GET",isLocal:de.test(ae[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ie,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":at.parseJSON,"text xml":at.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?D(D(t,at.ajaxSettings),e):D(at.ajaxSettings,t)},ajaxPrefilter:T(ve),ajaxTransport:T(ye),ajax:function(t,n){function i(t,n,i,s){var u,h,y,I,C,A=n;2!==b&&(b=2,l&&clearTimeout(l),r=e,o=s||"",w.readyState=t>0?4:0,u=t>=200&&300>t||304===t,i&&(I=E(d,w,i)),I=B(d,I,w,u),u?(d.ifModified&&(C=w.getResponseHeader("Last-Modified"),C&&(at.lastModified[a]=C),C=w.getResponseHeader("etag"),C&&(at.etag[a]=C)),204===t||"HEAD"===d.type?A="nocontent":304===t?A="notmodified":(A=I.state,h=I.data,y=I.error,u=!y)):(y=A,!t&&A||(A="error",0>t&&(t=0))),w.status=t,w.statusText=(n||A)+"",u?p.resolveWith(f,[h,A,w]):p.rejectWith(f,[w,A,y]),w.statusCode(v),v=e,c&&g.trigger(u?"ajaxSuccess":"ajaxError",[w,d,u?h:y]),m.fireWith(f,[w,A]),c&&(g.trigger("ajaxComplete",[w,d]),--at.active||at.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var r,a,o,s,l,u,c,h,d=at.ajaxSetup({},n),f=d.context||d,g=d.context&&(f.nodeType||f.jquery)?at(f):at.event,p=at.Deferred(),m=at.Callbacks("once memory"),v=d.statusCode||{},y={},I={},b=0,C="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!s)for(s={};e=he.exec(o);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=I[n]=I[n]||t,y[t]=e),this},overrideMimeType:function(t){return b||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)v[e]=[v[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||C;return r&&r.abort(e),i(0,e),this}};if(p.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((t||d.url||oe)+"").replace(ue,"").replace(ge,ae[1]+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=at.trim(d.dataType||"*").toLowerCase().match(st)||[""],null==d.crossDomain&&(u=pe.exec(d.url.toLowerCase()),d.crossDomain=!(!u||u[1]===ae[1]&&u[2]===ae[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(ae[3]||("http:"===ae[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=at.param(d.data,d.traditional)),j(ve,d,n,w),2===b)return w;c=d.global,c&&0===at.active++&&at.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!fe.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=(le.test(a)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=ce.test(a)?a.replace(ce,"$1_="+se++):a+(le.test(a)?"&":"?")+"_="+se++)),d.ifModified&&(at.lastModified[a]&&w.setRequestHeader("If-Modified-Since",at.lastModified[a]),at.etag[a]&&w.setRequestHeader("If-None-Match",at.etag[a])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ie+"; q=0.01":""):d.accepts["*"]);for(h in d.headers)w.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(d.beforeSend.call(f,w,d)===!1||2===b))return w.abort();C="abort";for(h in{success:1,error:1,complete:1})w[h](d[h]);if(r=j(ye,d,n,w)){w.readyState=1,c&&g.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){w.abort("timeout")},d.timeout));try{b=1,r.send(y,i)}catch(A){if(!(2>b))throw A;i(-1,A)}}else i(-1,"No Transport");return w},getJSON:function(t,e,n){return at.get(t,e,n,"json")},getScript:function(t,n){return at.get(t,e,n,"script")}}),at.each(["get","post"],function(t,n){at[n]=function(t,i,r,a){return at.isFunction(i)&&(a=a||r,r=i,i=e),at.ajax({url:t,type:n,dataType:a,data:i,success:r})}}),at.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return at.globalEval(t),t}}}),at.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),at.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=at("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),X.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Ce=[],we=/(=)\?(?=&|$)|\?\?/;at.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ce.pop()||at.expando+"_"+se++;return this[t]=!0,t}}),at.ajaxPrefilter("json jsonp",function(n,i,r){var a,o,s,l=n.jsonp!==!1&&(we.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&we.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(a=n.jsonpCallback=at.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(we,"$1"+a):n.jsonp!==!1&&(n.url+=(le.test(n.url)?"&":"?")+n.jsonp+"="+a),n.converters["script json"]=function(){return s||at.error(a+" was not called"),s[0]},n.dataTypes[0]="json",o=t[a],t[a]=function(){s=arguments},r.always(function(){t[a]=o,n[a]&&(n.jsonpCallback=i.jsonpCallback,Ce.push(a)),s&&at.isFunction(o)&&o(s[0]),s=o=e}),"script"):void 0}),at.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ae=at.ajaxSettings.xhr(),xe={0:200,1223:204},Ne=0,Me={};t.ActiveXObject&&at(t).on("unload",function(){for(var t in Me)Me[t]();Me=e}),at.support.cors=!!Ae&&"withCredentials"in Ae,at.support.ajax=Ae=!!Ae,at.ajaxTransport(function(t){var n;return at.support.cors||Ae&&!t.crossDomain?{send:function(i,r){var a,o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(t){return function(){n&&(delete Me[o],n=s.onload=s.onerror=null,"abort"===t?s.abort():"error"===t?r(s.status||404,s.statusText):r(xe[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:e,s.getAllResponseHeaders()))}},s.onload=n(),s.onerror=n("error"),n=Me[o=Ne++]=n("abort"),s.send(t.hasContent&&t.data||null)},abort:function(){n&&n()}}:void 0});var ke,Te,je=/^(?:toggle|show|hide)$/,De=new RegExp("^(?:([+-])=|)("+ot+")([a-z%]*)$","i"),Ee=/queueHooks$/,Be=[Z],ze={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=De.exec(e),a=r&&r[3]||(at.cssNumber[t]?"":"px"),o=(at.cssNumber[t]||"px"!==a&&+i)&&De.exec(at.css(n.elem,t)),s=1,l=20;if(o&&o[3]!==a){a=a||o[3],r=r||[],o=+i||1;do s=s||".5",o/=s,at.style(n.elem,t,o+a);while(s!==(s=n.cur()/i)&&1!==s&&--l)}return r&&(o=n.start=+o||+i||0,n.unit=a,n.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),n}]};at.Animation=at.extend(P,{tweener:function(t,e){at.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],ze[n]=ze[n]||[],ze[n].unshift(e)},prefilter:function(t,e){e?Be.unshift(t):Be.push(t)}}),at.Tween=L,L.prototype={constructor:L,init:function(t,e,n,i,r,a){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=a||(at.cssNumber[n]?"":"px")},cur:function(){var t=L.propHooks[this.prop];return t&&t.get?t.get(this):L.propHooks._default.get(this)},run:function(t){var e,n=L.propHooks[this.prop];return this.options.duration?this.pos=e=at.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=at.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){at.fx.step[t.prop]?at.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[at.cssProps[t.prop]]||at.cssHooks[t.prop])?at.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},at.each(["toggle","show","hide"],function(t,e){var n=at.fn[e];at.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(O(e,!0),t,i,r)}}),at.fn.extend({fadeTo:function(t,e,n,i){return this.filter(I).css("opacity",0).show().end().animate({
opacity:e},t,n,i)},animate:function(t,e,n,i){var r=at.isEmptyObject(t),a=at.speed(e,n,i),o=function(){var e=P(this,at.extend({},t),a);(r||mt.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||a.queue===!1?this.each(o):this.queue(a.queue,o)},stop:function(t,n,i){var r=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",a=at.timers,o=mt.get(this);if(n)o[n]&&o[n].stop&&r(o[n]);else for(n in o)o[n]&&o[n].stop&&Ee.test(n)&&r(o[n]);for(n=a.length;n--;)a[n].elem!==this||null!=t&&a[n].queue!==t||(a[n].anim.stop(i),e=!1,a.splice(n,1));!e&&i||at.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=mt.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],a=at.timers,o=i?i.length:0;for(n.finish=!0,at.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;o>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),at.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){at.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),at.speed=function(t,e,n){var i=t&&"object"==typeof t?at.extend({},t):{complete:n||!n&&e||at.isFunction(t)&&t,duration:t,easing:n&&e||e&&!at.isFunction(e)&&e};return i.duration=at.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in at.fx.speeds?at.fx.speeds[i.duration]:at.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){at.isFunction(i.old)&&i.old.call(this),i.queue&&at.dequeue(this,i.queue)},i},at.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},at.timers=[],at.fx=L.prototype.init,at.fx.tick=function(){var t,n=at.timers,i=0;for(ke=at.now();i<n.length;i++)t=n[i],t()||n[i]!==t||n.splice(i--,1);n.length||at.fx.stop(),ke=e},at.fx.timer=function(t){t()&&at.timers.push(t)&&at.fx.start()},at.fx.interval=13,at.fx.start=function(){Te||(Te=setInterval(at.fx.tick,at.fx.interval))},at.fx.stop=function(){clearInterval(Te),Te=null},at.fx.speeds={slow:600,fast:200,_default:400},at.fx.step={},at.expr&&at.expr.filters&&(at.expr.filters.animated=function(t){return at.grep(at.timers,function(e){return t===e.elem}).length}),at.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){at.offset.setOffset(this,t,e)});var n,i,r=this[0],a={top:0,left:0},o=r&&r.ownerDocument;if(o)return n=o.documentElement,at.contains(n,r)?(typeof r.getBoundingClientRect!==_&&(a=r.getBoundingClientRect()),i=R(o),{top:a.top+i.pageYOffset-n.clientTop,left:a.left+i.pageXOffset-n.clientLeft}):a},at.offset={setOffset:function(t,e,n){var i,r,a,o,s,l,u,c=at.css(t,"position"),h=at(t),d={};"static"===c&&(t.style.position="relative"),s=h.offset(),a=at.css(t,"top"),l=at.css(t,"left"),u=("absolute"===c||"fixed"===c)&&(a+l).indexOf("auto")>-1,u?(i=h.position(),o=i.top,r=i.left):(o=parseFloat(a)||0,r=parseFloat(l)||0),at.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(d.top=e.top-s.top+o),null!=e.left&&(d.left=e.left-s.left+r),"using"in e?e.using.call(t,d):h.css(d)}},at.fn.extend({position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===at.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),at.nodeName(t[0],"html")||(i=t.offset()),i.top+=at.css(t[0],"borderTopWidth",!0),i.left+=at.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-at.css(n,"marginTop",!0),left:e.left-i.left-at.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||U;t&&!at.nodeName(t,"html")&&"static"===at.css(t,"position");)t=t.offsetParent;return t||U})}}),at.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,i){var r="pageYOffset"===i;at.fn[n]=function(a){return at.access(this,function(n,a,o){var s=R(n);return o===e?s?s[i]:n[a]:void(s?s.scrollTo(r?t.pageXOffset:o,r?o:t.pageYOffset):n[a]=o)},n,a,arguments.length,null)}}),at.each({Height:"height",Width:"width"},function(t,n){at.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,r){at.fn[r]=function(r,a){var o=arguments.length&&(i||"boolean"!=typeof r),s=i||(r===!0||a===!0?"margin":"border");return at.access(this,function(n,i,r){var a;return at.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(a=n.documentElement,Math.max(n.body["scroll"+t],a["scroll"+t],n.body["offset"+t],a["offset"+t],a["client"+t])):r===e?at.css(n,i,s):at.style(n,i,r,s)},n,o?r:e,o,null)}})}),at.fn.size=function(){return this.length},at.fn.andSelf=at.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=at:"function"==typeof define&&define.amd&&define("jquery",[],function(){return at}),"object"==typeof t&&"object"==typeof t.document&&(t.jQuery=t.$=at)}(window),function(){function t(t){function e(e,n,i,r,a,o){for(;a>=0&&o>a;a+=t){var s=r?r[a]:a;i=n(i,e[s],s,e)}return i}return function(n,i,r,a){i=I(i,a,4);var o=!M(n)&&y.keys(n),s=(o||n).length,l=t>0?0:s-1;return arguments.length<3&&(r=n[o?o[l]:l],l+=t),e(n,i,r,o,l,s)}}function e(t){return function(e,n,i){n=b(n,i);for(var r=N(e),a=t>0?0:r-1;a>=0&&r>a;a+=t)if(n(e[a],a,e))return a;return-1}}function n(t,e,n){return function(i,r,a){var o=0,s=N(i);if("number"==typeof a)t>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(n&&a&&s)return a=n(i,r),i[a]===r?a:-1;if(r!==r)return a=e(c.call(i,o,s),y.isNaN),a>=0?a+o:-1;for(a=t>0?o:s-1;a>=0&&s>a;a+=t)if(i[a]===r)return a;return-1}}function i(t,e){var n=E.length,i=t.constructor,r=y.isFunction(i)&&i.prototype||s,a="constructor";for(y.has(t,a)&&!y.contains(e,a)&&e.push(a);n--;)a=E[n],a in t&&t[a]!==r[a]&&!y.contains(e,a)&&e.push(a)}var r=this,a=r._,o=Array.prototype,s=Object.prototype,l=Function.prototype,u=o.push,c=o.slice,h=s.toString,d=s.hasOwnProperty,f=Array.isArray,g=Object.keys,p=l.bind,m=Object.create,v=function(){},y=function(t){return t instanceof y?t:this instanceof y?void(this._wrapped=t):new y(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):r._=y,y.VERSION="1.8.3";var I=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,a){return t.call(e,n,i,r,a)}}return function(){return t.apply(e,arguments)}},b=function(t,e,n){return null==t?y.identity:y.isFunction(t)?I(t,e,n):y.isObject(t)?y.matcher(t):y.property(t)};y.iteratee=function(t,e){return b(t,e,1/0)};var C=function(t,e){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var r=1;i>r;r++)for(var a=arguments[r],o=t(a),s=o.length,l=0;s>l;l++){var u=o[l];e&&void 0!==n[u]||(n[u]=a[u])}return n}},w=function(t){if(!y.isObject(t))return{};if(m)return m(t);v.prototype=t;var e=new v;return v.prototype=null,e},A=function(t){return function(e){return null==e?void 0:e[t]}},x=Math.pow(2,53)-1,N=A("length"),M=function(t){var e=N(t);return"number"==typeof e&&e>=0&&x>=e};y.each=y.forEach=function(t,e,n){e=I(e,n);var i,r;if(M(t))for(i=0,r=t.length;r>i;i++)e(t[i],i,t);else{var a=y.keys(t);for(i=0,r=a.length;r>i;i++)e(t[a[i]],a[i],t)}return t},y.map=y.collect=function(t,e,n){e=b(e,n);for(var i=!M(t)&&y.keys(t),r=(i||t).length,a=Array(r),o=0;r>o;o++){var s=i?i[o]:o;a[o]=e(t[s],s,t)}return a},y.reduce=y.foldl=y.inject=t(1),y.reduceRight=y.foldr=t(-1),y.find=y.detect=function(t,e,n){var i;return i=M(t)?y.findIndex(t,e,n):y.findKey(t,e,n),void 0!==i&&-1!==i?t[i]:void 0},y.filter=y.select=function(t,e,n){var i=[];return e=b(e,n),y.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i},y.reject=function(t,e,n){return y.filter(t,y.negate(b(e)),n)},y.every=y.all=function(t,e,n){e=b(e,n);for(var i=!M(t)&&y.keys(t),r=(i||t).length,a=0;r>a;a++){var o=i?i[a]:a;if(!e(t[o],o,t))return!1}return!0},y.some=y.any=function(t,e,n){e=b(e,n);for(var i=!M(t)&&y.keys(t),r=(i||t).length,a=0;r>a;a++){var o=i?i[a]:a;if(e(t[o],o,t))return!0}return!1},y.contains=y.includes=y.include=function(t,e,n,i){return M(t)||(t=y.values(t)),("number"!=typeof n||i)&&(n=0),y.indexOf(t,e,n)>=0},y.invoke=function(t,e){var n=c.call(arguments,2),i=y.isFunction(e);return y.map(t,function(t){var r=i?e:t[e];return null==r?r:r.apply(t,n)})},y.pluck=function(t,e){return y.map(t,y.property(e))},y.where=function(t,e){return y.filter(t,y.matcher(e))},y.findWhere=function(t,e){return y.find(t,y.matcher(e))},y.max=function(t,e,n){var i,r,a=-(1/0),o=-(1/0);if(null==e&&null!=t){t=M(t)?t:y.values(t);for(var s=0,l=t.length;l>s;s++)i=t[s],i>a&&(a=i)}else e=b(e,n),y.each(t,function(t,n,i){r=e(t,n,i),(r>o||r===-(1/0)&&a===-(1/0))&&(a=t,o=r)});return a},y.min=function(t,e,n){var i,r,a=1/0,o=1/0;if(null==e&&null!=t){t=M(t)?t:y.values(t);for(var s=0,l=t.length;l>s;s++)i=t[s],a>i&&(a=i)}else e=b(e,n),y.each(t,function(t,n,i){r=e(t,n,i),(o>r||r===1/0&&a===1/0)&&(a=t,o=r)});return a},y.shuffle=function(t){for(var e,n=M(t)?t:y.values(t),i=n.length,r=Array(i),a=0;i>a;a++)e=y.random(0,a),e!==a&&(r[a]=r[e]),r[e]=n[a];return r},y.sample=function(t,e,n){return null==e||n?(M(t)||(t=y.values(t)),t[y.random(t.length-1)]):y.shuffle(t).slice(0,Math.max(0,e))},y.sortBy=function(t,e,n){return e=b(e,n),y.pluck(y.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var k=function(t){return function(e,n,i){var r={};return n=b(n,i),y.each(e,function(i,a){var o=n(i,a,e);t(r,i,o)}),r}};y.groupBy=k(function(t,e,n){y.has(t,n)?t[n].push(e):t[n]=[e]}),y.indexBy=k(function(t,e,n){t[n]=e}),y.countBy=k(function(t,e,n){y.has(t,n)?t[n]++:t[n]=1}),y.toArray=function(t){return t?y.isArray(t)?c.call(t):M(t)?y.map(t,y.identity):y.values(t):[]},y.size=function(t){return null==t?0:M(t)?t.length:y.keys(t).length},y.partition=function(t,e,n){e=b(e,n);var i=[],r=[];return y.each(t,function(t,n,a){(e(t,n,a)?i:r).push(t)}),[i,r]},y.first=y.head=y.take=function(t,e,n){return null!=t?null==e||n?t[0]:y.initial(t,t.length-e):void 0},y.initial=function(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},y.last=function(t,e,n){return null!=t?null==e||n?t[t.length-1]:y.rest(t,Math.max(0,t.length-e)):void 0},y.rest=y.tail=y.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},y.compact=function(t){return y.filter(t,y.identity)};var T=function(t,e,n,i){for(var r=[],a=0,o=i||0,s=N(t);s>o;o++){var l=t[o];if(M(l)&&(y.isArray(l)||y.isArguments(l))){e||(l=T(l,e,n));var u=0,c=l.length;for(r.length+=c;c>u;)r[a++]=l[u++]}else n||(r[a++]=l)}return r};y.flatten=function(t,e){return T(t,e,!1)},y.without=function(t){return y.difference(t,c.call(arguments,1))},y.uniq=y.unique=function(t,e,n,i){y.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=b(n,i));for(var r=[],a=[],o=0,s=N(t);s>o;o++){var l=t[o],u=n?n(l,o,t):l;e?(o&&a===u||r.push(l),a=u):n?y.contains(a,u)||(a.push(u),r.push(l)):y.contains(r,l)||r.push(l)}return r},y.union=function(){return y.uniq(T(arguments,!0,!0))},y.intersection=function(t){for(var e=[],n=arguments.length,i=0,r=N(t);r>i;i++){var a=t[i];if(!y.contains(e,a)){for(var o=1;n>o&&y.contains(arguments[o],a);o++);o===n&&e.push(a)}}return e},y.difference=function(t){var e=T(arguments,!0,!0,1);return y.filter(t,function(t){return!y.contains(e,t)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(t){for(var e=t&&y.max(t,N).length||0,n=Array(e),i=0;e>i;i++)n[i]=y.pluck(t,i);return n},y.object=function(t,e){for(var n={},i=0,r=N(t);r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},y.findIndex=e(1),y.findLastIndex=e(-1),y.sortedIndex=function(t,e,n,i){n=b(n,i,1);for(var r=n(e),a=0,o=N(t);o>a;){var s=Math.floor((a+o)/2);n(t[s])<r?a=s+1:o=s}return a},y.indexOf=n(1,y.findIndex,y.sortedIndex),y.lastIndexOf=n(-1,y.findLastIndex),y.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),a=0;i>a;a++,t+=n)r[a]=t;return r};var j=function(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var a=w(t.prototype),o=t.apply(a,r);return y.isObject(o)?o:a};y.bind=function(t,e){if(p&&t.bind===p)return p.apply(t,c.call(arguments,1));if(!y.isFunction(t))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2),i=function(){return j(t,i,e,this,n.concat(c.call(arguments)))};return i},y.partial=function(t){var e=c.call(arguments,1),n=function(){for(var i=0,r=e.length,a=Array(r),o=0;r>o;o++)a[o]=e[o]===y?arguments[i++]:e[o];for(;i<arguments.length;)a.push(arguments[i++]);return j(t,n,this,this,a)};return n},y.bindAll=function(t){var e,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(e=1;i>e;e++)n=arguments[e],t[n]=y.bind(t[n],t);return t},y.memoize=function(t,e){var n=function(i){var r=n.cache,a=""+(e?e.apply(this,arguments):i);return y.has(r,a)||(r[a]=t.apply(this,arguments)),r[a]};return n.cache={},n},y.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},y.defer=y.partial(y.delay,y,1),y.throttle=function(t,e,n){var i,r,a,o=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:y.now(),o=null,a=t.apply(i,r),o||(i=r=null)};return function(){var u=y.now();s||n.leading!==!1||(s=u);var c=e-(u-s);return i=this,r=arguments,0>=c||c>e?(o&&(clearTimeout(o),o=null),s=u,a=t.apply(i,r),o||(i=r=null)):o||n.trailing===!1||(o=setTimeout(l,c)),a}},y.debounce=function(t,e,n){var i,r,a,o,s,l=function(){var u=y.now()-o;e>u&&u>=0?i=setTimeout(l,e-u):(i=null,n||(s=t.apply(a,r),i||(a=r=null)))};return function(){a=this,r=arguments,o=y.now();var u=n&&!i;return i||(i=setTimeout(l,e)),u&&(s=t.apply(a,r),a=r=null),s}},y.wrap=function(t,e){return y.partial(e,t)},y.negate=function(t){return function(){return!t.apply(this,arguments)}},y.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},y.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},y.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},y.once=y.partial(y.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),E=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(t){if(!y.isObject(t))return[];if(g)return g(t);var e=[];for(var n in t)y.has(t,n)&&e.push(n);return D&&i(t,e),e},y.allKeys=function(t){if(!y.isObject(t))return[];var e=[];for(var n in t)e.push(n);return D&&i(t,e),e},y.values=function(t){for(var e=y.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},y.mapObject=function(t,e,n){e=b(e,n);for(var i,r=y.keys(t),a=r.length,o={},s=0;a>s;s++)i=r[s],o[i]=e(t[i],i,t);return o},y.pairs=function(t){for(var e=y.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},y.invert=function(t){for(var e={},n=y.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},y.functions=y.methods=function(t){var e=[];for(var n in t)y.isFunction(t[n])&&e.push(n);return e.sort()},y.extend=C(y.allKeys),y.extendOwn=y.assign=C(y.keys),y.findKey=function(t,e,n){e=b(e,n);for(var i,r=y.keys(t),a=0,o=r.length;o>a;a++)if(i=r[a],e(t[i],i,t))return i},y.pick=function(t,e,n){var i,r,a={},o=t;if(null==o)return a;y.isFunction(e)?(r=y.allKeys(o),i=I(e,n)):(r=T(arguments,!1,!1,1),i=function(t,e,n){return e in n},o=Object(o));for(var s=0,l=r.length;l>s;s++){var u=r[s],c=o[u];i(c,u,o)&&(a[u]=c)}return a},y.omit=function(t,e,n){if(y.isFunction(e))e=y.negate(e);else{var i=y.map(T(arguments,!1,!1,1),String);e=function(t,e){return!y.contains(i,e)}}return y.pick(t,e,n)},y.defaults=C(y.allKeys,!0),y.create=function(t,e){var n=w(t);return e&&y.extendOwn(n,e),n},y.clone=function(t){return y.isObject(t)?y.isArray(t)?t.slice():y.extend({},t):t},y.tap=function(t,e){return e(t),t},y.isMatch=function(t,e){var n=y.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),a=0;i>a;a++){var o=n[a];if(e[o]!==r[o]||!(o in r))return!1}return!0};var B=function(t,e,n,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof y&&(t=t._wrapped),e instanceof y&&(e=e._wrapped);var r=h.call(t);if(r!==h.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var a="[object Array]"===r;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,s=e.constructor;if(o!==s&&!(y.isFunction(o)&&o instanceof o&&y.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===t)return i[l]===e;if(n.push(t),i.push(e),a){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!B(t[l],e[l],n,i))return!1}else{var u,c=y.keys(t);if(l=c.length,y.keys(e).length!==l)return!1;for(;l--;)if(u=c[l],!y.has(e,u)||!B(t[u],e[u],n,i))return!1}return n.pop(),i.pop(),!0};y.isEqual=function(t,e){return B(t,e)},y.isEmpty=function(t){return null==t?!0:M(t)&&(y.isArray(t)||y.isString(t)||y.isArguments(t))?0===t.length:0===y.keys(t).length},y.isElement=function(t){return!(!t||1!==t.nodeType)},y.isArray=f||function(t){return"[object Array]"===h.call(t)},y.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){y["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),y.isArguments(arguments)||(y.isArguments=function(t){return y.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(t){return"function"==typeof t||!1}),y.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},y.isNaN=function(t){return y.isNumber(t)&&t!==+t},y.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===h.call(t)},y.isNull=function(t){return null===t},y.isUndefined=function(t){return void 0===t},y.has=function(t,e){return null!=t&&d.call(t,e)},y.noConflict=function(){return r._=a,this},y.identity=function(t){return t},y.constant=function(t){return function(){return t}},y.noop=function(){},y.property=A,y.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},y.matcher=y.matches=function(t){return t=y.extendOwn({},t),function(e){return y.isMatch(e,t)}},y.times=function(t,e,n){var i=Array(Math.max(0,t));e=I(e,n,1);for(var r=0;t>r;r++)i[r]=e(r);return i},y.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},y.now=Date.now||function(){return(new Date).getTime()};var z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},S=y.invert(z),P=function(t){var e=function(e){return t[e]},n="(?:"+y.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};y.escape=P(z),y.unescape=P(S),y.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),y.isFunction(i)?i.call(t):i};var G=0;y.uniqueId=function(t){var e=++G+"";return t?t+e:e},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Z=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\u2028|\u2029/g,R=function(t){return"\\"+L[t]};y.template=function(t,e,n){!e&&n&&(e=n),e=y.defaults({},e,y.templateSettings);var i=RegExp([(e.escape||Z).source,(e.interpolate||Z).source,(e.evaluate||Z).source].join("|")+"|$","g"),r=0,a="__p+='";t.replace(i,function(e,n,i,o,s){return a+=t.slice(r,s).replace(O,R),r=s+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(e.variable||"obj","_",a)}catch(s){throw s.source=a,s}var l=function(t){return o.call(this,t,y)},u=e.variable||"obj";return l.source="function("+u+"){\n"+a+"}",l},y.chain=function(t){var e=y(t);return e._chain=!0,e};var W=function(t,e){return t._chain?y(e).chain():e};y.mixin=function(t){y.each(y.functions(t),function(e){var n=y[e]=t[e];y.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),W(this,n.apply(y,t))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];y.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],W(this,n)}}),y.each(["concat","join","slice"],function(t){var e=o[t];y.prototype[t]=function(){return W(this,e.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this),function(t){var e="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,i,r){e.Backbone=t(e,r,n,i)});else if("undefined"!=typeof exports){var n,i=require("underscore");try{n=require("jquery")}catch(r){}t(e,exports,i,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,n,i){var r=t.Backbone,a=[].slice;e.VERSION="1.2.1",e.$=i,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=function(t,e,i){switch(t){case 1:return function(){return n[e](this[i])};case 2:return function(t){return n[e](this[i],t)};case 3:return function(t,r){return n[e](this[i],t,r)};case 4:return function(t,r,a){return n[e](this[i],t,r,a)};default:return function(){var t=a.call(arguments);return t.unshift(this[i]),n[e].apply(n,t)}}},s=function(t,e,i){n.each(e,function(e,r){n[r]&&(t.prototype[r]=o(e,r,i))})},l=e.Events={},u=/\s+/,c=function(t,e,i,r,a){var o,s=0;if(i&&"object"==typeof i){void 0!==r&&"context"in a&&void 0===a.context&&(a.context=r);for(o=n.keys(i);s<o.length;s++)e=t(e,o[s],i[o[s]],a)}else if(i&&u.test(i))for(o=i.split(u);s<o.length;s++)e=t(e,o[s],r,a);else e=t(e,i,r,a);return e};l.on=function(t,e,n){return h(this,t,e,n)};var h=function(t,e,n,i,r){if(t._events=c(d,t._events||{},e,n,{context:i,ctx:t,listening:r}),r){var a=t._listeners||(t._listeners={});a[r.id]=r}return t};l.listenTo=function(t,e,i){if(!t)return this;var r=t._listenId||(t._listenId=n.uniqueId("l")),a=this._listeningTo||(this._listeningTo={}),o=a[r];if(!o){var s=this._listenId||(this._listenId=n.uniqueId("l"));o=a[r]={obj:t,objId:r,id:s,listeningTo:a,count:0}}return h(t,e,i,this,o),this};var d=function(t,e,n,i){if(n){var r=t[e]||(t[e]=[]),a=i.context,o=i.ctx,s=i.listening;s&&s.count++,r.push({callback:n,context:a,ctx:a||o,listening:s})}return t};l.off=function(t,e,n){return this._events?(this._events=c(f,this._events,t,e,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(t,e,i){var r=this._listeningTo;if(!r)return this;for(var a=t?[t._listenId]:n.keys(r),o=0;o<a.length;o++){var s=r[a[o]];if(!s)break;s.obj.off(e,i,this)}return n.isEmpty(r)&&(this._listeningTo=void 0),this};var f=function(t,e,i,r){if(t){var a,o=0,s=r.context,l=r.listeners;if(e||i||s){for(var u=e?[e]:n.keys(t);o<u.length;o++){e=u[o];var c=t[e];if(!c)break;for(var h=[],d=0;d<c.length;d++){var f=c[d];i&&i!==f.callback&&i!==f.callback._callback||s&&s!==f.context?h.push(f):(a=f.listening,a&&0===--a.count&&(delete l[a.id],delete a.listeningTo[a.objId]))}h.length?t[e]=h:delete t[e]}return n.size(t)?t:void 0}for(var g=n.keys(l);o<g.length;o++)a=l[g[o]],delete l[a.id],delete a.listeningTo[a.objId]}};l.once=function(t,e,i){var r=c(g,{},t,e,n.bind(this.off,this));return this.on(r,void 0,i)},l.listenToOnce=function(t,e,i){var r=c(g,{},e,i,n.bind(this.stopListening,this,t));return this.listenTo(t,r)};var g=function(t,e,i,r){if(i){var a=t[e]=n.once(function(){r(e,a),i.apply(this,arguments)});a._callback=i}return t};l.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;e>i;i++)n[i]=arguments[i+1];return c(p,this._events,t,void 0,n),this};var p=function(t,e,n,i){if(t){var r=t[e],a=t.all;r&&a&&(a=a.slice()),r&&m(r,i),a&&m(a,[e].concat(i))}return t},m=function(t,e){var n,i=-1,r=t.length,a=e[0],o=e[1],s=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,a);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,a,o);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,a,o,s);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}};l.bind=l.on,l.unbind=l.off,n.extend(e,l);var v=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(v.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var r;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;var a=i.unset,o=i.silent,s=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var u=this.attributes,c=this.changed,h=this._previousAttributes;this.idAttribute in r&&(this.id=r[this.idAttribute]);for(var d in r)e=r[d],n.isEqual(u[d],e)||s.push(d),n.isEqual(h[d],e)?delete c[d]:c[d]=e,a?delete u[d]:u[d]=e;if(!o){s.length&&(this._pending=i);for(var f=0;f<s.length;f++)this.trigger("change:"+s[f],this,u[s[f]],i)}if(l)return this;if(!o)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e=this._changing?this._previousAttributes:this.attributes,i={};for(var r in t){var a=t[r];n.isEqual(e[r],a)||(i[r]=a)}return n.size(i)?i:!1},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,i=t.success;return t.success=function(n){var r=t.parse?e.parse(n,t):n;return e.set(r,t)?(i&&i.call(t.context,e,n,t),void e.trigger("sync",e,n,t)):!1},O(this,t),this.sync("read",this,t)},save:function(t,e,i){var r;null==t||"object"==typeof t?(r=t,i=e):(r={})[t]=e,i=n.extend({validate:!0,parse:!0},i);var a=i.wait;if(r&&!a){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var o=this,s=i.success,l=this.attributes;i.success=function(t){o.attributes=l;var e=i.parse?o.parse(t,i):t;return a&&(e=n.extend({},r,e)),e&&!o.set(e,i)?!1:(s&&s.call(i.context,o,t,i),void o.trigger("sync",o,t,i))},O(this,i),r&&a&&(this.attributes=n.extend({},l,r));var u=this.isNew()?"create":i.patch?"patch":"update";"patch"!==u||i.attrs||(i.attrs=r);var c=this.sync(u,this,i);return this.attributes=l,c},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,r=t.wait,a=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){r&&a(),i&&i.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var o=!1;return this.isNew()?n.defer(t.success):(O(this,t),o=this.sync("delete",this,t)),r||a(),o},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.defaults({validate:!0},t))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1):!0}});var y={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};s(v,y,"attributes");var I=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},b={add:!0,remove:!0,merge:!0},C={add:!0,remove:!1};n.extend(I.prototype,l,{model:v,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,C))},remove:function(t,e){e=n.extend({},e);var i=!n.isArray(t);t=i?[t]:n.clone(t);var r=this._removeModels(t,e);return!e.silent&&r&&this.trigger("update",this,e),i?r[0]:r},set:function(t,e){e=n.defaults({},e,b),e.parse&&!this._isModel(t)&&(t=this.parse(t,e));var i=!n.isArray(t);t=i?t?[t]:[]:t.slice();var r,a,o,s,l,u=e.at;null!=u&&(u=+u),0>u&&(u+=this.length+1);for(var c=this.comparator&&null==u&&e.sort!==!1,h=n.isString(this.comparator)?this.comparator:null,d=[],f=[],g={},p=e.add,m=e.merge,v=e.remove,y=!c&&p&&v?[]:!1,I=!1,C=0;C<t.length;C++){if(o=t[C],s=this.get(o))v&&(g[s.cid]=!0),m&&o!==s&&(o=this._isModel(o)?o.attributes:o,e.parse&&(o=s.parse(o,e)),s.set(o,e),c&&!l&&s.hasChanged(h)&&(l=!0)),t[C]=s;else if(p){if(a=t[C]=this._prepareModel(o,e),!a)continue;d.push(a),this._addReference(a,e)}a=s||a,a&&(r=this.modelId(a.attributes),!y||!a.isNew()&&g[r]||(y.push(a),I=I||!this.models[C]||a.cid!==this.models[C].cid),g[r]=!0)}if(v){for(var C=0;C<this.length;C++)g[(a=this.models[C]).cid]||f.push(a);f.length&&this._removeModels(f,e)}if(d.length||I)if(c&&(l=!0),this.length+=d.length,null!=u)for(var C=0;C<d.length;C++)this.models.splice(u+C,0,d[C]);else{y&&(this.models.length=0);for(var w=y||d,C=0;C<w.length;C++)this.models.push(w[C])}if(l&&this.sort({silent:!0}),!e.silent){for(var A=null!=u?n.clone(e):e,C=0;C<d.length;C++)null!=u&&(A.index=u+C),(a=d[C]).trigger("add",a,this,A);(l||I)&&this.trigger("sort",this,e),(d.length||f.length)&&this.trigger("update",this,e)}return i?t[0]:t},reset:function(t,e){e=e?n.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null!=t){var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]}},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){var i=n.matches(t);return this[e?"find":"filter"](function(t){return i(t.attributes)})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");
return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=n.extend({parse:!0},t);var e=t.success,i=this;return t.success=function(n){var r=t.reset?"reset":"set";i[r](n,t),e&&e.call(t.context,i,n,t),i.trigger("sync",i,n,t)},O(this,t),this.sync("read",this,t)},create:function(t,e){e=e?n.clone(e):{};var i=e.wait;if(t=this._prepareModel(t,e),!t)return!1;i||this.add(t,e);var r=this,a=e.success;return e.success=function(t,e,n){i&&r.add(t,n),a&&a.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=this.get(t[i]);if(r){var a=this.indexOf(r);this.models.splice(a,1),this.length--,e.silent||(e.index=a,r.trigger("remove",r,this,e)),n.push(r),this._removeReference(r,e)}}return n.length?n:!1},_isModel:function(t){return t instanceof v},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if("add"!==t&&"remove"!==t||n===this){if("destroy"===t&&this.remove(e,i),"change"===t){var r=this.modelId(e.previousAttributes()),a=this.modelId(e.attributes);r!==a&&(null!=r&&delete this._byId[r],null!=a&&(this._byId[a]=e))}this.trigger.apply(this,arguments)}}});var w={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};s(I,w,"models");var A=["groupBy","countBy","sortBy","indexBy"];n.each(A,function(t){n[t]&&(I.prototype[t]=function(e,i){var r=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,r,i)})});var x=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,M)),this._ensureElement(),this.initialize.apply(this,arguments)},N=/^(\S+)\s*(.*)$/,M=["model","collection","el","id","attributes","className","tagName","events"];n.extend(x.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[i]),i){var r=e.match(N);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,i,r){var a=k[t];n.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:a,dataType:"json"};if(r.url||(o.url=n.result(i,"url")||L()),null!=r.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){o.type="POST",r.emulateJSON&&(o.data._method=a);var s=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",a),s?s.apply(this,arguments):void 0}}"GET"===o.type||r.emulateJSON||(o.processData=!1);var l=r.error;r.error=function(t,e,n){r.textStatus=e,r.errorThrown=n,l&&l.call(r.context,t,e,n)};var u=r.xhr=e.ajax(n.extend(o,r));return i.trigger("request",i,u,r),u};var k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var T=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},j=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,E=/\*\w+/g,B=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(T.prototype,l,{initialize:function(){},route:function(t,i,r){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var a=this;return e.history.route(t,function(n){var o=a._extractParameters(t,n);a.execute(r,o,i)!==!1&&(a.trigger.apply(a,["route:"+i].concat(o)),a.trigger("route",i,o),e.history.trigger("route",a,i,o))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(B,"\\$&").replace(j,"(?:$1)?").replace(D,function(t,e){return e?t:"([^/?]+)"}).replace(E,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var z=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},S=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,G=/#.*$/;z.started=!1,n.extend(z.prototype,l,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(S,"")},start:function(t){if(z.started)throw new Error("Backbone.history has already been started");if(z.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(P,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var a=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};return this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?a("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),z.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return this.matchRoot()?(t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})):!1},navigate:function(t,e){if(!z.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+t;if(t=this.decodeFragment(t.replace(G,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;e.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new z;var Z=function(t,e){var i,r=this;i=t&&n.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,e);var a=function(){this.constructor=i};return a.prototype=r.prototype,i.prototype=new a,t&&n.extend(i.prototype,t),i.__super__=r.prototype,i};v.extend=I.extend=T.extend=x.extend=z.extend=Z;var L=function(){throw new Error('A "url" property or function must be specified')},O=function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}};return e}),function(){function t(t,e){if(t!==e){var n=null===t,i=t===w,r=t===t,a=null===e,o=e===w,s=e===e;if(t>e&&!a||!r||n&&!o&&s||i&&s)return 1;if(e>t&&!n||!s||a&&!i&&r||o&&r)return-1}return 0}function e(t,e,n){for(var i=t.length,r=n?i:-1;n?r--:++r<i;)if(e(t[r],r,t))return r;return-1}function n(t,e,n){if(e!==e)return f(t,n);for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function i(t){return"function"==typeof t||!1}function r(t){return null==t?"":t+""}function a(t,e){for(var n=-1,i=t.length;++n<i&&e.indexOf(t.charAt(n))>-1;);return n}function o(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function s(e,n){return t(e.criteria,n.criteria)||e.index-n.index}function l(e,n,i){for(var r=-1,a=e.criteria,o=n.criteria,s=a.length,l=i.length;++r<s;){var u=t(a[r],o[r]);if(u){if(r>=l)return u;var c=i[r];return u*("asc"===c||c===!0?1:-1)}}return e.index-n.index}function u(t){return Wt[t]}function c(t){return Yt[t]}function h(t,e,n){return e?t=Xt[t]:n&&(t=Ut[t]),"\\"+t}function d(t){return"\\"+Ut[t]}function f(t,e,n){for(var i=t.length,r=e+(n?0:-1);n?r--:++r<i;){var a=t[r];if(a!==a)return r}return-1}function g(t){return!!t&&"object"==typeof t}function p(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function m(t,e){for(var n=-1,i=t.length,r=-1,a=[];++n<i;)t[n]===e&&(t[n]=W,a[++r]=n);return a}function v(t,e){for(var n,i=-1,r=t.length,a=-1,o=[];++i<r;){var s=t[i],l=e?e(s,i,t):s;i&&n===l||(n=l,o[++a]=s)}return o}function y(t){for(var e=-1,n=t.length;++e<n&&p(t.charCodeAt(e)););return e}function I(t){for(var e=t.length;e--&&p(t.charCodeAt(e)););return e}function b(t){return _t[t]}function C(p){function H(t){if(g(t)&&!js(t)&&!(t instanceof Wt)){if(t instanceof tt)return t;if(to.call(t,"__chain__")&&to.call(t,"__wrapped__"))return fi(t)}return new tt(t)}function q(){}function tt(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function Wt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=To,this.__views__=[]}function Yt(){var t=new Wt(this.__wrapped__);return t.__actions__=ne(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ne(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ne(this.__views__),t}function _t(){if(this.__filtered__){var t=new Wt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Vt(){var t=this.__wrapped__.value(),e=this.__dir__,n=js(t),i=0>e,r=n?t.length:0,a=Un(0,r,this.__views__),o=a.start,s=a.end,l=s-o,u=i?s:o-1,c=this.__iteratees__,h=c.length,d=0,f=Ao(l,this.__takeCount__);if(!n||Z>r||r==l&&f==l)return nn(t,this.__actions__);var g=[];t:for(;l--&&f>d;){u+=e;for(var p=-1,m=t[u];++p<h;){var v=c[p],y=v.iteratee,I=v.type,b=y(m);if(I==O)m=b;else if(!b){if(I==L)continue t;break t}}g[d++]=m}return g}function Xt(){this.__data__={}}function Ut(t){return this.has(t)&&delete this.__data__[t]}function Ft(t){return"__proto__"==t?w:this.__data__[t]}function Ht(t){return"__proto__"!=t&&to.call(this.__data__,t)}function Jt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Qt(t){var e=t?t.length:0;for(this.data={hash:vo(null),set:new co};e--;)this.push(t[e])}function Kt(t,e){var n=t.data,i="string"==typeof e||Sr(e)?n.set.has(e):n.hash[e];return i?0:-1}function qt(t){var e=this.data;"string"==typeof t||Sr(t)?e.set.add(t):e.hash[t]=!0}function ee(t,e){for(var n=-1,i=t.length,r=-1,a=e.length,o=Ra(i+a);++n<i;)o[n]=t[n];for(;++r<a;)o[n++]=e[r];return o}function ne(t,e){var n=-1,i=t.length;for(e||(e=Ra(i));++n<i;)e[n]=t[n];return e}function ie(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function re(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function ae(t,e){for(var n=-1,i=t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function oe(t,e,n,i){for(var r=-1,a=t.length,o=i,s=o;++r<a;){var l=t[r],u=+e(l);n(u,o)&&(o=u,s=l)}return s}function se(t,e){for(var n=-1,i=t.length,r=-1,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[++r]=o)}return a}function le(t,e){for(var n=-1,i=t.length,r=Ra(i);++n<i;)r[n]=e(t[n],n,t);return r}function ue(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function ce(t,e,n,i){var r=-1,a=t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function he(t,e,n,i){var r=t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function de(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function fe(t,e){for(var n=t.length,i=0;n--;)i+=+e(t[n])||0;return i}function ge(t,e){return t===w?e:t}function pe(t,e,n,i){return t!==w&&to.call(i,n)?t:e}function me(t,e,n){for(var i=-1,r=Rs(e),a=r.length;++i<a;){var o=r[i],s=t[o],l=n(s,e[o],o,t,e);(l===l?l===s:s!==s)&&(s!==w||o in t)||(t[o]=l)}return t}function ve(t,e){return null==e?t:Ie(e,Rs(e),t)}function ye(t,e){for(var n=-1,i=null==t,r=!i&&Kn(t),a=r?t.length:0,o=e.length,s=Ra(o);++n<o;){var l=e[n];r?s[n]=qn(l,a)?t[l]:w:s[n]=i?w:t[l]}return s}function Ie(t,e,n){n||(n={});for(var i=-1,r=e.length;++i<r;){var a=e[i];n[a]=t[a]}return n}function be(t,e,n){var i=typeof t;return"function"==i?e===w?t:on(t,e,n):null==t?ka:"object"==i?Oe(t):e===w?za(t):Re(t,e)}function Ce(t,e,n,i,r,a,o){var s;if(n&&(s=r?n(t,i,r):n(t)),s!==w)return s;if(!Sr(t))return t;var l=js(t);if(l){if(s=Fn(t),!e)return ne(t,s)}else{var u=no.call(t),c=u==F;if(u!=Q&&u!=Y&&(!c||r))return Rt[u]?Jn(t,u,e):r?t:{};if(s=Hn(c?{}:t),!e)return ve(s,t)}a||(a=[]),o||(o=[]);for(var h=a.length;h--;)if(a[h]==t)return o[h];return a.push(t),o.push(s),(l?ie:Ee)(t,function(i,r){s[r]=Ce(i,e,n,r,t,a,o)}),s}function we(t,e,n){if("function"!=typeof t)throw new Ja(R);return ho(function(){t.apply(w,n)},e)}function Ae(t,e){var i=t?t.length:0,r=[];if(!i)return r;var a=-1,o=_n(),s=o===n,l=s&&e.length>=Z?pn(e):null,u=e.length;l&&(o=Kt,s=!1,e=l);t:for(;++a<i;){var c=t[a];if(s&&c===c){for(var h=u;h--;)if(e[h]===c)continue t;r.push(c)}else o(e,c,0)<0&&r.push(c)}return r}function xe(t,e){var n=!0;return Go(t,function(t,i,r){return n=!!e(t,i,r)}),n}function Ne(t,e,n,i){var r=i,a=r;return Go(t,function(t,o,s){var l=+e(t,o,s);(n(l,r)||l===i&&l===a)&&(r=l,a=t)}),a}function Me(t,e,n,i){var r=t.length;for(n=null==n?0:+n||0,0>n&&(n=-n>r?0:r+n),i=i===w||i>r?r:+i||0,0>i&&(i+=r),r=n>i?0:i>>>0,n>>>=0;r>n;)t[n++]=e;return t}function ke(t,e){var n=[];return Go(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function Te(t,e,n,i){var r;return n(t,function(t,n,a){return e(t,n,a)?(r=i?n:t,!1):void 0}),r}function je(t,e,n,i){i||(i=[]);for(var r=-1,a=t.length;++r<a;){var o=t[r];g(o)&&Kn(o)&&(n||js(o)||Nr(o))?e?je(o,e,n,i):ue(i,o):n||(i[i.length]=o)}return i}function De(t,e){return Lo(t,e,ta)}function Ee(t,e){return Lo(t,e,Rs)}function Be(t,e){return Oo(t,e,Rs)}function ze(t,e){for(var n=-1,i=e.length,r=-1,a=[];++n<i;){var o=e[n];zr(t[o])&&(a[++r]=o)}return a}function Se(t,e,n){if(null!=t){n!==w&&n in hi(t)&&(e=[n]);for(var i=0,r=e.length;null!=t&&r>i;)t=t[e[i++]];return i&&i==r?t:w}}function Pe(t,e,n,i,r,a){return t===e?!0:null==t||null==e||!Sr(t)&&!g(e)?t!==t&&e!==e:Ge(t,e,Pe,n,i,r,a)}function Ge(t,e,n,i,r,a,o){var s=js(t),l=js(e),u=_,c=_;s||(u=no.call(t),u==Y?u=Q:u!=Q&&(s=_r(t))),l||(c=no.call(e),c==Y?c=Q:c!=Q&&(l=_r(e)));var h=u==Q,d=c==Q,f=u==c;if(f&&!s&&!h)return On(t,e,u);if(!r){var g=h&&to.call(t,"__wrapped__"),p=d&&to.call(e,"__wrapped__");if(g||p)return n(g?t.value():t,p?e.value():e,i,r,a,o)}if(!f)return!1;a||(a=[]),o||(o=[]);for(var m=a.length;m--;)if(a[m]==t)return o[m]==e;a.push(t),o.push(e);var v=(s?Ln:Rn)(t,e,n,i,r,a,o);return a.pop(),o.pop(),v}function Ze(t,e,n){var i=e.length,r=i,a=!n;if(null==t)return!r;for(t=hi(t);i--;){var o=e[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<r;){o=e[i];var s=o[0],l=t[s],u=o[1];if(a&&o[2]){if(l===w&&!(s in t))return!1}else{var c=n?n(l,u,s):w;if(!(c===w?Pe(u,l,n,!0):c))return!1}}return!0}function Le(t,e){var n=-1,i=Kn(t)?Ra(t.length):[];return Go(t,function(t,r,a){i[++n]=e(t,r,a)}),i}function Oe(t){var e=Vn(t);if(1==e.length&&e[0][2]){var n=e[0][0],i=e[0][1];return function(t){return null==t?!1:t[n]===i&&(i!==w||n in hi(t))}}return function(t){return Ze(t,e)}}function Re(t,e){var n=js(t),i=ti(t)&&ii(e),r=t+"";return t=di(t),function(a){if(null==a)return!1;var o=r;if(a=hi(a),(n||!i)&&!(o in a)){if(a=1==t.length?a:Se(a,He(t,0,-1)),null==a)return!1;o=Mi(t),a=hi(a)}return a[o]===e?e!==w||o in a:Pe(e,a[o],w,!0)}}function We(t,e,n,i,r){if(!Sr(t))return t;var a=Kn(e)&&(js(e)||_r(e)),o=a?w:Rs(e);return ie(o||e,function(s,l){if(o&&(l=s,s=e[l]),g(s))i||(i=[]),r||(r=[]),Ye(t,e,l,We,n,i,r);else{var u=t[l],c=n?n(u,s,l,t,e):w,h=c===w;h&&(c=s),c===w&&(!a||l in t)||!h&&(c===c?c===u:u!==u)||(t[l]=c)}}),t}function Ye(t,e,n,i,r,a,o){for(var s=a.length,l=e[n];s--;)if(a[s]==l)return void(t[n]=o[s]);var u=t[n],c=r?r(u,l,n,t,e):w,h=c===w;h&&(c=l,Kn(l)&&(js(l)||_r(l))?c=js(u)?u:Kn(u)?ne(u):[]:Rr(l)||Nr(l)?c=Nr(u)?Hr(u):Rr(u)?u:{}:h=!1),a.push(l),o.push(c),h?t[n]=i(c,l,r,a,o):(c===c?c!==u:u===u)&&(t[n]=c)}function _e(t){return function(e){return null==e?w:e[t]}}function Ve(t){var e=t+"";return t=di(t),function(n){return Se(n,t,e)}}function Xe(t,e){for(var n=t?e.length:0;n--;){var i=e[n];if(i!=r&&qn(i)){var r=i;fo.call(t,i,1)}}return t}function Ue(t,e){return t+yo(Mo()*(e-t+1))}function Fe(t,e,n,i,r){return r(t,function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)}),n}function He(t,e,n){var i=-1,r=t.length;e=null==e?0:+e||0,0>e&&(e=-e>r?0:r+e),n=n===w||n>r?r:+n||0,0>n&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var a=Ra(r);++i<r;)a[i]=t[i+e];return a}function Je(t,e){var n;return Go(t,function(t,i,r){return n=e(t,i,r),!n}),!!n}function Qe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ke(t,e,n){var i=Wn(),r=-1;e=le(e,function(t){return i(t)});var a=Le(t,function(t){var n=le(e,function(e){return e(t)});return{criteria:n,index:++r,value:t}});return Qe(a,function(t,e){return l(t,e,n)})}function qe(t,e){var n=0;return Go(t,function(t,i,r){n+=+e(t,i,r)||0}),n}function $e(t,e){var i=-1,r=_n(),a=t.length,o=r===n,s=o&&a>=Z,l=s?pn():null,u=[];l?(r=Kt,o=!1):(s=!1,l=e?[]:u);t:for(;++i<a;){var c=t[i],h=e?e(c,i,t):c;if(o&&c===c){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),u.push(c)}else r(l,h,0)<0&&((e||s)&&l.push(h),u.push(c))}return u}function tn(t,e){for(var n=-1,i=e.length,r=Ra(i);++n<i;)r[n]=t[e[n]];return r}function en(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?He(t,i?0:a,i?a+1:r):He(t,i?a+1:0,i?r:a)}function nn(t,e){var n=t;n instanceof Wt&&(n=n.value());for(var i=-1,r=e.length;++i<r;){var a=e[i];n=a.func.apply(a.thisArg,ue([n],a.args))}return n}function rn(t,e,n){var i=0,r=t?t.length:i;if("number"==typeof e&&e===e&&Eo>=r){for(;r>i;){var a=i+r>>>1,o=t[a];(n?e>=o:e>o)&&null!==o?i=a+1:r=a}return r}return an(t,e,ka,n)}function an(t,e,n,i){e=n(e);for(var r=0,a=t?t.length:0,o=e!==e,s=null===e,l=e===w;a>r;){var u=yo((r+a)/2),c=n(t[u]),h=c!==w,d=c===c;if(o)var f=d||i;else f=s?d&&h&&(i||null!=c):l?d&&(i||h):null==c?!1:i?e>=c:e>c;f?r=u+1:a=u}return Ao(a,Do)}function on(t,e,n){if("function"!=typeof t)return ka;if(e===w)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,a){return t.call(e,n,i,r,a)};case 5:return function(n,i,r,a,o){return t.call(e,n,i,r,a,o)}}return function(){return t.apply(e,arguments)}}function sn(t){var e=new ao(t.byteLength),n=new go(e);return n.set(new go(t)),e}function ln(t,e,n){for(var i=n.length,r=-1,a=wo(t.length-i,0),o=-1,s=e.length,l=Ra(s+a);++o<s;)l[o]=e[o];for(;++r<i;)l[n[r]]=t[r];for(;a--;)l[o++]=t[r++];return l}function un(t,e,n){for(var i=-1,r=n.length,a=-1,o=wo(t.length-r,0),s=-1,l=e.length,u=Ra(o+l);++a<o;)u[a]=t[a];for(var c=a;++s<l;)u[c+s]=e[s];for(;++i<r;)u[c+n[i]]=t[a++];return u}function cn(t,e){return function(n,i,r){var a=e?e():{};if(i=Wn(i,r,3),js(n))for(var o=-1,s=n.length;++o<s;){var l=n[o];t(a,l,i(l,o,n),n)}else Go(n,function(e,n,r){t(a,e,i(e,n,r),r)});return a}}function hn(t){return vr(function(e,n){var i=-1,r=null==e?0:n.length,a=r>2?n[r-2]:w,o=r>2?n[2]:w,s=r>1?n[r-1]:w;for("function"==typeof a?(a=on(a,s,5),r-=2):(a="function"==typeof s?s:w,r-=a?1:0),o&&$n(n[0],n[1],o)&&(a=3>r?w:a,r=1);++i<r;){var l=n[i];l&&t(e,l,a)}return e})}function dn(t,e){return function(n,i){var r=n?Yo(n):0;if(!ni(r))return t(n,i);for(var a=e?r:-1,o=hi(n);(e?a--:++a<r)&&i(o[a],a,o)!==!1;);return n}}function fn(t){return function(e,n,i){for(var r=hi(e),a=i(e),o=a.length,s=t?o:-1;t?s--:++s<o;){var l=a[s];if(n(r[l],l,r)===!1)break}return e}}function gn(t,e){function n(){var r=this&&this!==$t&&this instanceof n?i:t;return r.apply(e,arguments)}var i=vn(t);return n}function pn(t){return vo&&co?new Qt(t):null}function mn(t){return function(e){for(var n=-1,i=xa(ca(e)),r=i.length,a="";++n<r;)a=t(a,i[n],n);return a}}function vn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Po(t.prototype),i=t.apply(n,e);return Sr(i)?i:n}}function yn(t){function e(n,i,r){r&&$n(n,i,r)&&(i=w);var a=Zn(n,t,w,w,w,w,w,i);return a.placeholder=e.placeholder,a}return e}function In(t,e){return vr(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(w,n))})}function bn(t,e){return function(n,i,r){if(r&&$n(n,i,r)&&(i=w),i=Wn(i,r,3),1==i.length){n=js(n)?n:ci(n);var a=oe(n,i,t,e);if(!n.length||a!==e)return a}return Ne(n,i,t,e)}}function Cn(t,n){return function(i,r,a){if(r=Wn(r,a,3),js(i)){var o=e(i,r,n);return o>-1?i[o]:w}return Te(i,r,t)}}function wn(t){return function(n,i,r){return n&&n.length?(i=Wn(i,r,3),e(n,i,t)):-1}}function An(t){return function(e,n,i){return n=Wn(n,i,3),Te(e,n,t,!0)}}function xn(t){return function(){for(var e,n=arguments.length,i=t?n:-1,r=0,a=Ra(n);t?i--:++i<n;){var o=a[r++]=arguments[i];if("function"!=typeof o)throw new Ja(R);!e&&tt.prototype.thru&&"wrapper"==Yn(o)&&(e=new tt([],!0))}for(i=e?-1:n;++i<n;){o=a[i];var s=Yn(o),l="wrapper"==s?Wo(o):w;e=l&&ei(l[0])&&l[1]==(E|k|j|B)&&!l[4].length&&1==l[9]?e[Yn(l[0])].apply(e,l[3]):1==o.length&&ei(o)?e[s]():e.thru(o)}return function(){var t=arguments,i=t[0];if(e&&1==t.length&&js(i)&&i.length>=Z)return e.plant(i).value();for(var r=0,o=n?a[r].apply(this,t):i;++r<n;)o=a[r].call(this,o);return o}}}function Nn(t,e){return function(n,i,r){return"function"==typeof i&&r===w&&js(n)?t(n,i):e(n,on(i,r,3))}}function Mn(t){return function(e,n,i){return"function"==typeof n&&i===w||(n=on(n,i,3)),t(e,n,ta)}}function kn(t){return function(e,n,i){return"function"==typeof n&&i===w||(n=on(n,i,3)),t(e,n)}}function Tn(t){return function(e,n,i){var r={};return n=Wn(n,i,3),Ee(e,function(e,i,a){var o=n(e,i,a);i=t?o:i,e=t?e:o,r[i]=e}),r}}function jn(t){return function(e,n,i){return e=r(e),(t?e:"")+zn(e,n,i)+(t?"":e)}}function Dn(t){var e=vr(function(n,i){var r=m(i,e.placeholder);return Zn(n,t,w,i,r)});return e}function En(t,e){return function(n,i,r,a){var o=arguments.length<3;return"function"==typeof i&&a===w&&js(n)?t(n,i,r,o):Fe(n,Wn(i,a,4),r,o,e)}}function Bn(t,e,n,i,r,a,o,s,l,u){function c(){for(var I=arguments.length,b=I,C=Ra(I);b--;)C[b]=arguments[b];if(i&&(C=ln(C,i,r)),a&&(C=un(C,a,o)),g||v){var A=c.placeholder,M=m(C,A);if(I-=M.length,u>I){var k=s?ne(s):w,T=wo(u-I,0),E=g?M:w,B=g?w:M,z=g?C:w,S=g?w:C;e|=g?j:D,e&=~(g?D:j),p||(e&=~(x|N));var P=[t,e,n,z,E,S,B,k,l,T],G=Bn.apply(w,P);return ei(t)&&_o(G,P),G.placeholder=A,G}}var Z=d?n:this,L=f?Z[t]:t;return s&&(C=li(C,s)),h&&l<C.length&&(C.length=l),this&&this!==$t&&this instanceof c&&(L=y||vn(t)),L.apply(Z,C)}var h=e&E,d=e&x,f=e&N,g=e&k,p=e&M,v=e&T,y=f?w:vn(t);return c}function zn(t,e,n){var i=t.length;if(e=+e,i>=e||!bo(e))return"";var r=e-i;return n=null==n?" ":n+"",ma(n,mo(r/n.length)).slice(0,r)}function Sn(t,e,n,i){function r(){for(var e=-1,s=arguments.length,l=-1,u=i.length,c=Ra(u+s);++l<u;)c[l]=i[l];for(;s--;)c[l++]=arguments[++e];var h=this&&this!==$t&&this instanceof r?o:t;return h.apply(a?n:this,c)}var a=e&x,o=vn(t);return r}function Pn(t){var e=Va[t];return function(t,n){return n=n===w?0:+n||0,n?(n=lo(10,n),e(t*n)/n):e(t)}}function Gn(t){return function(e,n,i,r){var a=Wn(i);return null==i&&a===be?rn(e,n,t):an(e,n,a(i,r,1),t)}}function Zn(t,e,n,i,r,a,o,s){var l=e&N;if(!l&&"function"!=typeof t)throw new Ja(R);var u=i?i.length:0;if(u||(e&=~(j|D),i=r=w),u-=r?r.length:0,e&D){var c=i,h=r;i=r=w}var d=l?w:Wo(t),f=[t,e,n,i,r,c,h,a,o,s];if(d&&(ri(f,d),e=f[1],s=f[9]),f[9]=null==s?l?0:t.length:wo(s-u,0)||0,e==x)var g=gn(f[0],f[2]);else g=e!=j&&e!=(x|j)||f[4].length?Bn.apply(w,f):Sn.apply(w,f);var p=d?Ro:_o;return p(g,f)}function Ln(t,e,n,i,r,a,o){var s=-1,l=t.length,u=e.length;if(l!=u&&!(r&&u>l))return!1;for(;++s<l;){var c=t[s],h=e[s],d=i?i(r?h:c,r?c:h,s):w;if(d!==w){if(d)continue;return!1}if(r){if(!de(e,function(t){return c===t||n(c,t,i,r,a,o)}))return!1}else if(c!==h&&!n(c,h,i,r,a,o))return!1}return!0}function On(t,e,n){switch(n){case V:case X:return+t==+e;case U:return t.name==e.name&&t.message==e.message;case J:return t!=+t?e!=+e:t==+e;case K:case $:return t==e+""}return!1}function Rn(t,e,n,i,r,a,o){var s=Rs(t),l=s.length,u=Rs(e),c=u.length;if(l!=c&&!r)return!1;for(var h=l;h--;){var d=s[h];if(!(r?d in e:to.call(e,d)))return!1}for(var f=r;++h<l;){d=s[h];var g=t[d],p=e[d],m=i?i(r?p:g,r?g:p,d):w;if(!(m===w?n(g,p,i,r,a,o):m))return!1;f||(f="constructor"==d)}if(!f){var v=t.constructor,y=e.constructor;if(v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y))return!1}return!0}function Wn(t,e,n){var i=H.callback||Na;return i=i===Na?be:i,n?i(t,e,n):i}function Yn(t){for(var e=t.name+"",n=So[e],i=n?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function _n(t,e,i){var r=H.indexOf||xi;return r=r===xi?n:r,t?r(t,e,i):r}function Vn(t){for(var e=ea(t),n=e.length;n--;)e[n][2]=ii(e[n][1]);return e}function Xn(t,e){var n=null==t?w:t[e];return Zr(n)?n:w}function Un(t,e,n){for(var i=-1,r=n.length;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=Ao(e,t+o);break;case"takeRight":t=wo(t,e-o)}}return{start:t,end:e}}function Fn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&to.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Hn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Ua),new e}function Jn(t,e,n){var i=t.constructor;switch(e){case et:return sn(t);case V:case X:return new i(+t);case nt:case it:case rt:case at:case ot:case st:case lt:case ut:case ct:var r=t.buffer;return new i(n?sn(r):r,t.byteOffset,t.length);case J:case $:return new i(t);case K:var a=new i(t.source,jt.exec(t));a.lastIndex=t.lastIndex}return a}function Qn(t,e,n){null==t||ti(e,t)||(e=di(e),t=1==e.length?t:Se(t,He(e,0,-1)),e=Mi(e));var i=null==t?t:t[e];return null==i?w:i.apply(t,n)}function Kn(t){return null!=t&&ni(Yo(t))}function qn(t,e){return t="number"==typeof t||Bt.test(t)?+t:-1,e=null==e?Bo:e,t>-1&&t%1==0&&e>t}function $n(t,e,n){if(!Sr(n))return!1;var i=typeof e;if("number"==i?Kn(n)&&qn(e,n.length):"string"==i&&e in n){var r=n[e];return t===t?t===r:r!==r}return!1}function ti(t,e){var n=typeof t;if("string"==n&&wt.test(t)||"number"==n)return!0;if(js(t))return!1;var i=!Ct.test(t);return i||null!=e&&t in hi(e)}function ei(t){var e=Yn(t),n=H[e];if("function"!=typeof n||!(e in Wt.prototype))return!1;if(t===n)return!0;var i=Wo(n);return!!i&&t===i[0]}function ni(t){return"number"==typeof t&&t>-1&&t%1==0&&Bo>=t}function ii(t){return t===t&&!Sr(t)}function ri(t,e){var n=t[1],i=e[1],r=n|i,a=E>r,o=i==E&&n==k||i==E&&n==B&&t[7].length<=e[8]||i==(E|B)&&n==k;if(!a&&!o)return t;i&x&&(t[2]=e[2],r|=n&x?0:M);var s=e[3];if(s){var l=t[3];t[3]=l?ln(l,s,e[4]):ne(s),t[4]=l?m(t[3],W):ne(e[4])}return s=e[5],s&&(l=t[5],t[5]=l?un(l,s,e[6]):ne(s),t[6]=l?m(t[5],W):ne(e[6])),s=e[7],s&&(t[7]=ne(s)),i&E&&(t[8]=null==t[8]?e[8]:Ao(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function ai(t,e){return t===w?e:Ds(t,e,ai)}function oi(t,e){t=hi(t);for(var n=-1,i=e.length,r={};++n<i;){var a=e[n];a in t&&(r[a]=t[a])}return r}function si(t,e){var n={};return De(t,function(t,i,r){e(t,i,r)&&(n[i]=t)}),n}function li(t,e){for(var n=t.length,i=Ao(e.length,n),r=ne(t);i--;){var a=e[i];t[i]=qn(a,n)?r[a]:w}return t}function ui(t){for(var e=ta(t),n=e.length,i=n&&t.length,r=!!i&&ni(i)&&(js(t)||Nr(t)),a=-1,o=[];++a<n;){var s=e[a];(r&&qn(s,i)||to.call(t,s))&&o.push(s)}return o}function ci(t){return null==t?[]:Kn(t)?Sr(t)?t:Ua(t):aa(t)}function hi(t){return Sr(t)?t:Ua(t)}function di(t){if(js(t))return t;var e=[];return r(t).replace(At,function(t,n,i,r){
e.push(i?r.replace(kt,"$1"):n||t)}),e}function fi(t){return t instanceof Wt?t.clone():new tt(t.__wrapped__,t.__chain__,ne(t.__actions__))}function gi(t,e,n){e=(n?$n(t,e,n):null==e)?1:wo(yo(e)||1,1);for(var i=0,r=t?t.length:0,a=-1,o=Ra(mo(r/e));r>i;)o[++a]=He(t,i,i+=e);return o}function pi(t){for(var e=-1,n=t?t.length:0,i=-1,r=[];++e<n;){var a=t[e];a&&(r[++i]=a)}return r}function mi(t,e,n){var i=t?t.length:0;return i?((n?$n(t,e,n):null==e)&&(e=1),He(t,0>e?0:e)):[]}function vi(t,e,n){var i=t?t.length:0;return i?((n?$n(t,e,n):null==e)&&(e=1),e=i-(+e||0),He(t,0,0>e?0:e)):[]}function yi(t,e,n){return t&&t.length?en(t,Wn(e,n,3),!0,!0):[]}function Ii(t,e,n){return t&&t.length?en(t,Wn(e,n,3),!0):[]}function bi(t,e,n,i){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&$n(t,e,n)&&(n=0,i=r),Me(t,e,n,i)):[]}function Ci(t){return t?t[0]:w}function wi(t,e,n){var i=t?t.length:0;return n&&$n(t,e,n)&&(e=!1),i?je(t,e):[]}function Ai(t){var e=t?t.length:0;return e?je(t,!0):[]}function xi(t,e,i){var r=t?t.length:0;if(!r)return-1;if("number"==typeof i)i=0>i?wo(r+i,0):i;else if(i){var a=rn(t,e);return r>a&&(e===e?e===t[a]:t[a]!==t[a])?a:-1}return n(t,e,i||0)}function Ni(t){return vi(t,1)}function Mi(t){var e=t?t.length:0;return e?t[e-1]:w}function ki(t,e,n){var i=t?t.length:0;if(!i)return-1;var r=i;if("number"==typeof n)r=(0>n?wo(i+n,0):Ao(n||0,i-1))+1;else if(n){r=rn(t,e,!0)-1;var a=t[r];return(e===e?e===a:a!==a)?r:-1}if(e!==e)return f(t,r,!0);for(;r--;)if(t[r]===e)return r;return-1}function Ti(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,i=_n(),r=t.length;++n<r;)for(var a=0,o=t[n];(a=i(e,o,a))>-1;)fo.call(e,a,1);return e}function ji(t,e,n){var i=[];if(!t||!t.length)return i;var r=-1,a=[],o=t.length;for(e=Wn(e,n,3);++r<o;){var s=t[r];e(s,r,t)&&(i.push(s),a.push(r))}return Xe(t,a),i}function Di(t){return mi(t,1)}function Ei(t,e,n){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&$n(t,e,n)&&(e=0,n=i),He(t,e,n)):[]}function Bi(t,e,n){var i=t?t.length:0;return i?((n?$n(t,e,n):null==e)&&(e=1),He(t,0,0>e?0:e)):[]}function zi(t,e,n){var i=t?t.length:0;return i?((n?$n(t,e,n):null==e)&&(e=1),e=i-(+e||0),He(t,0>e?0:e)):[]}function Si(t,e,n){return t&&t.length?en(t,Wn(e,n,3),!1,!0):[]}function Pi(t,e,n){return t&&t.length?en(t,Wn(e,n,3)):[]}function Gi(t,e,i,r){var a=t?t.length:0;if(!a)return[];null!=e&&"boolean"!=typeof e&&(r=i,i=$n(t,e,r)?w:e,e=!1);var o=Wn();return null==i&&o===be||(i=o(i,r,3)),e&&_n()===n?v(t,i):$e(t,i)}function Zi(t){if(!t||!t.length)return[];var e=-1,n=0;t=se(t,function(t){return Kn(t)?(n=wo(t.length,n),!0):void 0});for(var i=Ra(n);++e<n;)i[e]=le(t,_e(e));return i}function Li(t,e,n){var i=t?t.length:0;if(!i)return[];var r=Zi(t);return null==e?r:(e=on(e,n,4),le(r,function(t){return ce(t,e,w,!0)}))}function Oi(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Kn(n))var i=i?ue(Ae(i,n),Ae(n,i)):n}return i?$e(i):[]}function Ri(t,e){var n=-1,i=t?t.length:0,r={};for(!i||e||js(t[0])||(e=[]);++n<i;){var a=t[n];e?r[a]=e[n]:a&&(r[a[0]]=a[1])}return r}function Wi(t){var e=H(t);return e.__chain__=!0,e}function Yi(t,e,n){return e.call(n,t),t}function _i(t,e,n){return e.call(n,t)}function Vi(){return Wi(this)}function Xi(){return new tt(this.value(),this.__chain__)}function Ui(t){for(var e,n=this;n instanceof q;){var i=fi(n);e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e}function Fi(){var t=this.__wrapped__,e=function(t){return t.reverse()};if(t instanceof Wt){var n=t;return this.__actions__.length&&(n=new Wt(this)),n=n.reverse(),n.__actions__.push({func:_i,args:[e],thisArg:w}),new tt(n,this.__chain__)}return this.thru(e)}function Hi(){return this.value()+""}function Ji(){return nn(this.__wrapped__,this.__actions__)}function Qi(t,e,n){var i=js(t)?ae:xe;return n&&$n(t,e,n)&&(e=w),"function"==typeof e&&n===w||(e=Wn(e,n,3)),i(t,e)}function Ki(t,e,n){var i=js(t)?se:ke;return e=Wn(e,n,3),i(t,e)}function qi(t,e){return rs(t,Oe(e))}function $i(t,e,n,i){var r=t?Yo(t):0;return ni(r)||(t=aa(t),r=t.length),n="number"!=typeof n||i&&$n(e,n,i)?0:0>n?wo(r+n,0):n||0,"string"==typeof t||!js(t)&&Yr(t)?r>=n&&t.indexOf(e,n)>-1:!!r&&_n(t,e,n)>-1}function tr(t,e,n){var i=js(t)?le:Le;return e=Wn(e,n,3),i(t,e)}function er(t,e){return tr(t,za(e))}function nr(t,e,n){var i=js(t)?se:ke;return e=Wn(e,n,3),i(t,function(t,n,i){return!e(t,n,i)})}function ir(t,e,n){if(n?$n(t,e,n):null==e){t=ci(t);var i=t.length;return i>0?t[Ue(0,i-1)]:w}var r=-1,a=Fr(t),i=a.length,o=i-1;for(e=Ao(0>e?0:+e||0,i);++r<e;){var s=Ue(r,o),l=a[s];a[s]=a[r],a[r]=l}return a.length=e,a}function rr(t){return ir(t,To)}function ar(t){var e=t?Yo(t):0;return ni(e)?e:Rs(t).length}function or(t,e,n){var i=js(t)?de:Je;return n&&$n(t,e,n)&&(e=w),"function"==typeof e&&n===w||(e=Wn(e,n,3)),i(t,e)}function sr(t,e,n){if(null==t)return[];n&&$n(t,e,n)&&(e=w);var i=-1;e=Wn(e,n,3);var r=Le(t,function(t,n,r){return{criteria:e(t,n,r),index:++i,value:t}});return Qe(r,s)}function lr(t,e,n,i){return null==t?[]:(i&&$n(e,n,i)&&(n=w),js(e)||(e=null==e?[]:[e]),js(n)||(n=null==n?[]:[n]),Ke(t,e,n))}function ur(t,e){return Ki(t,Oe(e))}function cr(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Ja(R);var n=t;t=e,e=n}return t=bo(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function hr(t,e,n){return n&&$n(t,e,n)&&(e=w),e=t&&null==e?t.length:wo(+e||0,0),Zn(t,E,w,w,w,w,e)}function dr(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Ja(R);var i=t;t=e,e=i}return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=w),n}}function fr(t,e,n){function i(){f&&oo(f),u&&oo(u),p=0,u=f=g=w}function r(e,n){n&&oo(n),u=f=g=w,e&&(p=ps(),c=t.apply(d,l),f||u||(l=d=w))}function a(){var t=e-(ps()-h);0>=t||t>e?r(g,u):f=ho(a,t)}function o(){r(v,f)}function s(){if(l=arguments,h=ps(),d=this,g=v&&(f||!y),m===!1)var n=y&&!f;else{u||y||(p=h);var i=m-(h-p),r=0>=i||i>m;r?(u&&(u=oo(u)),p=h,c=t.apply(d,l)):u||(u=ho(o,i))}return r&&f?f=oo(f):f||e===m||(f=ho(a,e)),n&&(r=!0,c=t.apply(d,l)),!r||f||u||(l=d=w),c}var l,u,c,h,d,f,g,p=0,m=!1,v=!0;if("function"!=typeof t)throw new Ja(R);if(e=0>e?0:+e||0,n===!0){var y=!0;v=!1}else Sr(n)&&(y=!!n.leading,m="maxWait"in n&&wo(+n.maxWait||0,e),v="trailing"in n?!!n.trailing:v);return s.cancel=i,s}function gr(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Ja(R);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o),o};return n.cache=new gr.Cache,n}function pr(t){if("function"!=typeof t)throw new Ja(R);return function(){return!t.apply(this,arguments)}}function mr(t){return dr(2,t)}function vr(t,e){if("function"!=typeof t)throw new Ja(R);return e=wo(e===w?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,r=wo(n.length-e,0),a=Ra(r);++i<r;)a[i]=n[e+i];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}var o=Ra(e+1);for(i=-1;++i<e;)o[i]=n[i];return o[e]=a,t.apply(this,o)}}function yr(t){if("function"!=typeof t)throw new Ja(R);return function(e){return t.apply(this,e)}}function Ir(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new Ja(R);return n===!1?i=!1:Sr(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),fr(t,e,{leading:i,maxWait:+e,trailing:r})}function br(t,e){return e=null==e?ka:e,Zn(e,j,w,[t],[])}function Cr(t,e,n,i){return e&&"boolean"!=typeof e&&$n(t,e,n)?e=!1:"function"==typeof e&&(i=n,n=e,e=!1),"function"==typeof n?Ce(t,e,on(n,i,3)):Ce(t,e)}function wr(t,e,n){return"function"==typeof e?Ce(t,!0,on(e,n,3)):Ce(t,!0)}function Ar(t,e){return t>e}function xr(t,e){return t>=e}function Nr(t){return g(t)&&Kn(t)&&to.call(t,"callee")&&!uo.call(t,"callee")}function Mr(t){return t===!0||t===!1||g(t)&&no.call(t)==V}function kr(t){return g(t)&&no.call(t)==X}function Tr(t){return!!t&&1===t.nodeType&&g(t)&&!Rr(t)}function jr(t){return null==t?!0:Kn(t)&&(js(t)||Yr(t)||Nr(t)||g(t)&&zr(t.splice))?!t.length:!Rs(t).length}function Dr(t,e,n,i){n="function"==typeof n?on(n,i,3):w;var r=n?n(t,e):w;return r===w?Pe(t,e,n):!!r}function Er(t){return g(t)&&"string"==typeof t.message&&no.call(t)==U}function Br(t){return"number"==typeof t&&bo(t)}function zr(t){return Sr(t)&&no.call(t)==F}function Sr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Pr(t,e,n,i){return n="function"==typeof n?on(n,i,3):w,Ze(t,Vn(e),n)}function Gr(t){return Or(t)&&t!=+t}function Zr(t){return null==t?!1:zr(t)?ro.test($a.call(t)):g(t)&&Et.test(t)}function Lr(t){return null===t}function Or(t){return"number"==typeof t||g(t)&&no.call(t)==J}function Rr(t){var e;if(!g(t)||no.call(t)!=Q||Nr(t)||!to.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return De(t,function(t,e){n=e}),n===w||to.call(t,n)}function Wr(t){return Sr(t)&&no.call(t)==K}function Yr(t){return"string"==typeof t||g(t)&&no.call(t)==$}function _r(t){return g(t)&&ni(t.length)&&!!Ot[no.call(t)]}function Vr(t){return t===w}function Xr(t,e){return e>t}function Ur(t,e){return e>=t}function Fr(t){var e=t?Yo(t):0;return ni(e)?e?ne(t):[]:aa(t)}function Hr(t){return Ie(t,ta(t))}function Jr(t,e,n){var i=Po(t);return n&&$n(t,e,n)&&(e=w),e?ve(i,e):i}function Qr(t){return ze(t,ta(t))}function Kr(t,e,n){var i=null==t?w:Se(t,di(e),e+"");return i===w?n:i}function qr(t,e){if(null==t)return!1;var n=to.call(t,e);if(!n&&!ti(e)){if(e=di(e),t=1==e.length?t:Se(t,He(e,0,-1)),null==t)return!1;e=Mi(e),n=to.call(t,e)}return n||ni(t.length)&&qn(e,t.length)&&(js(t)||Nr(t))}function $r(t,e,n){n&&$n(t,e,n)&&(e=w);for(var i=-1,r=Rs(t),a=r.length,o={};++i<a;){var s=r[i],l=t[s];e?to.call(o,l)?o[l].push(s):o[l]=[s]:o[l]=s}return o}function ta(t){if(null==t)return[];Sr(t)||(t=Ua(t));var e=t.length;e=e&&ni(e)&&(js(t)||Nr(t))&&e||0;for(var n=t.constructor,i=-1,r="function"==typeof n&&n.prototype===t,a=Ra(e),o=e>0;++i<e;)a[i]=i+"";for(var s in t)o&&qn(s,e)||"constructor"==s&&(r||!to.call(t,s))||a.push(s);return a}function ea(t){t=hi(t);for(var e=-1,n=Rs(t),i=n.length,r=Ra(i);++e<i;){var a=n[e];r[e]=[a,t[a]]}return r}function na(t,e,n){var i=null==t?w:t[e];return i===w&&(null==t||ti(e,t)||(e=di(e),t=1==e.length?t:Se(t,He(e,0,-1)),i=null==t?w:t[Mi(e)]),i=i===w?n:i),zr(i)?i.call(t):i}function ia(t,e,n){if(null==t)return t;var i=e+"";e=null!=t[i]||ti(e,t)?[i]:di(e);for(var r=-1,a=e.length,o=a-1,s=t;null!=s&&++r<a;){var l=e[r];Sr(s)&&(r==o?s[l]=n:null==s[l]&&(s[l]=qn(e[r+1])?[]:{})),s=s[l]}return t}function ra(t,e,n,i){var r=js(t)||_r(t);if(e=Wn(e,i,4),null==n)if(r||Sr(t)){var a=t.constructor;n=r?js(t)?new a:[]:Po(zr(a)?a.prototype:w)}else n={};return(r?ie:Ee)(t,function(t,i,r){return e(n,t,i,r)}),n}function aa(t){return tn(t,Rs(t))}function oa(t){return tn(t,ta(t))}function sa(t,e,n){return e=+e||0,n===w?(n=e,e=0):n=+n||0,t>=Ao(e,n)&&t<wo(e,n)}function la(t,e,n){n&&$n(t,e,n)&&(e=n=w);var i=null==t,r=null==e;if(null==n&&(r&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,r=!0)),i&&r&&(e=1,r=!1),t=+t||0,r?(e=t,t=0):e=+e||0,n||t%1||e%1){var a=Mo();return Ao(t+a*(e-t+so("1e-"+((a+"").length-1))),e)}return Ue(t,e)}function ua(t){return t=r(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function ca(t){return t=r(t),t&&t.replace(zt,u).replace(Mt,"")}function ha(t,e,n){t=r(t),e+="";var i=t.length;return n=n===w?i:Ao(0>n?0:+n||0,i),n-=e.length,n>=0&&t.indexOf(e,n)==n}function da(t){return t=r(t),t&&vt.test(t)?t.replace(pt,c):t}function fa(t){return t=r(t),t&&Nt.test(t)?t.replace(xt,h):t||"(?:)"}function ga(t,e,n){t=r(t),e=+e;var i=t.length;if(i>=e||!bo(e))return t;var a=(e-i)/2,o=yo(a),s=mo(a);return n=zn("",s,n),n.slice(0,o)+t+n}function pa(t,e,n){return(n?$n(t,e,n):null==e)?e=0:e&&(e=+e),t=Ia(t),No(t,e||(Dt.test(t)?16:10))}function ma(t,e){var n="";if(t=r(t),e=+e,1>e||!t||!bo(e))return n;do e%2&&(n+=t),e=yo(e/2),t+=t;while(e);return n}function va(t,e,n){return t=r(t),n=null==n?0:Ao(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function ya(t,e,n){var i=H.templateSettings;n&&$n(t,e,n)&&(e=n=w),t=r(t),e=me(ve({},n||e),i,pe);var a,o,s=me(ve({},e.imports),i.imports,pe),l=Rs(s),u=tn(s,l),c=0,h=e.interpolate||St,f="__p += '",g=Fa((e.escape||St).source+"|"+h.source+"|"+(h===bt?Tt:St).source+"|"+(e.evaluate||St).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Lt+"]")+"\n";t.replace(g,function(e,n,i,r,s,l){return i||(i=r),f+=t.slice(c,l).replace(Pt,d),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+e.length,e}),f+="';\n";var m=e.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(ht,""):f).replace(dt,"$1").replace(ft,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Ks(function(){return _a(l,p+"return "+f).apply(w,u)});if(v.source=f,Er(v))throw v;return v}function Ia(t,e,n){var i=t;return(t=r(t))?(n?$n(i,e,n):null==e)?t.slice(y(t),I(t)+1):(e+="",t.slice(a(t,e),o(t,e)+1)):t}function ba(t,e,n){var i=t;return t=r(t),t?(n?$n(i,e,n):null==e)?t.slice(y(t)):t.slice(a(t,e+"")):t}function Ca(t,e,n){var i=t;return t=r(t),t?(n?$n(i,e,n):null==e)?t.slice(0,I(t)+1):t.slice(0,o(t,e+"")+1):t}function wa(t,e,n){n&&$n(t,e,n)&&(e=w);var i=z,a=S;if(null!=e)if(Sr(e)){var o="separator"in e?e.separator:o;i="length"in e?+e.length||0:i,a="omission"in e?r(e.omission):a}else i=+e||0;if(t=r(t),i>=t.length)return t;var s=i-a.length;if(1>s)return a;var l=t.slice(0,s);if(null==o)return l+a;if(Wr(o)){if(t.slice(s).search(o)){var u,c,h=t.slice(0,s);for(o.global||(o=Fa(o.source,(jt.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(h);)c=u.index;l=l.slice(0,null==c?s:c)}}else if(t.indexOf(o,s)!=s){var d=l.lastIndexOf(o);d>-1&&(l=l.slice(0,d))}return l+a}function Aa(t){return t=r(t),t&&mt.test(t)?t.replace(gt,b):t}function xa(t,e,n){return n&&$n(t,e,n)&&(e=w),t=r(t),t.match(e||Gt)||[]}function Na(t,e,n){return n&&$n(t,e,n)&&(e=w),g(t)?Ta(t):be(t,e)}function Ma(t){return function(){return t}}function ka(t){return t}function Ta(t){return Oe(Ce(t,!0))}function ja(t,e){return Re(t,Ce(e,!0))}function Da(t,e,n){if(null==n){var i=Sr(e),r=i?Rs(e):w,a=r&&r.length?ze(e,r):w;(a?a.length:i)||(a=!1,n=e,e=t,t=this)}a||(a=ze(e,Rs(e)));var o=!0,s=-1,l=zr(t),u=a.length;n===!1?o=!1:Sr(n)&&"chain"in n&&(o=n.chain);for(;++s<u;){var c=a[s],h=e[c];t[c]=h,l&&(t.prototype[c]=function(e){return function(){var n=this.__chain__;if(o||n){var i=t(this.__wrapped__),r=i.__actions__=ne(this.__actions__);return r.push({func:e,args:arguments,thisArg:t}),i.__chain__=n,i}return e.apply(t,ue([this.value()],arguments))}}(h))}return t}function Ea(){return $t._=io,this}function Ba(){}function za(t){return ti(t)?_e(t):Ve(t)}function Sa(t){return function(e){return Se(t,di(e),e+"")}}function Pa(t,e,n){n&&$n(t,e,n)&&(e=n=w),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var i=-1,r=wo(mo((e-t)/(n||1)),0),a=Ra(r);++i<r;)a[i]=t,t+=n;return a}function Ga(t,e,n){if(t=yo(t),1>t||!bo(t))return[];var i=-1,r=Ra(Ao(t,jo));for(e=on(e,n,1);++i<t;)jo>i?r[i]=e(i):e(i);return r}function Za(t){var e=++eo;return r(t)+e}function La(t,e){return(+t||0)+(+e||0)}function Oa(t,e,n){return n&&$n(t,e,n)&&(e=w),e=Wn(e,n,3),1==e.length?fe(js(t)?t:ci(t),e):qe(t,e)}p=p?te.defaults($t.Object(),p,te.pick($t,Zt)):$t;var Ra=p.Array,Wa=p.Date,Ya=p.Error,_a=p.Function,Va=p.Math,Xa=p.Number,Ua=p.Object,Fa=p.RegExp,Ha=p.String,Ja=p.TypeError,Qa=Ra.prototype,Ka=Ua.prototype,qa=Ha.prototype,$a=_a.prototype.toString,to=Ka.hasOwnProperty,eo=0,no=Ka.toString,io=$t._,ro=Fa("^"+$a.call(to).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ao=p.ArrayBuffer,oo=p.clearTimeout,so=p.parseFloat,lo=Va.pow,uo=Ka.propertyIsEnumerable,co=Xn(p,"Set"),ho=p.setTimeout,fo=Qa.splice,go=p.Uint8Array,po=Xn(p,"WeakMap"),mo=Va.ceil,vo=Xn(Ua,"create"),yo=Va.floor,Io=Xn(Ra,"isArray"),bo=p.isFinite,Co=Xn(Ua,"keys"),wo=Va.max,Ao=Va.min,xo=Xn(Wa,"now"),No=p.parseInt,Mo=Va.random,ko=Xa.NEGATIVE_INFINITY,To=Xa.POSITIVE_INFINITY,jo=4294967295,Do=jo-1,Eo=jo>>>1,Bo=9007199254740991,zo=po&&new po,So={};H.support={};H.templateSettings={escape:yt,evaluate:It,interpolate:bt,variable:"",imports:{_:H}};var Po=function(){function t(){}return function(e){if(Sr(e)){t.prototype=e;var n=new t;t.prototype=w}return n||{}}}(),Go=dn(Ee),Zo=dn(Be,!0),Lo=fn(),Oo=fn(!0),Ro=zo?function(t,e){return zo.set(t,e),t}:ka,Wo=zo?function(t){return zo.get(t)}:Ba,Yo=_e("length"),_o=function(){var t=0,e=0;return function(n,i){var r=ps(),a=G-(r-e);if(e=r,a>0){if(++t>=P)return n}else t=0;return Ro(n,i)}}(),Vo=vr(function(t,e){return g(t)&&Kn(t)?Ae(t,je(e,!1,!0)):[]}),Xo=wn(),Uo=wn(!0),Fo=vr(function(t){for(var e=t.length,i=e,r=Ra(h),a=_n(),o=a===n,s=[];i--;){var l=t[i]=Kn(l=t[i])?l:[];r[i]=o&&l.length>=120?pn(i&&l):null}var u=t[0],c=-1,h=u?u.length:0,d=r[0];t:for(;++c<h;)if(l=u[c],(d?Kt(d,l):a(s,l,0))<0){for(var i=e;--i;){var f=r[i];if((f?Kt(f,l):a(t[i],l,0))<0)continue t}d&&d.push(l),s.push(l)}return s}),Ho=vr(function(e,n){n=je(n);var i=ye(e,n);return Xe(e,n.sort(t)),i}),Jo=Gn(),Qo=Gn(!0),Ko=vr(function(t){return $e(je(t,!1,!0))}),qo=vr(function(t,e){return Kn(t)?Ae(t,e):[]}),$o=vr(Zi),ts=vr(function(t){var e=t.length,n=e>2?t[e-2]:w,i=e>1?t[e-1]:w;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof i?(--e,i):w,i=w),t.length=e,Li(t,n,i)}),es=vr(function(t){return t=je(t),this.thru(function(e){return ee(js(e)?e:[hi(e)],t)})}),ns=vr(function(t,e){return ye(t,je(e))}),is=cn(function(t,e,n){to.call(t,n)?++t[n]:t[n]=1}),rs=Cn(Go),as=Cn(Zo,!0),os=Nn(ie,Go),ss=Nn(re,Zo),ls=cn(function(t,e,n){to.call(t,n)?t[n].push(e):t[n]=[e]}),us=cn(function(t,e,n){t[n]=e}),cs=vr(function(t,e,n){var i=-1,r="function"==typeof e,a=ti(e),o=Kn(t)?Ra(t.length):[];return Go(t,function(t){var s=r?e:a&&null!=t?t[e]:w;o[++i]=s?s.apply(t,n):Qn(t,e,n)}),o}),hs=cn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),ds=En(ce,Go),fs=En(he,Zo),gs=vr(function(t,e){if(null==t)return[];var n=e[2];return n&&$n(e[0],e[1],n)&&(e.length=1),Ke(t,je(e),[])}),ps=xo||function(){return(new Wa).getTime()},ms=vr(function(t,e,n){var i=x;if(n.length){var r=m(n,ms.placeholder);i|=j}return Zn(t,i,e,n,r)}),vs=vr(function(t,e){e=e.length?je(e):Qr(t);for(var n=-1,i=e.length;++n<i;){var r=e[n];t[r]=Zn(t[r],x,t)}return t}),ys=vr(function(t,e,n){var i=x|N;if(n.length){var r=m(n,ys.placeholder);i|=j}return Zn(e,i,t,n,r)}),Is=yn(k),bs=yn(T),Cs=vr(function(t,e){return we(t,1,e)}),ws=vr(function(t,e,n){return we(t,e,n)}),As=xn(),xs=xn(!0),Ns=vr(function(t,e){if(e=je(e),"function"!=typeof t||!ae(e,i))throw new Ja(R);var n=e.length;return vr(function(i){for(var r=Ao(i.length,n);r--;)i[r]=e[r](i[r]);return t.apply(this,i)})}),Ms=Dn(j),ks=Dn(D),Ts=vr(function(t,e){return Zn(t,B,w,w,w,je(e))}),js=Io||function(t){return g(t)&&ni(t.length)&&no.call(t)==_},Ds=hn(We),Es=hn(function(t,e,n){return n?me(t,e,n):ve(t,e)}),Bs=In(Es,ge),zs=In(Ds,ai),Ss=An(Ee),Ps=An(Be),Gs=Mn(Lo),Zs=Mn(Oo),Ls=kn(Ee),Os=kn(Be),Rs=Co?function(t){var e=null==t?w:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Kn(t)?ui(t):Sr(t)?Co(t):[]}:ui,Ws=Tn(!0),Ys=Tn(),_s=vr(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=le(je(e),Ha);return oi(t,Ae(ta(t),e))}var n=on(e[0],e[1],3);return si(t,function(t,e,i){return!n(t,e,i)})}),Vs=vr(function(t,e){return null==t?{}:"function"==typeof e[0]?si(t,on(e[0],e[1],3)):oi(t,je(e))}),Xs=mn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Us=mn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Fs=jn(),Hs=jn(!0),Js=mn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Qs=mn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Ks=vr(function(t,e){try{return t.apply(w,e)}catch(n){return Er(n)?n:new Ya(n)}}),qs=vr(function(t,e){return function(n){return Qn(n,t,e)}}),$s=vr(function(t,e){return function(n){return Qn(t,n,e)}}),tl=Pn("ceil"),el=Pn("floor"),nl=bn(Ar,ko),il=bn(Xr,To),rl=Pn("round");return H.prototype=q.prototype,tt.prototype=Po(q.prototype),tt.prototype.constructor=tt,Wt.prototype=Po(q.prototype),Wt.prototype.constructor=Wt,Xt.prototype["delete"]=Ut,Xt.prototype.get=Ft,Xt.prototype.has=Ht,Xt.prototype.set=Jt,Qt.prototype.push=qt,gr.Cache=Xt,H.after=cr,H.ary=hr,H.assign=Es,H.at=ns,H.before=dr,H.bind=ms,H.bindAll=vs,H.bindKey=ys,H.callback=Na,H.chain=Wi,H.chunk=gi,H.compact=pi,H.constant=Ma,H.countBy=is,H.create=Jr,H.curry=Is,H.curryRight=bs,H.debounce=fr,H.defaults=Bs,H.defaultsDeep=zs,H.defer=Cs,H.delay=ws,H.difference=Vo,H.drop=mi,H.dropRight=vi,H.dropRightWhile=yi,H.dropWhile=Ii,H.fill=bi,H.filter=Ki,H.flatten=wi,H.flattenDeep=Ai,H.flow=As,H.flowRight=xs,H.forEach=os,H.forEachRight=ss,H.forIn=Gs,H.forInRight=Zs,H.forOwn=Ls,H.forOwnRight=Os,H.functions=Qr,H.groupBy=ls,H.indexBy=us,H.initial=Ni,H.intersection=Fo,H.invert=$r,H.invoke=cs,H.keys=Rs,H.keysIn=ta,H.map=tr,H.mapKeys=Ws,H.mapValues=Ys,H.matches=Ta,H.matchesProperty=ja,H.memoize=gr,H.merge=Ds,H.method=qs,H.methodOf=$s,H.mixin=Da,H.modArgs=Ns,H.negate=pr,H.omit=_s,H.once=mr,H.pairs=ea,H.partial=Ms,H.partialRight=ks,H.partition=hs,H.pick=Vs,H.pluck=er,H.property=za,H.propertyOf=Sa,H.pull=Ti,H.pullAt=Ho,H.range=Pa,H.rearg=Ts,H.reject=nr,H.remove=ji,H.rest=Di,H.restParam=vr,H.set=ia,H.shuffle=rr,H.slice=Ei,H.sortBy=sr,H.sortByAll=gs,H.sortByOrder=lr,H.spread=yr,H.take=Bi,H.takeRight=zi,H.takeRightWhile=Si,H.takeWhile=Pi,H.tap=Yi,H.throttle=Ir,H.thru=_i,H.times=Ga,H.toArray=Fr,H.toPlainObject=Hr,H.transform=ra,H.union=Ko,H.uniq=Gi,H.unzip=Zi,H.unzipWith=Li,H.values=aa,H.valuesIn=oa,H.where=ur,H.without=qo,H.wrap=br,H.xor=Oi,H.zip=$o,H.zipObject=Ri,H.zipWith=ts,H.backflow=xs,H.collect=tr,H.compose=xs,H.each=os,H.eachRight=ss,H.extend=Es,H.iteratee=Na,H.methods=Qr,H.object=Ri,H.select=Ki,H.tail=Di,H.unique=Gi,Da(H,H),H.add=La,H.attempt=Ks,H.camelCase=Xs,H.capitalize=ua,H.ceil=tl,H.clone=Cr,H.cloneDeep=wr,H.deburr=ca,H.endsWith=ha,H.escape=da,H.escapeRegExp=fa,H.every=Qi,H.find=rs,H.findIndex=Xo,H.findKey=Ss,H.findLast=as,H.findLastIndex=Uo,H.findLastKey=Ps,H.findWhere=qi,H.first=Ci,H.floor=el,H.get=Kr,H.gt=Ar,H.gte=xr,H.has=qr,H.identity=ka,H.includes=$i,H.indexOf=xi,H.inRange=sa,H.isArguments=Nr,H.isArray=js,H.isBoolean=Mr,H.isDate=kr,H.isElement=Tr,H.isEmpty=jr,H.isEqual=Dr,H.isError=Er,H.isFinite=Br,H.isFunction=zr,H.isMatch=Pr,H.isNaN=Gr,H.isNative=Zr,H.isNull=Lr,H.isNumber=Or,H.isObject=Sr,H.isPlainObject=Rr,H.isRegExp=Wr,H.isString=Yr,H.isTypedArray=_r,H.isUndefined=Vr,H.kebabCase=Us,H.last=Mi,H.lastIndexOf=ki,H.lt=Xr,H.lte=Ur,H.max=nl,H.min=il,H.noConflict=Ea,H.noop=Ba,H.now=ps,H.pad=ga,H.padLeft=Fs,H.padRight=Hs,H.parseInt=pa,H.random=la,H.reduce=ds,H.reduceRight=fs,H.repeat=ma,H.result=na,H.round=rl,H.runInContext=C,H.size=ar,H.snakeCase=Js,H.some=or,H.sortedIndex=Jo,H.sortedLastIndex=Qo,H.startCase=Qs,H.startsWith=va,H.sum=Oa,H.template=ya,H.trim=Ia,H.trimLeft=ba,H.trimRight=Ca,H.trunc=wa,H.unescape=Aa,H.uniqueId=Za,H.words=xa,H.all=Qi,H.any=or,H.contains=$i,H.eq=Dr,H.detect=rs,H.foldl=ds,H.foldr=fs,H.head=Ci,H.include=$i,H.inject=ds,Da(H,function(){var t={};return Ee(H,function(e,n){H.prototype[n]||(t[n]=e)}),t}(),!1),H.sample=ir,H.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ir(e,t)}):ir(this.value())},H.VERSION=A,ie(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){H[t].placeholder=H}),ie(["drop","take"],function(t,e){Wt.prototype[t]=function(n){var i=this.__filtered__;if(i&&!e)return new Wt(this);n=null==n?1:wo(yo(n)||0,0);var r=this.clone();return i?r.__takeCount__=Ao(r.__takeCount__,n):r.__views__.push({size:n,type:t+(r.__dir__<0?"Right":"")}),r},Wt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ie(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n!=O;Wt.prototype[t]=function(t,e){var r=this.clone();return r.__iteratees__.push({iteratee:Wn(t,e,1),type:n}),r.__filtered__=r.__filtered__||i,r}}),ie(["first","last"],function(t,e){var n="take"+(e?"Right":"");Wt.prototype[t]=function(){return this[n](1).value()[0]}}),ie(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");Wt.prototype[t]=function(){return this.__filtered__?new Wt(this):this[n](1)}}),ie(["pluck","where"],function(t,e){var n=e?"filter":"map",i=e?Oe:za;Wt.prototype[t]=function(t){return this[n](i(t))}}),Wt.prototype.compact=function(){return this.filter(ka)},Wt.prototype.reject=function(t,e){return t=Wn(t,e,1),this.filter(function(e){return!t(e)})},Wt.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||0>e)?new Wt(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==w&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n)},Wt.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},Wt.prototype.toArray=function(){return this.take(To)},Ee(Wt.prototype,function(t,e){var n=/^(?:filter|map|reject)|While$/.test(e),i=/^(?:first|last)$/.test(e),r=H[i?"take"+("last"==e?"Right":""):e];r&&(H.prototype[e]=function(){var e=i?[1]:arguments,a=this.__chain__,o=this.__wrapped__,s=!!this.__actions__.length,l=o instanceof Wt,u=e[0],c=l||js(o);c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var h=function(t){return i&&a?r(t,1)[0]:r.apply(w,ue([t],e))},d={func:_i,args:[h],thisArg:w},f=l&&!s;if(i&&!a)return f?(o=o.clone(),o.__actions__.push(d),t.call(o)):r.call(w,this.value())[0];if(!i&&c){o=f?o:new Wt(this);var g=t.apply(o,e);return g.__actions__.push(d),new tt(g,a)}return this.thru(h)})}),ie(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?qa:Qa)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);H.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?e.apply(this.value(),t):this[n](function(n){return e.apply(n,t)})}}),Ee(Wt.prototype,function(t,e){var n=H[e];if(n){var i=n.name+"",r=So[i]||(So[i]=[]);r.push({name:e,func:n})}}),So[Bn(w,N).name]=[{name:"wrapper",func:w}],Wt.prototype.clone=Yt,Wt.prototype.reverse=_t,Wt.prototype.value=Vt,H.prototype.chain=Vi,H.prototype.commit=Xi,H.prototype.concat=es,H.prototype.plant=Ui,H.prototype.reverse=Fi,H.prototype.toString=Hi,H.prototype.run=H.prototype.toJSON=H.prototype.valueOf=H.prototype.value=Ji,H.prototype.collect=H.prototype.map,H.prototype.head=H.prototype.first,H.prototype.select=H.prototype.filter,H.prototype.tail=H.prototype.rest,H}var w,A="3.10.1",x=1,N=2,M=4,k=8,T=16,j=32,D=64,E=128,B=256,z=30,S="...",P=150,G=16,Z=200,L=1,O=2,R="Expected a function",W="__lodash_placeholder__",Y="[object Arguments]",_="[object Array]",V="[object Boolean]",X="[object Date]",U="[object Error]",F="[object Function]",H="[object Map]",J="[object Number]",Q="[object Object]",K="[object RegExp]",q="[object Set]",$="[object String]",tt="[object WeakMap]",et="[object ArrayBuffer]",nt="[object Float32Array]",it="[object Float64Array]",rt="[object Int8Array]",at="[object Int16Array]",ot="[object Int32Array]",st="[object Uint8Array]",lt="[object Uint8ClampedArray]",ut="[object Uint16Array]",ct="[object Uint32Array]",ht=/\b__p \+= '';/g,dt=/\b(__p \+=) '' \+/g,ft=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gt=/&(?:amp|lt|gt|quot|#39|#96);/g,pt=/[&<>"'`]/g,mt=RegExp(gt.source),vt=RegExp(pt.source),yt=/<%-([\s\S]+?)%>/g,It=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,Ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,wt=/^\w*$/,At=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,xt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Nt=RegExp(xt.source),Mt=/[\u0300-\u036f\ufe20-\ufe23]/g,kt=/\\(\\)?/g,Tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jt=/\w*$/,Dt=/^0[xX]/,Et=/^\[object .+?Constructor\]$/,Bt=/^\d+$/,zt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,St=/($^)/,Pt=/['\n\r\u2028\u2029\\]/g,Gt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Zt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Lt=-1,Ot={};Ot[nt]=Ot[it]=Ot[rt]=Ot[at]=Ot[ot]=Ot[st]=Ot[lt]=Ot[ut]=Ot[ct]=!0,Ot[Y]=Ot[_]=Ot[et]=Ot[V]=Ot[X]=Ot[U]=Ot[F]=Ot[H]=Ot[J]=Ot[Q]=Ot[K]=Ot[q]=Ot[$]=Ot[tt]=!1;var Rt={};Rt[Y]=Rt[_]=Rt[et]=Rt[V]=Rt[X]=Rt[nt]=Rt[it]=Rt[rt]=Rt[at]=Rt[ot]=Rt[J]=Rt[Q]=Rt[K]=Rt[$]=Rt[st]=Rt[lt]=Rt[ut]=Rt[ct]=!0,Rt[U]=Rt[F]=Rt[H]=Rt[q]=Rt[tt]=!1;var Wt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Yt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},_t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Vt={"function":!0,object:!0},Xt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ft=Vt[typeof exports]&&exports&&!exports.nodeType&&exports,Ht=Vt[typeof module]&&module&&!module.nodeType&&module,Jt=Ft&&Ht&&"object"==typeof global&&global&&global.Object&&global,Qt=Vt[typeof self]&&self&&self.Object&&self,Kt=Vt[typeof window]&&window&&window.Object&&window,qt=Ht&&Ht.exports===Ft&&Ft,$t=Jt||Kt!==(this&&this.window)&&Kt||Qt||this,te=C();"function"==typeof define&&"object"==typeof define.amd&&define.amd?($t._=te,define(function(){return te})):Ft&&Ht?qt?(Ht.exports=te)._=te:Ft._=te:$t._=te}.call(this),function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){(function(e){e.graphlib=t("./index")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./index":2}],2:[function(t,e,n){var i=t("./lib");e.exports={Graph:i.Graph,json:t("./lib/json"),alg:t("./lib/alg"),version:i.version}},{"./lib":18,"./lib/alg":9,"./lib/json":19}],3:[function(t,e,n){function i(t){function e(a){r.has(i,a)||(i[a]=!0,n.push(a),r.each(t.successors(a),e),r.each(t.predecessors(a),e))}var n,i={},a=[];return r.each(t.nodes(),function(t){n=[],e(t),n.length&&a.push(n)}),a}var r=t("../lodash");e.exports=i},{"../lodash":20}],4:[function(t,e,n){function i(t,e,n){a.isArray(e)||(e=[e]);var i=[],o={};return a.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);r(t,e,"post"===n,o,i)}),i}function r(t,e,n,i,o){a.has(i,e)||(i[e]=!0,n||o.push(e),a.each(t.neighbors(e),function(e){r(t,e,n,i,o)}),n&&o.push(e))}var a=t("../lodash");e.exports=i},{"../lodash":20}],5:[function(t,e,n){function i(t,e,n){return a.transform(t.nodes(),function(i,a){i[a]=r(t,a,e,n)},{})}var r=t("./dijkstra"),a=t("../lodash");e.exports=i},{"../lodash":20,"./dijkstra":6}],6:[function(t,e,n){function i(t,e,n,i){return r(t,String(e),n||s,i||function(e){return t.outEdges(e)})}function r(t,e,n,i){var r,a,s={},l=new o,u=function(t){var e=t.v!==r?t.v:t.w,i=s[e],o=n(t),u=a.distance+o;
if(0>o)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+o);u<i.distance&&(i.distance=u,i.predecessor=r,l.decrease(e,u))};for(t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:n},l.add(t,n)});l.size()>0&&(r=l.removeMin(),a=s[r],a.distance!==Number.POSITIVE_INFINITY);)i(r).forEach(u);return s}var a=t("../lodash"),o=t("../data/priority-queue");e.exports=i;var s=a.constant(1)},{"../data/priority-queue":16,"../lodash":20}],7:[function(t,e,n){function i(t){return r.filter(a(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}var r=t("../lodash"),a=t("./tarjan");e.exports=i},{"../lodash":20,"./tarjan":14}],8:[function(t,e,n){function i(t,e,n){return r(t,e||o,n||function(e){return t.outEdges(e)})}function r(t,e,n){var i={},r=t.nodes();return r.forEach(function(t){i[t]={},i[t][t]={distance:0},r.forEach(function(e){t!==e&&(i[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var r=n.v===t?n.w:n.v,a=e(n);i[t][r]={distance:a,predecessor:t}})}),r.forEach(function(t){var e=i[t];r.forEach(function(n){var a=i[n];r.forEach(function(n){var i=a[t],r=e[n],o=a[n],s=i.distance+r.distance;s<o.distance&&(o.distance=s,o.predecessor=r.predecessor)})})}),i}var a=t("../lodash");e.exports=i;var o=a.constant(1)},{"../lodash":20}],9:[function(t,e,n){e.exports={components:t("./components"),dijkstra:t("./dijkstra"),dijkstraAll:t("./dijkstra-all"),findCycles:t("./find-cycles"),floydWarshall:t("./floyd-warshall"),isAcyclic:t("./is-acyclic"),postorder:t("./postorder"),preorder:t("./preorder"),prim:t("./prim"),tarjan:t("./tarjan"),topsort:t("./topsort")}},{"./components":3,"./dijkstra":6,"./dijkstra-all":5,"./find-cycles":7,"./floyd-warshall":8,"./is-acyclic":10,"./postorder":11,"./preorder":12,"./prim":13,"./tarjan":14,"./topsort":15}],10:[function(t,e,n){function i(t){try{r(t)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}var r=t("./topsort");e.exports=i},{"./topsort":15}],11:[function(t,e,n){function i(t,e){return r(t,e,"post")}var r=t("./dfs");e.exports=i},{"./dfs":4}],12:[function(t,e,n){function i(t,e){return r(t,e,"pre")}var r=t("./dfs");e.exports=i},{"./dfs":4}],13:[function(t,e,n){function i(t,e){function n(t){var n=t.v===i?t.w:t.v,r=u.priority(n);if(void 0!==r){var a=e(t);r>a&&(l[n]=i,u.decrease(n,a))}}var i,s=new a,l={},u=new o;if(0===t.nodeCount())return s;r.each(t.nodes(),function(t){u.add(t,Number.POSITIVE_INFINITY),s.setNode(t)}),u.decrease(t.nodes()[0],0);for(var c=!1;u.size()>0;){if(i=u.removeMin(),r.has(l,i))s.setEdge(i,l[i]);else{if(c)throw new Error("Input graph is not connected: "+t);c=!0}t.nodeEdges(i).forEach(n)}return s}var r=t("../lodash"),a=t("../graph"),o=t("../data/priority-queue");e.exports=i},{"../data/priority-queue":16,"../graph":17,"../lodash":20}],14:[function(t,e,n){function i(t){function e(s){var l=a[s]={onStack:!0,lowlink:n,index:n++};if(i.push(s),t.successors(s).forEach(function(t){r.has(a,t)?a[t].onStack&&(l.lowlink=Math.min(l.lowlink,a[t].index)):(e(t),l.lowlink=Math.min(l.lowlink,a[t].lowlink))}),l.lowlink===l.index){var u,c=[];do u=i.pop(),a[u].onStack=!1,c.push(u);while(s!==u);o.push(c)}}var n=0,i=[],a={},o=[];return t.nodes().forEach(function(t){r.has(a,t)||e(t)}),o}var r=t("../lodash");e.exports=i},{"../lodash":20}],15:[function(t,e,n){function i(t){function e(s){if(a.has(i,s))throw new r;a.has(n,s)||(i[s]=!0,n[s]=!0,a.each(t.predecessors(s),e),delete i[s],o.push(s))}var n={},i={},o=[];if(a.each(t.sinks(),e),a.size(n)!==t.nodeCount())throw new r;return o}function r(){}var a=t("../lodash");e.exports=i,i.CycleException=r},{"../lodash":20}],16:[function(t,e,n){function i(){this._arr=[],this._keyIndices={}}var r=t("../lodash");e.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(t){return t.key})},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];return void 0!==e?this._arr[e].priority:void 0},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var i=this._arr,a=i.length;return n[t]=a,i.push({key:t,priority:e}),this._decrease(a),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,i=n+1,r=t;n<e.length&&(r=e[n].priority<e[r].priority?n:r,i<e.length&&(r=e[i].priority<e[r].priority?i:r),r!==t&&(this._swap(t,r),this._heapify(r)))},i.prototype._decrease=function(t){for(var e,n=this._arr,i=n[t].priority;0!==t&&(e=t>>1,!(n[e].priority<i));)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var n=this._arr,i=this._keyIndices,r=n[t],a=n[e];n[t]=a,n[e]=r,i[a.key]=t,i[r.key]=e}},{"../lodash":20}],17:[function(t,e,n){"use strict";function i(t){this._isDirected=u.has(t,"directed")?t.directed:!0,this._isMultigraph=u.has(t,"multigraph")?t.multigraph:!1,this._isCompound=u.has(t,"compound")?t.compound:!1,this._label=void 0,this._defaultNodeLabelFn=u.constant(void 0),this._defaultEdgeLabelFn=u.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[h]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function r(t,e){t[e]?t[e]++:t[e]=1}function a(t,e){--t[e]||delete t[e]}function o(t,e,n,i){var r=""+e,a=""+n;if(!t&&r>a){var o=r;r=a,a=o}return r+d+a+d+(u.isUndefined(i)?c:i)}function s(t,e,n,i){var r=""+e,a=""+n;if(!t&&r>a){var o=r;r=a,a=o}var s={v:r,w:a};return i&&(s.name=i),s}function l(t,e){return o(t,e.v,e.w,e.name)}var u=t("./lodash");e.exports=i;var c="\x00",h="\x00",d="";i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(t){return this._label=t,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(t){return u.isFunction(t)||(t=u.constant(t)),this._defaultNodeLabelFn=t,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return u.keys(this._nodes)},i.prototype.sources=function(){return u.filter(this.nodes(),function(t){return u.isEmpty(this._in[t])},this)},i.prototype.sinks=function(){return u.filter(this.nodes(),function(t){return u.isEmpty(this._out[t])},this)},i.prototype.setNodes=function(t,e){var n=arguments;return u.each(t,function(t){n.length>1?this.setNode(t,e):this.setNode(t)},this),this},i.prototype.setNode=function(t,e){return u.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=h,this._children[t]={},this._children[h][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},i.prototype.node=function(t){return this._nodes[t]},i.prototype.hasNode=function(t){return u.has(this._nodes,t)},i.prototype.removeNode=function(t){var e=this;if(u.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],u.each(this.children(t),function(t){this.setParent(t)},this),delete this._children[t]),u.each(u.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],u.each(u.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},i.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(u.isUndefined(e))e=h;else{e+="";for(var n=e;!u.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},i.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},i.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==h)return e}},i.prototype.children=function(t){if(u.isUndefined(t)&&(t=h),this._isCompound){var e=this._children[t];if(e)return u.keys(e)}else{if(t===h)return this.nodes();if(this.hasNode(t))return[]}},i.prototype.predecessors=function(t){var e=this._preds[t];return e?u.keys(e):void 0},i.prototype.successors=function(t){var e=this._sucs[t];return e?u.keys(e):void 0},i.prototype.neighbors=function(t){var e=this.predecessors(t);return e?u.union(e,this.successors(t)):void 0},i.prototype.filterNodes=function(t){function e(t){var a=i.parent(t);return void 0===a||n.hasNode(a)?(r[t]=a,a):a in r?r[a]:e(a)}var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph()),u.each(this._nodes,function(e,i){t(i)&&n.setNode(i,e)},this),u.each(this._edgeObjs,function(t){n.hasNode(t.v)&&n.hasNode(t.w)&&n.setEdge(t,this.edge(t))},this);var i=this,r={};return this._isCompound&&u.each(n.nodes(),function(t){n.setParent(t,e(t))}),n},i.prototype.setDefaultEdgeLabel=function(t){return u.isFunction(t)||(t=u.constant(t)),this._defaultEdgeLabelFn=t,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return u.values(this._edgeObjs)},i.prototype.setPath=function(t,e){var n=this,i=arguments;return u.reduce(t,function(t,r){return i.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r}),this},i.prototype.setEdge=function(){var t,e,n,i,a=!1,l=arguments[0];"object"==typeof l&&null!==l&&"v"in l?(t=l.v,e=l.w,n=l.name,2===arguments.length&&(i=arguments[1],a=!0)):(t=l,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],a=!0)),t=""+t,e=""+e,u.isUndefined(n)||(n=""+n);var c=o(this._isDirected,t,e,n);if(u.has(this._edgeLabels,c))return a&&(this._edgeLabels[c]=i),this;if(!u.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[c]=a?i:this._defaultEdgeLabelFn(t,e,n);var h=s(this._isDirected,t,e,n);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[c]=h,r(this._preds[e],t),r(this._sucs[t],e),this._in[e][c]=h,this._out[t][c]=h,this._edgeCount++,this},i.prototype.edge=function(t,e,n){var i=1===arguments.length?l(this._isDirected,arguments[0]):o(this._isDirected,t,e,n);return this._edgeLabels[i]},i.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?l(this._isDirected,arguments[0]):o(this._isDirected,t,e,n);return u.has(this._edgeLabels,i)},i.prototype.removeEdge=function(t,e,n){var i=1===arguments.length?l(this._isDirected,arguments[0]):o(this._isDirected,t,e,n),r=this._edgeObjs[i];return r&&(t=r.v,e=r.w,delete this._edgeLabels[i],delete this._edgeObjs[i],a(this._preds[e],t),a(this._sucs[t],e),delete this._in[e][i],delete this._out[t][i],this._edgeCount--),this},i.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=u.values(n);return e?u.filter(i,function(t){return t.v===e}):i}},i.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=u.values(n);return e?u.filter(i,function(t){return t.w===e}):i}},i.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);return n?n.concat(this.outEdges(t,e)):void 0}},{"./lodash":20}],18:[function(t,e,n){e.exports={Graph:t("./graph"),version:t("./version")}},{"./graph":17,"./version":21}],19:[function(t,e,n){function i(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:r(t),edges:a(t)};return s.isUndefined(t.graph())||(e.value=s.clone(t.graph())),e}function r(t){return s.map(t.nodes(),function(e){var n=t.node(e),i=t.parent(e),r={v:e};return s.isUndefined(n)||(r.value=n),s.isUndefined(i)||(r.parent=i),r})}function a(t){return s.map(t.edges(),function(e){var n=t.edge(e),i={v:e.v,w:e.w};return s.isUndefined(e.name)||(i.name=e.name),s.isUndefined(n)||(i.value=n),i})}function o(t){var e=new l(t.options).setGraph(t.value);return s.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),s.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}var s=t("./lodash"),l=t("./graph");e.exports={write:i,read:o}},{"./graph":17,"./lodash":20}],20:[function(t,e,n){var i;if("function"==typeof t)try{i=t("lodash")}catch(r){}i||(i=window._),e.exports=i},{lodash:void 0}],21:[function(t,e,n){e.exports="1.0.7"},{}]},{},[1]),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.dagre=t()}}(function(){return function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){e.exports={graphlib:t("./lib/graphlib"),layout:t("./lib/layout"),debug:t("./lib/debug"),util:{time:t("./lib/util").time,notime:t("./lib/util").notime},version:t("./lib/version")}},{"./lib/debug":6,"./lib/graphlib":7,"./lib/layout":9,"./lib/util":29,"./lib/version":30}],2:[function(t,e,n){"use strict";function i(t){function e(t){return function(e){return t.edge(e).weight}}var n="greedy"===t.graph().acyclicer?s(t,e(t)):r(t);o.each(n,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,o.uniqueId("rev"))})}function r(t){function e(a){o.has(r,a)||(r[a]=!0,i[a]=!0,o.each(t.outEdges(a),function(t){o.has(i,t.w)?n.push(t):e(t.w)}),delete i[a])}var n=[],i={},r={};return o.each(t.nodes(),e),n}function a(t){o.each(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var i=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,i)}})}var o=t("./lodash"),s=t("./greedy-fas");e.exports={run:i,undo:a}},{"./greedy-fas":8,"./lodash":10}],3:[function(t,e,n){function i(t){function e(n){var i=t.children(n),o=t.node(n);if(i.length&&a.each(i,e),a.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var s=o.minRank,l=o.maxRank+1;l>s;++s)r(t,"borderLeft","_bl",n,o,s),r(t,"borderRight","_br",n,o,s)}}a.each(t.children(),e)}function r(t,e,n,i,r,a){var s={width:0,height:0,rank:a,borderType:e},l=r[e][a-1],u=o.addDummyNode(t,"border",s,n);r[e][a]=u,t.setParent(u,i),l&&t.setEdge(l,u,{weight:1})}var a=t("./lodash"),o=t("./util");e.exports=i},{"./lodash":10,"./util":29}],4:[function(t,e,n){"use strict";function i(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||a(t)}function r(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||s(t),"lr"!==e&&"rl"!==e||(u(t),a(t))}function a(t){h.each(t.nodes(),function(e){o(t.node(e))}),h.each(t.edges(),function(e){o(t.edge(e))})}function o(t){var e=t.width;t.width=t.height,t.height=e}function s(t){h.each(t.nodes(),function(e){l(t.node(e))}),h.each(t.edges(),function(e){var n=t.edge(e);h.each(n.points,l),h.has(n,"y")&&l(n)})}function l(t){t.y=-t.y}function u(t){h.each(t.nodes(),function(e){c(t.node(e))}),h.each(t.edges(),function(e){var n=t.edge(e);h.each(n.points,c),h.has(n,"x")&&c(n)})}function c(t){var e=t.x;t.x=t.y,t.y=e}var h=t("./lodash");e.exports={adjust:i,undo:r}},{"./lodash":10}],5:[function(t,e,n){function i(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function a(t,e){return"_next"!==t&&"_prev"!==t?e:void 0}e.exports=i,i.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;return e!==t?(r(e),e):void 0},i.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},i.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,a)),n=n._prev;return"["+t.join(", ")+"]"}},{}],6:[function(t,e,n){function i(t){var e=a.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.each(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),r.each(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),r.each(e,function(t,e){var i="layer"+e;n.setNode(i,{rank:"same"}),r.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}var r=t("./lodash"),a=t("./util"),o=t("./graphlib").Graph;e.exports={debugOrdering:i}},{"./graphlib":7,"./lodash":10,"./util":29}],7:[function(t,e,n){var i;if("function"==typeof t)try{i=t("graphlib")}catch(r){}i||(i=window.graphlib),e.exports=i},{graphlib:void 0}],8:[function(t,e,n){function i(t,e){if(t.nodeCount()<=1)return[];var n=o(t,e||h),i=r(n.graph,n.buckets,n.zeroIdx);return l.flatten(l.map(i,function(e){return t.outEdges(e.v,e.w)}),!0)}function r(t,e,n){for(var i,r=[],o=e[e.length-1],s=e[0];t.nodeCount();){for(;i=s.dequeue();)a(t,e,n,i);for(;i=o.dequeue();)a(t,e,n,i);if(t.nodeCount())for(var l=e.length-2;l>0;--l)if(i=e[l].dequeue()){r=r.concat(a(t,e,n,i,!0));break}}return r}function a(t,e,n,i,r){var a=r?[]:void 0;return l.each(t.inEdges(i.v),function(i){var o=t.edge(i),l=t.node(i.v);r&&a.push({v:i.v,w:i.w}),l.out-=o,s(e,n,l)}),l.each(t.outEdges(i.v),function(i){var r=t.edge(i),a=i.w,o=t.node(a);o["in"]-=r,s(e,n,o)}),t.removeNode(i.v),a}function o(t,e){var n=new u,i=0,r=0;l.each(t.nodes(),function(t){n.setNode(t,{v:t,"in":0,out:0})}),l.each(t.edges(),function(t){var a=n.edge(t.v,t.w)||0,o=e(t),s=a+o;n.setEdge(t.v,t.w,s),r=Math.max(r,n.node(t.v).out+=o),i=Math.max(i,n.node(t.w)["in"]+=o)});var a=l.range(r+i+3).map(function(){return new c}),o=i+1;return l.each(n.nodes(),function(t){s(a,o,n.node(t))}),{graph:n,buckets:a,zeroIdx:o}}function s(t,e,n){n.out?n["in"]?t[n.out-n["in"]+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var l=t("./lodash"),u=t("./graphlib").Graph,c=t("./data/list");e.exports=i;var h=l.constant(1)},{"./data/list":5,"./graphlib":7,"./lodash":10}],9:[function(t,e,n){"use strict";function i(t,e){var n=e&&e.debugTiming?z.time:z.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return o(t)});n("  runLayout",function(){r(e,n)}),n("  updateInputGraph",function(){a(t,e)})})}function r(t,e){e("    makeSpaceForEdgeLabels",function(){s(t)}),e("    removeSelfEdges",function(){m(t)}),e("    acyclic",function(){w.run(t)}),e("    nestingGraph.run",function(){T.run(t)}),e("    rank",function(){x(z.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){l(t)}),e("    removeEmptyRanks",function(){k(t)}),e("    nestingGraph.cleanup",function(){T.cleanup(t)}),e("    normalizeRanks",function(){N(t)}),e("    assignRankMinMax",function(){u(t)}),e("    removeEdgeLabelProxies",function(){c(t)}),e("    normalize.run",function(){A.run(t)}),e("    parentDummyChains",function(){M(t)}),e("    addBorderSegments",function(){j(t)}),e("    order",function(){E(t)}),e("    insertSelfEdges",function(){v(t)}),e("    adjustCoordinateSystem",function(){D.adjust(t)}),e("    position",function(){B(t)}),e("    positionSelfEdges",function(){y(t)}),e("    removeBorderNodes",function(){p(t)}),e("    normalize.undo",function(){A.undo(t)}),e("    fixupEdgeLabelCoords",function(){f(t)}),e("    undoCoordinateSystem",function(){D.undo(t)}),e("    translateGraph",function(){h(t)}),e("    assignNodeIntersects",function(){d(t)}),e("    reversePoints",function(){g(t)}),e("    acyclic.undo",function(){w.undo(t)})}function a(t,e){C.each(t.nodes(),function(n){var i=t.node(n),r=e.node(n);i&&(i.x=r.x,i.y=r.y,e.children(n).length&&(i.width=r.width,i.height=r.height))}),C.each(t.edges(),function(n){var i=t.edge(n),r=e.edge(n);i.points=r.points,C.has(r,"x")&&(i.x=r.x,i.y=r.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}function o(t){var e=new S({multigraph:!0,compound:!0}),n=b(t.graph());return e.setGraph(C.merge({},G,I(n,P),C.pick(n,Z))),C.each(t.nodes(),function(n){var i=b(t.node(n));e.setNode(n,C.defaults(I(i,L),O)),e.setParent(n,t.parent(n))}),C.each(t.edges(),function(n){var i=b(t.edge(n));e.setEdge(n,C.merge({},W,I(i,R),C.pick(i,Y)))}),e}function s(t){var e=t.graph();e.ranksep/=2,C.each(t.edges(),function(n){var i=t.edge(n);i.minlen*=2,"c"!==i.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?i.width+=i.labeloffset:i.height+=i.labeloffset)})}function l(t){C.each(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var i=t.node(e.v),r=t.node(e.w),a={rank:(r.rank-i.rank)/2+i.rank,e:e};z.addDummyNode(t,"edge-proxy",a,"_ep")}})}function u(t){var e=0;C.each(t.nodes(),function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=C.max(e,i.maxRank))}),t.graph().maxRank=e}function c(t){C.each(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function h(t){function e(t){var e=t.x,o=t.y,s=t.width,l=t.height;n=Math.min(n,e-s/2),i=Math.max(i,e+s/2),r=Math.min(r,o-l/2),a=Math.max(a,o+l/2)}var n=Number.POSITIVE_INFINITY,i=0,r=Number.POSITIVE_INFINITY,a=0,o=t.graph(),s=o.marginx||0,l=o.marginy||0;C.each(t.nodes(),function(n){e(t.node(n))}),C.each(t.edges(),function(n){var i=t.edge(n);C.has(i,"x")&&e(i)}),n-=s,r-=l,C.each(t.nodes(),function(e){var i=t.node(e);i.x-=n,i.y-=r}),C.each(t.edges(),function(e){var i=t.edge(e);C.each(i.points,function(t){t.x-=n,t.y-=r}),C.has(i,"x")&&(i.x-=n),C.has(i,"y")&&(i.y-=r)}),o.width=i-n+s,o.height=a-r+l}function d(t){C.each(t.edges(),function(e){var n,i,r=t.edge(e),a=t.node(e.v),o=t.node(e.w);r.points?(n=r.points[0],i=r.points[r.points.length-1]):(r.points=[],n=o,i=a),r.points.unshift(z.intersectRect(a,n)),r.points.push(z.intersectRect(o,i))})}function f(t){C.each(t.edges(),function(e){var n=t.edge(e);if(C.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}function g(t){C.each(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}function p(t){C.each(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),r=t.node(n.borderBottom),a=t.node(C.last(n.borderLeft)),o=t.node(C.last(n.borderRight));n.width=Math.abs(o.x-a.x),n.height=Math.abs(r.y-i.y),n.x=a.x+n.width/2,n.y=i.y+n.height/2}}),C.each(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}function m(t){C.each(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}function v(t){var e=z.buildLayerMatrix(t);C.each(e,function(e){var n=0;C.each(e,function(e,i){var r=t.node(e);r.order=i+n,C.each(r.selfEdges,function(e){z.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:r.rank,order:i+ ++n,e:e.e,label:e.label},"_se")}),delete r.selfEdges})})}function y(t){C.each(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var i=t.node(n.e.v),r=i.x+i.width/2,a=i.y,o=n.x-r,s=i.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:r+2*o/3,y:a-s},{x:r+5*o/6,y:a-s},{x:r+o,y:a},{x:r+5*o/6,y:a+s},{x:r+2*o/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}})}function I(t,e){return C.mapValues(C.pick(t,e),Number)}function b(t){var e={};return C.each(t,function(t,n){e[n.toLowerCase()]=t}),e}var C=t("./lodash"),w=t("./acyclic"),A=t("./normalize"),x=t("./rank"),N=t("./util").normalizeRanks,M=t("./parent-dummy-chains"),k=t("./util").removeEmptyRanks,T=t("./nesting-graph"),j=t("./add-border-segments"),D=t("./coordinate-system"),E=t("./order"),B=t("./position"),z=t("./util"),S=t("./graphlib").Graph;e.exports=i;var P=["nodesep","edgesep","ranksep","marginx","marginy"],G={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Z=["acyclicer","ranker","rankdir","align"],L=["width","height"],O={width:0,height:0},R=["minlen","weight","width","height","labeloffset"],W={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Y=["labelpos"]},{"./acyclic":2,"./add-border-segments":3,"./coordinate-system":4,"./graphlib":7,"./lodash":10,"./nesting-graph":11,"./normalize":12,"./order":17,"./parent-dummy-chains":22,"./position":24,"./rank":26,"./util":29}],10:[function(t,e,n){var i;if("function"==typeof t)try{i=t("lodash")}catch(r){}i||(i=window._),e.exports=i},{lodash:void 0}],11:[function(t,e,n){function i(t){var e=u.addDummyNode(t,"root",{},"_root"),n=a(t),i=l.max(n)-1,s=2*i+1;t.graph().nestingRoot=e,l.each(t.edges(),function(e){t.edge(e).minlen*=s});var c=o(t)+1;l.each(t.children(),function(a){r(t,e,s,c,i,n,a)}),t.graph().nodeRankFactor=s}function r(t,e,n,i,a,o,s){var c=t.children(s);if(!c.length)return void(s!==e&&t.setEdge(e,s,{weight:0,minlen:n}));var h=u.addBorderNode(t,"_bt"),d=u.addBorderNode(t,"_bb"),f=t.node(s);t.setParent(h,s),f.borderTop=h,t.setParent(d,s),f.borderBottom=d,l.each(c,function(l){r(t,e,n,i,a,o,l);var u=t.node(l),c=u.borderTop?u.borderTop:l,f=u.borderBottom?u.borderBottom:l,g=u.borderTop?i:2*i,p=c!==f?1:a-o[s]+1;t.setEdge(h,c,{weight:g,minlen:p,nestingEdge:!0}),t.setEdge(f,d,{weight:g,minlen:p,nestingEdge:!0})}),t.parent(s)||t.setEdge(e,h,{weight:0,minlen:a+o[s]})}function a(t){function e(i,r){var a=t.children(i);a&&a.length&&l.each(a,function(t){e(t,r+1)}),n[i]=r}var n={};return l.each(t.children(),function(t){e(t,1)}),n}function o(t){return l.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}function s(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,l.each(t.edges(),function(e){var n=t.edge(e);n.nestingEdge&&t.removeEdge(e)})}var l=t("./lodash"),u=t("./util");e.exports={run:i,cleanup:s}},{"./lodash":10,"./util":29}],12:[function(t,e,n){"use strict";function i(t){t.graph().dummyChains=[],o.each(t.edges(),function(e){r(t,e)})}function r(t,e){var n=e.v,i=t.node(n).rank,r=e.w,a=t.node(r).rank,o=e.name,l=t.edge(e),u=l.labelRank;if(a!==i+1){t.removeEdge(e);var c,h,d;for(d=0,++i;a>i;++d,++i)l.points=[],h={width:0,height:0,edgeLabel:l,edgeObj:e,rank:i},c=s.addDummyNode(t,"edge",h,"_d"),i===u&&(h.width=l.width,h.height=l.height,h.dummy="edge-label",h.labelpos=l.labelpos),t.setEdge(n,c,{weight:l.weight},o),0===d&&t.graph().dummyChains.push(c),n=c;t.setEdge(n,r,{weight:l.weight},o)}}function a(t){o.each(t.graph().dummyChains,function(e){var n,i=t.node(e),r=i.edgeLabel;for(t.setEdge(i.edgeObj,r);i.dummy;)n=t.successors(e)[0],t.removeNode(e),r.points.push({x:i.x,y:i.y}),"edge-label"===i.dummy&&(r.x=i.x,r.y=i.y,r.width=i.width,r.height=i.height),e=n,i=t.node(e)})}var o=t("./lodash"),s=t("./util");e.exports={run:i,undo:a}},{"./lodash":10,"./util":29}],13:[function(t,e,n){function i(t,e,n){var i,a={};r.each(n,function(n){for(var r,o,s=t.parent(n);s;){if(r=t.parent(s),r?(o=a[r],a[r]=s):(o=i,i=s),o&&o!==s)return void e.setEdge(o,s);s=r}})}var r=t("../lodash");e.exports=i},{"../lodash":10}],14:[function(t,e,n){function i(t,e){return r.map(e,function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,function(e,n){var i=t.edge(n),r=t.node(n.v);return{sum:e.sum+i.weight*r.order,weight:e.weight+i.weight}},{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}})}var r=t("../lodash");e.exports=i},{"../lodash":10}],15:[function(t,e,n){function i(t,e,n){var i=r(t),s=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(e){return t.node(e)});return a.each(t.nodes(),function(r){var o=t.node(r),l=t.parent(r);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(s.setNode(r),s.setParent(r,l||i),a.each(t[n](r),function(e){var n=e.v===r?e.w:e.v,i=s.edge(n,r),o=a.isUndefined(i)?0:i.weight;s.setEdge(n,r,{weight:t.edge(e).weight+o})}),a.has(o,"minRank")&&s.setNode(r,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),s}function r(t){for(var e;t.hasNode(e=a.uniqueId("_root")););return e}var a=t("../lodash"),o=t("../graphlib").Graph;e.exports=i},{"../graphlib":7,"../lodash":10}],16:[function(t,e,n){"use strict";function i(t,e){for(var n=0,i=1;i<e.length;++i)n+=r(t,e[i-1],e[i]);return n}function r(t,e,n){for(var i=a.zipObject(n,a.map(n,function(t,e){return e})),r=a.flatten(a.map(e,function(e){return a.chain(t.outEdges(e)).map(function(e){return{pos:i[e.w],weight:t.edge(e).weight}}).sortBy("pos").value()}),!0),o=1;o<n.length;)o<<=1;var s=2*o-1;o-=1;var l=a.map(new Array(s),function(){return 0}),u=0;return a.each(r.forEach(function(t){var e=t.pos+o;l[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=l[e+1]),e=e-1>>1,l[e]+=t.weight;u+=t.weight*n})),u}var a=t("../lodash");e.exports=i},{"../lodash":10}],17:[function(t,e,n){"use strict";function i(t){var e=g.maxRank(t),n=r(t,s.range(1,e+1),"inEdges"),i=r(t,s.range(e-1,-1,-1),"outEdges"),c=l(t);o(t,c);for(var h,d=Number.POSITIVE_INFINITY,f=0,p=0;4>p;++f,++p){a(f%2?n:i,f%4>=2),c=g.buildLayerMatrix(t);var m=u(t,c);d>m&&(p=0,h=s.cloneDeep(c),d=m)}o(t,h)}function r(t,e,n){return s.map(e,function(e){return h(t,e,n)})}function a(t,e){var n=new f;s.each(t,function(t){var i=t.graph().root,r=c(t,i,n,e);s.each(r.vs,function(e,n){t.node(e).order=n}),d(t,n,r.vs)})}function o(t,e){s.each(e,function(e){s.each(e,function(e,n){t.node(e).order=n})})}var s=t("../lodash"),l=t("./init-order"),u=t("./cross-count"),c=t("./sort-subgraph"),h=t("./build-layer-graph"),d=t("./add-subgraph-constraints"),f=t("../graphlib").Graph,g=t("../util");e.exports=i},{"../graphlib":7,"../lodash":10,"../util":29,"./add-subgraph-constraints":13,"./build-layer-graph":15,"./cross-count":16,"./init-order":18,"./sort-subgraph":20}],18:[function(t,e,n){"use strict";function i(t){function e(i){if(!r.has(n,i)){n[i]=!0;var a=t.node(i);o[a.rank].push(i),r.each(t.successors(i),e)}}var n={},i=r.filter(t.nodes(),function(e){return!t.children(e).length}),a=r.max(r.map(i,function(e){return t.node(e).rank})),o=r.map(r.range(a+1),function(){return[]}),s=r.sortBy(i,function(e){return t.node(e).rank});return r.each(s,e),o}var r=t("../lodash");e.exports=i},{"../lodash":10}],19:[function(t,e,n){"use strict";function i(t,e){var n={};o.each(t,function(t,e){var i=n[t.v]={indegree:0,"in":[],out:[],vs:[t.v],i:e};o.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)}),o.each(e.edges(),function(t){var e=n[t.v],i=n[t.w];o.isUndefined(e)||o.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))});var i=o.filter(n,function(t){return!t.indegree});return r(i)}function r(t){function e(t){return function(e){e.merged||(o.isUndefined(e.barycenter)||o.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&a(t,e)}}function n(e){return function(n){n["in"].push(e),0===--n.indegree&&t.push(n)}}for(var i=[];t.length;){var r=t.pop();i.push(r),o.each(r["in"].reverse(),e(r)),o.each(r.out,n(r))}return o.chain(i).filter(function(t){return!t.merged}).map(function(t){return o.pick(t,["vs","i","barycenter","weight"])}).value()}function a(t,e){var n=0,i=0;t.weight&&(n+=t.barycenter*t.weight,i+=t.weight),e.weight&&(n+=e.barycenter*e.weight,i+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0}var o=t("../lodash");e.exports=i},{"../lodash":10}],20:[function(t,e,n){function i(t,e,n,c){var h=t.children(e),d=t.node(e),f=d?d.borderLeft:void 0,g=d?d.borderRight:void 0,p={};f&&(h=o.filter(h,function(t){return t!==f&&t!==g}));var m=s(t,h);o.each(m,function(e){if(t.children(e.v).length){var r=i(t,e.v,n,c);p[e.v]=r,o.has(r,"barycenter")&&a(e,r)}});var v=l(m,n);r(v,p);var y=u(v,c);if(f&&(y.vs=o.flatten([f,y.vs,g],!0),t.predecessors(f).length)){var I=t.node(t.predecessors(f)[0]),b=t.node(t.predecessors(g)[0]);o.has(y,"barycenter")||(y.barycenter=0,
y.weight=0),y.barycenter=(y.barycenter*y.weight+I.order+b.order)/(y.weight+2),y.weight+=2}return y}function r(t,e){o.each(t,function(t){t.vs=o.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}function a(t,e){o.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}var o=t("../lodash"),s=t("./barycenter"),l=t("./resolve-conflicts"),u=t("./sort");e.exports=i},{"../lodash":10,"./barycenter":14,"./resolve-conflicts":19,"./sort":21}],21:[function(t,e,n){function i(t,e){var n=s.partition(t,function(t){return o.has(t,"barycenter")}),i=n.lhs,l=o.sortBy(n.rhs,function(t){return-t.i}),u=[],c=0,h=0,d=0;i.sort(a(!!e)),d=r(u,l,d),o.each(i,function(t){d+=t.vs.length,u.push(t.vs),c+=t.barycenter*t.weight,h+=t.weight,d=r(u,l,d)});var f={vs:o.flatten(u,!0)};return h&&(f.barycenter=c/h,f.weight=h),f}function r(t,e,n){for(var i;e.length&&(i=o.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}function a(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}var o=t("../lodash"),s=t("../util");e.exports=i},{"../lodash":10,"../util":29}],22:[function(t,e,n){function i(t){var e=a(t);o.each(t.graph().dummyChains,function(n){for(var i=t.node(n),a=i.edgeObj,o=r(t,e,a.v,a.w),s=o.path,l=o.lca,u=0,c=s[u],h=!0;n!==a.w;){if(i=t.node(n),h){for(;(c=s[u])!==l&&t.node(c).maxRank<i.rank;)u++;c===l&&(h=!1)}if(!h){for(;u<s.length-1&&t.node(c=s[u+1]).minRank<=i.rank;)u++;c=s[u]}t.setParent(n,c),n=t.successors(n)[0]}})}function r(t,e,n,i){var r,a,o=[],s=[],l=Math.min(e[n].low,e[i].low),u=Math.max(e[n].lim,e[i].lim);r=n;do r=t.parent(r),o.push(r);while(r&&(e[r].low>l||u>e[r].lim));for(a=r,r=i;(r=t.parent(r))!==a;)s.push(r);return{path:o.concat(s.reverse()),lca:a}}function a(t){function e(r){var a=i;o.each(t.children(r),e),n[r]={low:a,lim:i++}}var n={},i=0;return o.each(t.children(),e),n}var o=t("./lodash");e.exports=i},{"./lodash":10}],23:[function(t,e,n){"use strict";function i(t,e){function n(e,n){var r=0,s=0,l=e.length,u=v.last(n);return v.each(n,function(e,c){var h=a(t,e),d=h?t.node(h).order:l;(h||e===u)&&(v.each(n.slice(s,c+1),function(e){v.each(t.predecessors(e),function(n){var a=t.node(n),s=a.order;!(r>s||s>d)||a.dummy&&t.node(e).dummy||o(i,n,e)})}),s=c+1,r=d)}),n}var i={};return v.reduce(e,n),i}function r(t,e){function n(e,n,i,a,s){var l;v.each(v.range(n,i),function(n){l=e[n],t.node(l).dummy&&v.each(t.predecessors(l),function(e){var n=t.node(e);n.dummy&&(n.order<a||n.order>s)&&o(r,e,l)})})}function i(e,i){var r,a=-1,o=0;return v.each(i,function(s,l){if("border"===t.node(s).dummy){var u=t.predecessors(s);u.length&&(r=t.node(u[0]).order,n(i,o,l,a,r),o=l,a=r)}n(i,o,i.length,r,e.length)}),i}var r={};return v.reduce(e,i),r}function a(t,e){return t.node(e).dummy?v.find(t.predecessors(e),function(e){return t.node(e).dummy}):void 0}function o(t,e,n){if(e>n){var i=e;e=n,n=i}var r=t[e];r||(t[e]=r={}),r[n]=!0}function s(t,e,n){if(e>n){var i=e;e=n,n=i}return v.has(t[e],n)}function l(t,e,n,i){var r={},a={},o={};return v.each(e,function(t){v.each(t,function(t,e){r[t]=t,a[t]=t,o[t]=e})}),v.each(e,function(t){var e=-1;v.each(t,function(t){var l=i(t);if(l.length){l=v.sortBy(l,function(t){return o[t]});for(var u=(l.length-1)/2,c=Math.floor(u),h=Math.ceil(u);h>=c;++c){var d=l[c];a[t]===t&&e<o[d]&&!s(n,t,d)&&(a[d]=t,a[t]=r[t]=r[d],e=o[d])}}})}),{root:r,align:a}}function u(t,e,n,i,r){function a(t){v.has(u,t)||(u[t]=!0,s[t]=v.reduce(l.inEdges(t),function(t,e){return a(e.v),Math.max(t,s[e.v]+l.edge(e))},0))}function o(e){if(2!==u[e]){u[e]++;var n=t.node(e),i=v.reduce(l.outEdges(e),function(t,e){return o(e.w),Math.min(t,s[e.w]-l.edge(e))},Number.POSITIVE_INFINITY);i!==Number.POSITIVE_INFINITY&&n.borderType!==h&&(s[e]=Math.max(s[e],i))}}var s={},l=c(t,e,n,r),u={};v.each(l.nodes(),a);var h=r?"borderLeft":"borderRight";return v.each(l.nodes(),o),v.each(i,function(t){s[t]=s[n[t]]}),s}function c(t,e,n,i){var r=new y,a=t.graph(),o=p(a.nodesep,a.edgesep,i);return v.each(e,function(e){var i;v.each(e,function(e){var a=n[e];if(r.setNode(a),i){var s=n[i],l=r.edge(s,a);r.setEdge(s,a,Math.max(o(t,e,i),l||0))}i=e})}),r}function h(t,e){return v.min(e,function(e){var n=v.min(e,function(e,n){return e-m(t,n)/2}),i=v.max(e,function(e,n){return e+m(t,n)/2});return i-n})}function d(t,e){var n=v.min(e),i=v.max(e);v.each(["u","d"],function(r){v.each(["l","r"],function(a){var o,s=r+a,l=t[s];l!==e&&(o="l"===a?n-v.min(l):i-v.max(l),o&&(t[s]=v.mapValues(l,function(t){return t+o})))})})}function f(t,e){return v.mapValues(t.ul,function(n,i){if(e)return t[e.toLowerCase()][i];var r=v.sortBy(v.pluck(t,i));return(r[1]+r[2])/2})}function g(t){var e,n=I.buildLayerMatrix(t),a=v.merge(i(t,n),r(t,n)),o={};v.each(["u","d"],function(i){e="u"===i?n:v.values(n).reverse(),v.each(["l","r"],function(n){"r"===n&&(e=v.map(e,function(t){return v.values(t).reverse()}));var r=v.bind("u"===i?t.predecessors:t.successors,t),s=l(t,e,a,r),c=u(t,e,s.root,s.align,"r"===n);"r"===n&&(c=v.mapValues(c,function(t){return-t})),o[i+n]=c})});var s=h(t,o);return d(o,s),f(o,t.graph().align)}function p(t,e,n){return function(i,r,a){var o,s=i.node(r),l=i.node(a),u=0;if(u+=s.width/2,v.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":o=-s.width/2;break;case"r":o=s.width/2}if(o&&(u+=n?o:-o),o=0,u+=(s.dummy?e:t)/2,u+=(l.dummy?e:t)/2,u+=l.width/2,v.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":o=l.width/2;break;case"r":o=-l.width/2}return o&&(u+=n?o:-o),o=0,u}}function m(t,e){return t.node(e).width}var v=t("../lodash"),y=t("../graphlib").Graph,I=t("../util");e.exports={positionX:g,findType1Conflicts:i,findType2Conflicts:r,addConflict:o,hasConflict:s,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:d,findSmallestWidthAlignment:h,balance:f}},{"../graphlib":7,"../lodash":10,"../util":29}],24:[function(t,e,n){"use strict";function i(t){t=o.asNonCompoundGraph(t),r(t),a.each(s(t),function(e,n){t.node(n).x=e})}function r(t){var e=o.buildLayerMatrix(t),n=t.graph().ranksep,i=0;a.each(e,function(e){var r=a.max(a.map(e,function(e){return t.node(e).height}));a.each(e,function(e){t.node(e).y=i+r/2}),i+=r+n})}var a=t("../lodash"),o=t("../util"),s=t("./bk").positionX;e.exports=i},{"../lodash":10,"../util":29,"./bk":23}],25:[function(t,e,n){"use strict";function i(t){var e=new l({directed:!1}),n=t.nodes()[0],i=t.nodeCount();e.setNode(n,{});for(var s,c;r(e,t)<i;)s=a(e,t),c=e.hasNode(s.v)?u(t,s):-u(t,s),o(e,t,c);return e}function r(t,e){function n(i){s.each(e.nodeEdges(i),function(r){var a=r.v,o=i===a?r.w:a;t.hasNode(o)||u(e,r)||(t.setNode(o,{}),t.setEdge(i,o,{}),n(o))})}return s.each(t.nodes(),n),t.nodeCount()}function a(t,e){return s.min(e.edges(),function(n){return t.hasNode(n.v)!==t.hasNode(n.w)?u(e,n):void 0})}function o(t,e,n){s.each(t.nodes(),function(t){e.node(t).rank+=n})}var s=t("../lodash"),l=t("../graphlib").Graph,u=t("./util").slack;e.exports=i},{"../graphlib":7,"../lodash":10,"./util":28}],26:[function(t,e,n){"use strict";function i(t){switch(t.graph().ranker){case"network-simplex":a(t);break;case"tight-tree":r(t);break;case"longest-path":c(t);break;default:a(t)}}function r(t){s(t),l(t)}function a(t){u(t)}var o=t("./util"),s=o.longestPath,l=t("./feasible-tree"),u=t("./network-simplex");e.exports=i;var c=s},{"./feasible-tree":25,"./network-simplex":27,"./util":28}],27:[function(t,e,n){"use strict";function i(t){t=C(t),y(t);var e=m(t);s(e),r(e,t);for(var n,i;n=u(e);)i=c(e,t,n),h(e,t,n,i)}function r(t,e){var n=b(t,t.nodes());n=n.slice(0,n.length-1),p.each(n,function(n){a(t,e,n)})}function a(t,e,n){var i=t.node(n),r=i.parent;t.edge(n,r).cutvalue=o(t,e,n)}function o(t,e,n){var i=t.node(n),r=i.parent,a=!0,o=e.edge(n,r),s=0;return o||(a=!1,o=e.edge(r,n)),s=o.weight,p.each(e.nodeEdges(n),function(i){var o=i.v===n,l=o?i.w:i.v;if(l!==r){var u=o===a,c=e.edge(i).weight;if(s+=u?c:-c,f(t,n,l)){var h=t.edge(n,l).cutvalue;s+=u?-h:h}}}),s}function s(t,e){arguments.length<2&&(e=t.nodes()[0]),l(t,{},1,e)}function l(t,e,n,i,r){var a=n,o=t.node(i);return e[i]=!0,p.each(t.neighbors(i),function(r){p.has(e,r)||(n=l(t,e,n,r,i))}),o.low=a,o.lim=n++,r?o.parent=r:delete o.parent,n}function u(t){return p.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function c(t,e,n){var i=n.v,r=n.w;e.hasEdge(i,r)||(i=n.w,r=n.v);var a=t.node(i),o=t.node(r),s=a,l=!1;a.lim>o.lim&&(s=o,l=!0);var u=p.filter(e.edges(),function(e){return l===g(t,t.node(e.v),s)&&l!==g(t,t.node(e.w),s)});return p.min(u,function(t){return v(e,t)})}function h(t,e,n,i){var a=n.v,o=n.w;t.removeEdge(a,o),t.setEdge(i.v,i.w,{}),s(t),r(t,e),d(t,e)}function d(t,e){var n=p.find(t.nodes(),function(t){return!e.node(t).parent}),i=I(t,n);i=i.slice(1),p.each(i,function(n){var i=t.node(n).parent,r=e.edge(n,i),a=!1;r||(r=e.edge(i,n),a=!0),e.node(n).rank=e.node(i).rank+(a?r.minlen:-r.minlen)})}function f(t,e,n){return t.hasEdge(e,n)}function g(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}var p=t("../lodash"),m=t("./feasible-tree"),v=t("./util").slack,y=t("./util").longestPath,I=t("../graphlib").alg.preorder,b=t("../graphlib").alg.postorder,C=t("../util").simplify;e.exports=i,i.initLowLimValues=s,i.initCutValues=r,i.calcCutValue=o,i.leaveEdge=u,i.enterEdge=c,i.exchangeEdges=h},{"../graphlib":7,"../lodash":10,"../util":29,"./feasible-tree":25,"./util":28}],28:[function(t,e,n){"use strict";function i(t){function e(i){var r=t.node(i);if(a.has(n,i))return r.rank;n[i]=!0;var o=a.min(a.map(t.outEdges(i),function(n){return e(n.w)-t.edge(n).minlen}));return o===Number.POSITIVE_INFINITY&&(o=0),r.rank=o}var n={};a.each(t.sources(),e)}function r(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var a=t("../lodash");e.exports={longestPath:i,slack:r}},{"../lodash":10}],29:[function(t,e,n){"use strict";function i(t,e,n,i){var r;do r=v.uniqueId(i);while(t.hasNode(r));return n.dummy=e,t.setNode(r,n),r}function r(t){var e=(new y).setGraph(t.graph());return v.each(t.nodes(),function(n){e.setNode(n,t.node(n))}),v.each(t.edges(),function(n){var i=e.edge(n.v,n.w)||{weight:0,minlen:1},r=t.edge(n);e.setEdge(n.v,n.w,{weight:i.weight+r.weight,minlen:Math.max(i.minlen,r.minlen)})}),e}function a(t){var e=new y({multigraph:t.isMultigraph()}).setGraph(t.graph());return v.each(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),v.each(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e}function o(t){var e=v.map(t.nodes(),function(e){var n={};return v.each(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return v.zipObject(t.nodes(),e)}function s(t){var e=v.map(t.nodes(),function(e){var n={};return v.each(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return v.zipObject(t.nodes(),e)}function l(t,e){var n=t.x,i=t.y,r=e.x-n,a=e.y-i,o=t.width/2,s=t.height/2;if(!r&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(a)*o>Math.abs(r)*s?(0>a&&(s=-s),l=s*r/a,u=s):(0>r&&(o=-o),l=o,u=o*a/r),{x:n+l,y:i+u}}function u(t){var e=v.map(v.range(f(t)+1),function(){return[]});return v.each(t.nodes(),function(n){var i=t.node(n),r=i.rank;v.isUndefined(r)||(e[r][i.order]=n)}),e}function c(t){var e=v.min(v.map(t.nodes(),function(e){return t.node(e).rank}));v.each(t.nodes(),function(n){var i=t.node(n);v.has(i,"rank")&&(i.rank-=e)})}function h(t){var e=v.min(v.map(t.nodes(),function(e){return t.node(e).rank})),n=[];v.each(t.nodes(),function(i){var r=t.node(i).rank-e;n[r]||(n[r]=[]),n[r].push(i)});var i=0,r=t.graph().nodeRankFactor;v.each(n,function(e,n){v.isUndefined(e)&&n%r!==0?--i:i&&v.each(e,function(e){t.node(e).rank+=i})})}function d(t,e,n,r){var a={width:0,height:0};return arguments.length>=4&&(a.rank=n,a.order=r),i(t,"border",a,e)}function f(t){return v.max(v.map(t.nodes(),function(e){var n=t.node(e).rank;return v.isUndefined(n)?void 0:n}))}function g(t,e){var n={lhs:[],rhs:[]};return v.each(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n}function p(t,e){var n=v.now();try{return e()}finally{console.log(t+" time: "+(v.now()-n)+"ms")}}function m(t,e){return e()}var v=t("./lodash"),y=t("./graphlib").Graph;e.exports={addDummyNode:i,simplify:r,asNonCompoundGraph:a,successorWeights:o,predecessorWeights:s,intersectRect:l,buildLayerMatrix:u,normalizeRanks:c,removeEmptyRanks:h,addBorderNode:d,maxRank:f,partition:g,time:p,notime:m}},{"./graphlib":7,"./lodash":10}],30:[function(t,e,n){e.exports="0.7.4"},{}]},{},[1])(1)}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.dagre=t()}}(function(){return function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){e.exports={graphlib:t("./lib/graphlib"),layout:t("./lib/layout"),debug:t("./lib/debug"),util:{time:t("./lib/util").time,notime:t("./lib/util").notime},version:t("./lib/version")}},{"./lib/debug":6,"./lib/graphlib":7,"./lib/layout":9,"./lib/util":29,"./lib/version":30}],2:[function(t,e,n){"use strict";function i(t){function e(t){return function(e){return t.edge(e).weight}}var n="greedy"===t.graph().acyclicer?s(t,e(t)):r(t);o.each(n,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,o.uniqueId("rev"))})}function r(t){function e(a){o.has(r,a)||(r[a]=!0,i[a]=!0,o.each(t.outEdges(a),function(t){o.has(i,t.w)?n.push(t):e(t.w)}),delete i[a])}var n=[],i={},r={};return o.each(t.nodes(),e),n}function a(t){o.each(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var i=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,i)}})}var o=t("./lodash"),s=t("./greedy-fas");e.exports={run:i,undo:a}},{"./greedy-fas":8,"./lodash":10}],3:[function(t,e,n){function i(t){function e(n){var i=t.children(n),o=t.node(n);if(i.length&&a.each(i,e),a.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var s=o.minRank,l=o.maxRank+1;l>s;++s)r(t,"borderLeft","_bl",n,o,s),r(t,"borderRight","_br",n,o,s)}}a.each(t.children(),e)}function r(t,e,n,i,r,a){var s={width:0,height:0,rank:a,borderType:e},l=r[e][a-1],u=o.addDummyNode(t,"border",s,n);r[e][a]=u,t.setParent(u,i),l&&t.setEdge(l,u,{weight:1})}var a=t("./lodash"),o=t("./util");e.exports=i},{"./lodash":10,"./util":29}],4:[function(t,e,n){"use strict";function i(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||a(t)}function r(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||s(t),"lr"!==e&&"rl"!==e||(u(t),a(t))}function a(t){h.each(t.nodes(),function(e){o(t.node(e))}),h.each(t.edges(),function(e){o(t.edge(e))})}function o(t){var e=t.width;t.width=t.height,t.height=e}function s(t){h.each(t.nodes(),function(e){l(t.node(e))}),h.each(t.edges(),function(e){var n=t.edge(e);h.each(n.points,l),h.has(n,"y")&&l(n)})}function l(t){t.y=-t.y}function u(t){h.each(t.nodes(),function(e){c(t.node(e))}),h.each(t.edges(),function(e){var n=t.edge(e);h.each(n.points,c),h.has(n,"x")&&c(n)})}function c(t){var e=t.x;t.x=t.y,t.y=e}var h=t("./lodash");e.exports={adjust:i,undo:r}},{"./lodash":10}],5:[function(t,e,n){function i(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function a(t,e){return"_next"!==t&&"_prev"!==t?e:void 0}e.exports=i,i.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;return e!==t?(r(e),e):void 0},i.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},i.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,a)),n=n._prev;return"["+t.join(", ")+"]"}},{}],6:[function(t,e,n){function i(t){var e=a.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.each(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),r.each(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),r.each(e,function(t,e){var i="layer"+e;n.setNode(i,{rank:"same"}),r.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}var r=t("./lodash"),a=t("./util"),o=t("./graphlib").Graph;e.exports={debugOrdering:i}},{"./graphlib":7,"./lodash":10,"./util":29}],7:[function(t,e,n){var i;if("function"==typeof t)try{i=t("graphlib")}catch(r){}i||(i=window.graphlib),e.exports=i},{graphlib:void 0}],8:[function(t,e,n){function i(t,e){if(t.nodeCount()<=1)return[];var n=o(t,e||h),i=r(n.graph,n.buckets,n.zeroIdx);return l.flatten(l.map(i,function(e){return t.outEdges(e.v,e.w)}),!0)}function r(t,e,n){for(var i,r=[],o=e[e.length-1],s=e[0];t.nodeCount();){for(;i=s.dequeue();)a(t,e,n,i);for(;i=o.dequeue();)a(t,e,n,i);if(t.nodeCount())for(var l=e.length-2;l>0;--l)if(i=e[l].dequeue()){r=r.concat(a(t,e,n,i,!0));break}}return r}function a(t,e,n,i,r){var a=r?[]:void 0;return l.each(t.inEdges(i.v),function(i){var o=t.edge(i),l=t.node(i.v);r&&a.push({v:i.v,w:i.w}),l.out-=o,s(e,n,l)}),l.each(t.outEdges(i.v),function(i){var r=t.edge(i),a=i.w,o=t.node(a);o["in"]-=r,s(e,n,o)}),t.removeNode(i.v),a}function o(t,e){var n=new u,i=0,r=0;l.each(t.nodes(),function(t){n.setNode(t,{v:t,"in":0,out:0})}),l.each(t.edges(),function(t){var a=n.edge(t.v,t.w)||0,o=e(t),s=a+o;n.setEdge(t.v,t.w,s),r=Math.max(r,n.node(t.v).out+=o),i=Math.max(i,n.node(t.w)["in"]+=o)});var a=l.range(r+i+3).map(function(){return new c}),o=i+1;return l.each(n.nodes(),function(t){s(a,o,n.node(t))}),{graph:n,buckets:a,zeroIdx:o}}function s(t,e,n){n.out?n["in"]?t[n.out-n["in"]+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var l=t("./lodash"),u=t("./graphlib").Graph,c=t("./data/list");e.exports=i;var h=l.constant(1)},{"./data/list":5,"./graphlib":7,"./lodash":10}],9:[function(t,e,n){"use strict";function i(t,e){var n=e&&e.debugTiming?z.time:z.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return o(t)});n("  runLayout",function(){r(e,n)}),n("  updateInputGraph",function(){a(t,e)})})}function r(t,e){e("    makeSpaceForEdgeLabels",function(){s(t)}),e("    removeSelfEdges",function(){m(t)}),e("    acyclic",function(){w.run(t)}),e("    nestingGraph.run",function(){T.run(t)}),e("    rank",function(){x(z.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){l(t)}),e("    removeEmptyRanks",function(){k(t)}),e("    nestingGraph.cleanup",function(){T.cleanup(t)}),e("    normalizeRanks",function(){N(t)}),e("    assignRankMinMax",function(){u(t)}),e("    removeEdgeLabelProxies",function(){c(t)}),e("    normalize.run",function(){A.run(t)}),e("    parentDummyChains",function(){M(t)}),e("    addBorderSegments",function(){j(t)}),e("    order",function(){E(t)}),e("    insertSelfEdges",function(){v(t)}),e("    adjustCoordinateSystem",function(){D.adjust(t)}),e("    position",function(){B(t)}),e("    positionSelfEdges",function(){y(t)}),e("    removeBorderNodes",function(){p(t)}),e("    normalize.undo",function(){A.undo(t)}),e("    fixupEdgeLabelCoords",function(){f(t)}),e("    undoCoordinateSystem",function(){D.undo(t)}),e("    translateGraph",function(){h(t)}),e("    assignNodeIntersects",function(){d(t)}),e("    reversePoints",function(){g(t)}),e("    acyclic.undo",function(){w.undo(t)})}function a(t,e){C.each(t.nodes(),function(n){var i=t.node(n),r=e.node(n);i&&(i.x=r.x,i.y=r.y,e.children(n).length&&(i.width=r.width,i.height=r.height))}),C.each(t.edges(),function(n){var i=t.edge(n),r=e.edge(n);i.points=r.points,C.has(r,"x")&&(i.x=r.x,i.y=r.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}function o(t){var e=new S({multigraph:!0,compound:!0}),n=b(t.graph());return e.setGraph(C.merge({},G,I(n,P),C.pick(n,Z))),C.each(t.nodes(),function(n){var i=b(t.node(n));e.setNode(n,C.defaults(I(i,L),O)),e.setParent(n,t.parent(n))}),C.each(t.edges(),function(n){var i=b(t.edge(n));e.setEdge(n,C.merge({},W,I(i,R),C.pick(i,Y)))}),e}function s(t){var e=t.graph();e.ranksep/=2,C.each(t.edges(),function(n){var i=t.edge(n);i.minlen*=2,"c"!==i.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?i.width+=i.labeloffset:i.height+=i.labeloffset)})}function l(t){C.each(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var i=t.node(e.v),r=t.node(e.w),a={rank:(r.rank-i.rank)/2+i.rank,e:e};z.addDummyNode(t,"edge-proxy",a,"_ep")}})}function u(t){var e=0;C.each(t.nodes(),function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=C.max(e,i.maxRank))}),t.graph().maxRank=e}function c(t){C.each(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function h(t){function e(t){var e=t.x,o=t.y,s=t.width,l=t.height;n=Math.min(n,e-s/2),i=Math.max(i,e+s/2),r=Math.min(r,o-l/2),a=Math.max(a,o+l/2)}var n=Number.POSITIVE_INFINITY,i=0,r=Number.POSITIVE_INFINITY,a=0,o=t.graph(),s=o.marginx||0,l=o.marginy||0;C.each(t.nodes(),function(n){e(t.node(n))}),C.each(t.edges(),function(n){var i=t.edge(n);C.has(i,"x")&&e(i)}),n-=s,r-=l,C.each(t.nodes(),function(e){var i=t.node(e);i.x-=n,i.y-=r}),C.each(t.edges(),function(e){var i=t.edge(e);C.each(i.points,function(t){t.x-=n,t.y-=r}),C.has(i,"x")&&(i.x-=n),C.has(i,"y")&&(i.y-=r)}),o.width=i-n+s,o.height=a-r+l}function d(t){C.each(t.edges(),function(e){var n,i,r=t.edge(e),a=t.node(e.v),o=t.node(e.w);r.points?(n=r.points[0],i=r.points[r.points.length-1]):(r.points=[],n=o,i=a),r.points.unshift(z.intersectRect(a,n)),r.points.push(z.intersectRect(o,i))})}function f(t){C.each(t.edges(),function(e){var n=t.edge(e);if(C.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}function g(t){C.each(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}function p(t){C.each(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),r=t.node(n.borderBottom),a=t.node(C.last(n.borderLeft)),o=t.node(C.last(n.borderRight));n.width=Math.abs(o.x-a.x),n.height=Math.abs(r.y-i.y),n.x=a.x+n.width/2,n.y=i.y+n.height/2}}),C.each(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}function m(t){C.each(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}function v(t){var e=z.buildLayerMatrix(t);C.each(e,function(e){var n=0;C.each(e,function(e,i){var r=t.node(e);r.order=i+n,C.each(r.selfEdges,function(e){z.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:r.rank,order:i+ ++n,e:e.e,label:e.label},"_se")}),delete r.selfEdges})})}function y(t){C.each(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var i=t.node(n.e.v),r=i.x+i.width/2,a=i.y,o=n.x-r,s=i.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:r+2*o/3,y:a-s},{x:r+5*o/6,y:a-s},{x:r+o,y:a},{x:r+5*o/6,y:a+s},{x:r+2*o/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}})}function I(t,e){return C.mapValues(C.pick(t,e),Number)}function b(t){var e={};return C.each(t,function(t,n){e[n.toLowerCase()]=t}),e}var C=t("./lodash"),w=t("./acyclic"),A=t("./normalize"),x=t("./rank"),N=t("./util").normalizeRanks,M=t("./parent-dummy-chains"),k=t("./util").removeEmptyRanks,T=t("./nesting-graph"),j=t("./add-border-segments"),D=t("./coordinate-system"),E=t("./order"),B=t("./position"),z=t("./util"),S=t("./graphlib").Graph;e.exports=i;var P=["nodesep","edgesep","ranksep","marginx","marginy"],G={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Z=["acyclicer","ranker","rankdir","align"],L=["width","height"],O={width:0,height:0},R=["minlen","weight","width","height","labeloffset"],W={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Y=["labelpos"]},{"./acyclic":2,"./add-border-segments":3,"./coordinate-system":4,"./graphlib":7,"./lodash":10,"./nesting-graph":11,"./normalize":12,"./order":17,"./parent-dummy-chains":22,"./position":24,"./rank":26,"./util":29}],10:[function(t,e,n){var i;if("function"==typeof t)try{i=t("lodash")}catch(r){}i||(i=window._),e.exports=i},{lodash:void 0}],11:[function(t,e,n){function i(t){var e=u.addDummyNode(t,"root",{},"_root"),n=a(t),i=l.max(n)-1,s=2*i+1;t.graph().nestingRoot=e,l.each(t.edges(),function(e){t.edge(e).minlen*=s});var c=o(t)+1;l.each(t.children(),function(a){r(t,e,s,c,i,n,a)}),t.graph().nodeRankFactor=s}function r(t,e,n,i,a,o,s){var c=t.children(s);if(!c.length)return void(s!==e&&t.setEdge(e,s,{weight:0,minlen:n}));var h=u.addBorderNode(t,"_bt"),d=u.addBorderNode(t,"_bb"),f=t.node(s);t.setParent(h,s),f.borderTop=h,t.setParent(d,s),f.borderBottom=d,l.each(c,function(l){r(t,e,n,i,a,o,l);var u=t.node(l),c=u.borderTop?u.borderTop:l,f=u.borderBottom?u.borderBottom:l,g=u.borderTop?i:2*i,p=c!==f?1:a-o[s]+1;t.setEdge(h,c,{weight:g,minlen:p,nestingEdge:!0}),t.setEdge(f,d,{weight:g,minlen:p,nestingEdge:!0})}),t.parent(s)||t.setEdge(e,h,{weight:0,minlen:a+o[s]})}function a(t){function e(i,r){var a=t.children(i);a&&a.length&&l.each(a,function(t){e(t,r+1)}),n[i]=r}var n={};return l.each(t.children(),function(t){e(t,1)}),n}function o(t){return l.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}function s(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,l.each(t.edges(),function(e){var n=t.edge(e);n.nestingEdge&&t.removeEdge(e)})}var l=t("./lodash"),u=t("./util");e.exports={run:i,cleanup:s}},{"./lodash":10,"./util":29}],12:[function(t,e,n){"use strict";function i(t){t.graph().dummyChains=[],o.each(t.edges(),function(e){r(t,e)})}function r(t,e){var n=e.v,i=t.node(n).rank,r=e.w,a=t.node(r).rank,o=e.name,l=t.edge(e),u=l.labelRank;if(a!==i+1){t.removeEdge(e);var c,h,d;for(d=0,++i;a>i;++d,++i)l.points=[],h={width:0,height:0,edgeLabel:l,edgeObj:e,rank:i},c=s.addDummyNode(t,"edge",h,"_d"),i===u&&(h.width=l.width,h.height=l.height,h.dummy="edge-label",h.labelpos=l.labelpos),t.setEdge(n,c,{weight:l.weight},o),0===d&&t.graph().dummyChains.push(c),n=c;t.setEdge(n,r,{weight:l.weight},o)}}function a(t){o.each(t.graph().dummyChains,function(e){var n,i=t.node(e),r=i.edgeLabel;for(t.setEdge(i.edgeObj,r);i.dummy;)n=t.successors(e)[0],t.removeNode(e),r.points.push({x:i.x,y:i.y}),"edge-label"===i.dummy&&(r.x=i.x,r.y=i.y,r.width=i.width,r.height=i.height),e=n,i=t.node(e)})}var o=t("./lodash"),s=t("./util");e.exports={run:i,undo:a}},{"./lodash":10,"./util":29}],13:[function(t,e,n){function i(t,e,n){var i,a={};r.each(n,function(n){for(var r,o,s=t.parent(n);s;){if(r=t.parent(s),r?(o=a[r],a[r]=s):(o=i,i=s),o&&o!==s)return void e.setEdge(o,s);s=r}})}var r=t("../lodash");e.exports=i},{"../lodash":10}],14:[function(t,e,n){function i(t,e){return r.map(e,function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,function(e,n){var i=t.edge(n),r=t.node(n.v);return{sum:e.sum+i.weight*r.order,weight:e.weight+i.weight}},{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}})}var r=t("../lodash");e.exports=i},{"../lodash":10}],15:[function(t,e,n){function i(t,e,n){var i=r(t),s=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(e){return t.node(e)});return a.each(t.nodes(),function(r){var o=t.node(r),l=t.parent(r);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(s.setNode(r),s.setParent(r,l||i),a.each(t[n](r),function(e){var n=e.v===r?e.w:e.v,i=s.edge(n,r),o=a.isUndefined(i)?0:i.weight;s.setEdge(n,r,{weight:t.edge(e).weight+o})}),a.has(o,"minRank")&&s.setNode(r,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),s}function r(t){for(var e;t.hasNode(e=a.uniqueId("_root")););return e}var a=t("../lodash"),o=t("../graphlib").Graph;e.exports=i},{"../graphlib":7,"../lodash":10}],16:[function(t,e,n){"use strict";function i(t,e){for(var n=0,i=1;i<e.length;++i)n+=r(t,e[i-1],e[i]);return n}function r(t,e,n){for(var i=a.zipObject(n,a.map(n,function(t,e){return e})),r=a.flatten(a.map(e,function(e){return a.chain(t.outEdges(e)).map(function(e){return{pos:i[e.w],weight:t.edge(e).weight}}).sortBy("pos").value()}),!0),o=1;o<n.length;)o<<=1;var s=2*o-1;o-=1;var l=a.map(new Array(s),function(){return 0}),u=0;return a.each(r.forEach(function(t){var e=t.pos+o;l[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=l[e+1]),e=e-1>>1,l[e]+=t.weight;u+=t.weight*n})),u}var a=t("../lodash");e.exports=i},{"../lodash":10}],17:[function(t,e,n){"use strict";function i(t){var e=g.maxRank(t),n=r(t,s.range(1,e+1),"inEdges"),i=r(t,s.range(e-1,-1,-1),"outEdges"),c=l(t);o(t,c);for(var h,d=Number.POSITIVE_INFINITY,f=0,p=0;4>p;++f,++p){a(f%2?n:i,f%4>=2),c=g.buildLayerMatrix(t);var m=u(t,c);d>m&&(p=0,h=s.cloneDeep(c),d=m)}o(t,h)}function r(t,e,n){return s.map(e,function(e){return h(t,e,n)})}function a(t,e){var n=new f;s.each(t,function(t){var i=t.graph().root,r=c(t,i,n,e);s.each(r.vs,function(e,n){t.node(e).order=n}),d(t,n,r.vs)})}function o(t,e){s.each(e,function(e){s.each(e,function(e,n){t.node(e).order=n})})}var s=t("../lodash"),l=t("./init-order"),u=t("./cross-count"),c=t("./sort-subgraph"),h=t("./build-layer-graph"),d=t("./add-subgraph-constraints"),f=t("../graphlib").Graph,g=t("../util");e.exports=i},{"../graphlib":7,"../lodash":10,"../util":29,"./add-subgraph-constraints":13,"./build-layer-graph":15,"./cross-count":16,"./init-order":18,"./sort-subgraph":20}],18:[function(t,e,n){"use strict";function i(t){function e(i){if(!r.has(n,i)){n[i]=!0;var a=t.node(i);o[a.rank].push(i),r.each(t.successors(i),e)}}var n={},i=r.filter(t.nodes(),function(e){return!t.children(e).length}),a=r.max(r.map(i,function(e){return t.node(e).rank})),o=r.map(r.range(a+1),function(){return[]}),s=r.sortBy(i,function(e){return t.node(e).rank});return r.each(s,e),o}var r=t("../lodash");e.exports=i},{"../lodash":10}],19:[function(t,e,n){"use strict";function i(t,e){var n={};o.each(t,function(t,e){var i=n[t.v]={indegree:0,"in":[],out:[],vs:[t.v],i:e};o.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)}),o.each(e.edges(),function(t){var e=n[t.v],i=n[t.w];o.isUndefined(e)||o.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))});var i=o.filter(n,function(t){return!t.indegree});return r(i)}function r(t){function e(t){return function(e){e.merged||(o.isUndefined(e.barycenter)||o.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&a(t,e)}}function n(e){return function(n){n["in"].push(e),0===--n.indegree&&t.push(n)}}for(var i=[];t.length;){var r=t.pop();i.push(r),o.each(r["in"].reverse(),e(r)),o.each(r.out,n(r))}return o.chain(i).filter(function(t){return!t.merged}).map(function(t){return o.pick(t,["vs","i","barycenter","weight"])}).value()}function a(t,e){var n=0,i=0;t.weight&&(n+=t.barycenter*t.weight,i+=t.weight),e.weight&&(n+=e.barycenter*e.weight,i+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0}var o=t("../lodash");e.exports=i},{"../lodash":10}],20:[function(t,e,n){function i(t,e,n,c){var h=t.children(e),d=t.node(e),f=d?d.borderLeft:void 0,g=d?d.borderRight:void 0,p={};f&&(h=o.filter(h,function(t){return t!==f&&t!==g}));var m=s(t,h);o.each(m,function(e){if(t.children(e.v).length){var r=i(t,e.v,n,c);p[e.v]=r,o.has(r,"barycenter")&&a(e,r)}});var v=l(m,n);r(v,p);var y=u(v,c);if(f&&(y.vs=o.flatten([f,y.vs,g],!0),t.predecessors(f).length)){var I=t.node(t.predecessors(f)[0]),b=t.node(t.predecessors(g)[0]);o.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+I.order+b.order)/(y.weight+2),y.weight+=2}return y}function r(t,e){o.each(t,function(t){t.vs=o.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}function a(t,e){o.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}var o=t("../lodash"),s=t("./barycenter"),l=t("./resolve-conflicts"),u=t("./sort");
e.exports=i},{"../lodash":10,"./barycenter":14,"./resolve-conflicts":19,"./sort":21}],21:[function(t,e,n){function i(t,e){var n=s.partition(t,function(t){return o.has(t,"barycenter")}),i=n.lhs,l=o.sortBy(n.rhs,function(t){return-t.i}),u=[],c=0,h=0,d=0;i.sort(a(!!e)),d=r(u,l,d),o.each(i,function(t){d+=t.vs.length,u.push(t.vs),c+=t.barycenter*t.weight,h+=t.weight,d=r(u,l,d)});var f={vs:o.flatten(u,!0)};return h&&(f.barycenter=c/h,f.weight=h),f}function r(t,e,n){for(var i;e.length&&(i=o.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}function a(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}var o=t("../lodash"),s=t("../util");e.exports=i},{"../lodash":10,"../util":29}],22:[function(t,e,n){function i(t){var e=a(t);o.each(t.graph().dummyChains,function(n){for(var i=t.node(n),a=i.edgeObj,o=r(t,e,a.v,a.w),s=o.path,l=o.lca,u=0,c=s[u],h=!0;n!==a.w;){if(i=t.node(n),h){for(;(c=s[u])!==l&&t.node(c).maxRank<i.rank;)u++;c===l&&(h=!1)}if(!h){for(;u<s.length-1&&t.node(c=s[u+1]).minRank<=i.rank;)u++;c=s[u]}t.setParent(n,c),n=t.successors(n)[0]}})}function r(t,e,n,i){var r,a,o=[],s=[],l=Math.min(e[n].low,e[i].low),u=Math.max(e[n].lim,e[i].lim);r=n;do r=t.parent(r),o.push(r);while(r&&(e[r].low>l||u>e[r].lim));for(a=r,r=i;(r=t.parent(r))!==a;)s.push(r);return{path:o.concat(s.reverse()),lca:a}}function a(t){function e(r){var a=i;o.each(t.children(r),e),n[r]={low:a,lim:i++}}var n={},i=0;return o.each(t.children(),e),n}var o=t("./lodash");e.exports=i},{"./lodash":10}],23:[function(t,e,n){"use strict";function i(t,e){function n(e,n){var r=0,s=0,l=e.length,u=v.last(n);return v.each(n,function(e,c){var h=a(t,e),d=h?t.node(h).order:l;(h||e===u)&&(v.each(n.slice(s,c+1),function(e){v.each(t.predecessors(e),function(n){var a=t.node(n),s=a.order;!(r>s||s>d)||a.dummy&&t.node(e).dummy||o(i,n,e)})}),s=c+1,r=d)}),n}var i={};return v.reduce(e,n),i}function r(t,e){function n(e,n,i,a,s){var l;v.each(v.range(n,i),function(n){l=e[n],t.node(l).dummy&&v.each(t.predecessors(l),function(e){var n=t.node(e);n.dummy&&(n.order<a||n.order>s)&&o(r,e,l)})})}function i(e,i){var r,a=-1,o=0;return v.each(i,function(s,l){if("border"===t.node(s).dummy){var u=t.predecessors(s);u.length&&(r=t.node(u[0]).order,n(i,o,l,a,r),o=l,a=r)}n(i,o,i.length,r,e.length)}),i}var r={};return v.reduce(e,i),r}function a(t,e){return t.node(e).dummy?v.find(t.predecessors(e),function(e){return t.node(e).dummy}):void 0}function o(t,e,n){if(e>n){var i=e;e=n,n=i}var r=t[e];r||(t[e]=r={}),r[n]=!0}function s(t,e,n){if(e>n){var i=e;e=n,n=i}return v.has(t[e],n)}function l(t,e,n,i){var r={},a={},o={};return v.each(e,function(t){v.each(t,function(t,e){r[t]=t,a[t]=t,o[t]=e})}),v.each(e,function(t){var e=-1;v.each(t,function(t){var l=i(t);if(l.length){l=v.sortBy(l,function(t){return o[t]});for(var u=(l.length-1)/2,c=Math.floor(u),h=Math.ceil(u);h>=c;++c){var d=l[c];a[t]===t&&e<o[d]&&!s(n,t,d)&&(a[d]=t,a[t]=r[t]=r[d],e=o[d])}}})}),{root:r,align:a}}function u(t,e,n,i,r){function a(t){v.has(u,t)||(u[t]=!0,s[t]=v.reduce(l.inEdges(t),function(t,e){return a(e.v),Math.max(t,s[e.v]+l.edge(e))},0))}function o(e){if(2!==u[e]){u[e]++;var n=t.node(e),i=v.reduce(l.outEdges(e),function(t,e){return o(e.w),Math.min(t,s[e.w]-l.edge(e))},Number.POSITIVE_INFINITY);i!==Number.POSITIVE_INFINITY&&n.borderType!==h&&(s[e]=Math.max(s[e],i))}}var s={},l=c(t,e,n,r),u={};v.each(l.nodes(),a);var h=r?"borderLeft":"borderRight";return v.each(l.nodes(),o),v.each(i,function(t){s[t]=s[n[t]]}),s}function c(t,e,n,i){var r=new y,a=t.graph(),o=p(a.nodesep,a.edgesep,i);return v.each(e,function(e){var i;v.each(e,function(e){var a=n[e];if(r.setNode(a),i){var s=n[i],l=r.edge(s,a);r.setEdge(s,a,Math.max(o(t,e,i),l||0))}i=e})}),r}function h(t,e){return v.min(e,function(e){var n=v.min(e,function(e,n){return e-m(t,n)/2}),i=v.max(e,function(e,n){return e+m(t,n)/2});return i-n})}function d(t,e){var n=v.min(e),i=v.max(e);v.each(["u","d"],function(r){v.each(["l","r"],function(a){var o,s=r+a,l=t[s];l!==e&&(o="l"===a?n-v.min(l):i-v.max(l),o&&(t[s]=v.mapValues(l,function(t){return t+o})))})})}function f(t,e){return v.mapValues(t.ul,function(n,i){if(e)return t[e.toLowerCase()][i];var r=v.sortBy(v.pluck(t,i));return(r[1]+r[2])/2})}function g(t){var e,n=I.buildLayerMatrix(t),a=v.merge(i(t,n),r(t,n)),o={};v.each(["u","d"],function(i){e="u"===i?n:v.values(n).reverse(),v.each(["l","r"],function(n){"r"===n&&(e=v.map(e,function(t){return v.values(t).reverse()}));var r=v.bind("u"===i?t.predecessors:t.successors,t),s=l(t,e,a,r),c=u(t,e,s.root,s.align,"r"===n);"r"===n&&(c=v.mapValues(c,function(t){return-t})),o[i+n]=c})});var s=h(t,o);return d(o,s),f(o,t.graph().align)}function p(t,e,n){return function(i,r,a){var o,s=i.node(r),l=i.node(a),u=0;if(u+=s.width/2,v.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":o=-s.width/2;break;case"r":o=s.width/2}if(o&&(u+=n?o:-o),o=0,u+=(s.dummy?e:t)/2,u+=(l.dummy?e:t)/2,u+=l.width/2,v.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":o=l.width/2;break;case"r":o=-l.width/2}return o&&(u+=n?o:-o),o=0,u}}function m(t,e){return t.node(e).width}var v=t("../lodash"),y=t("../graphlib").Graph,I=t("../util");e.exports={positionX:g,findType1Conflicts:i,findType2Conflicts:r,addConflict:o,hasConflict:s,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:d,findSmallestWidthAlignment:h,balance:f}},{"../graphlib":7,"../lodash":10,"../util":29}],24:[function(t,e,n){"use strict";function i(t){t=o.asNonCompoundGraph(t),r(t),a.each(s(t),function(e,n){t.node(n).x=e})}function r(t){var e=o.buildLayerMatrix(t),n=t.graph().ranksep,i=0;a.each(e,function(e){var r=a.max(a.map(e,function(e){return t.node(e).height}));a.each(e,function(e){t.node(e).y=i+r/2}),i+=r+n})}var a=t("../lodash"),o=t("../util"),s=t("./bk").positionX;e.exports=i},{"../lodash":10,"../util":29,"./bk":23}],25:[function(t,e,n){"use strict";function i(t){var e=new l({directed:!1}),n=t.nodes()[0],i=t.nodeCount();e.setNode(n,{});for(var s,c;r(e,t)<i;)s=a(e,t),c=e.hasNode(s.v)?u(t,s):-u(t,s),o(e,t,c);return e}function r(t,e){function n(i){s.each(e.nodeEdges(i),function(r){var a=r.v,o=i===a?r.w:a;t.hasNode(o)||u(e,r)||(t.setNode(o,{}),t.setEdge(i,o,{}),n(o))})}return s.each(t.nodes(),n),t.nodeCount()}function a(t,e){return s.min(e.edges(),function(n){return t.hasNode(n.v)!==t.hasNode(n.w)?u(e,n):void 0})}function o(t,e,n){s.each(t.nodes(),function(t){e.node(t).rank+=n})}var s=t("../lodash"),l=t("../graphlib").Graph,u=t("./util").slack;e.exports=i},{"../graphlib":7,"../lodash":10,"./util":28}],26:[function(t,e,n){"use strict";function i(t){switch(t.graph().ranker){case"network-simplex":a(t);break;case"tight-tree":r(t);break;case"longest-path":c(t);break;default:a(t)}}function r(t){s(t),l(t)}function a(t){u(t)}var o=t("./util"),s=o.longestPath,l=t("./feasible-tree"),u=t("./network-simplex");e.exports=i;var c=s},{"./feasible-tree":25,"./network-simplex":27,"./util":28}],27:[function(t,e,n){"use strict";function i(t){t=C(t),y(t);var e=m(t);s(e),r(e,t);for(var n,i;n=u(e);)i=c(e,t,n),h(e,t,n,i)}function r(t,e){var n=b(t,t.nodes());n=n.slice(0,n.length-1),p.each(n,function(n){a(t,e,n)})}function a(t,e,n){var i=t.node(n),r=i.parent;t.edge(n,r).cutvalue=o(t,e,n)}function o(t,e,n){var i=t.node(n),r=i.parent,a=!0,o=e.edge(n,r),s=0;return o||(a=!1,o=e.edge(r,n)),s=o.weight,p.each(e.nodeEdges(n),function(i){var o=i.v===n,l=o?i.w:i.v;if(l!==r){var u=o===a,c=e.edge(i).weight;if(s+=u?c:-c,f(t,n,l)){var h=t.edge(n,l).cutvalue;s+=u?-h:h}}}),s}function s(t,e){arguments.length<2&&(e=t.nodes()[0]),l(t,{},1,e)}function l(t,e,n,i,r){var a=n,o=t.node(i);return e[i]=!0,p.each(t.neighbors(i),function(r){p.has(e,r)||(n=l(t,e,n,r,i))}),o.low=a,o.lim=n++,r?o.parent=r:delete o.parent,n}function u(t){return p.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function c(t,e,n){var i=n.v,r=n.w;e.hasEdge(i,r)||(i=n.w,r=n.v);var a=t.node(i),o=t.node(r),s=a,l=!1;a.lim>o.lim&&(s=o,l=!0);var u=p.filter(e.edges(),function(e){return l===g(t,t.node(e.v),s)&&l!==g(t,t.node(e.w),s)});return p.min(u,function(t){return v(e,t)})}function h(t,e,n,i){var a=n.v,o=n.w;t.removeEdge(a,o),t.setEdge(i.v,i.w,{}),s(t),r(t,e),d(t,e)}function d(t,e){var n=p.find(t.nodes(),function(t){return!e.node(t).parent}),i=I(t,n);i=i.slice(1),p.each(i,function(n){var i=t.node(n).parent,r=e.edge(n,i),a=!1;r||(r=e.edge(i,n),a=!0),e.node(n).rank=e.node(i).rank+(a?r.minlen:-r.minlen)})}function f(t,e,n){return t.hasEdge(e,n)}function g(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}var p=t("../lodash"),m=t("./feasible-tree"),v=t("./util").slack,y=t("./util").longestPath,I=t("../graphlib").alg.preorder,b=t("../graphlib").alg.postorder,C=t("../util").simplify;e.exports=i,i.initLowLimValues=s,i.initCutValues=r,i.calcCutValue=o,i.leaveEdge=u,i.enterEdge=c,i.exchangeEdges=h},{"../graphlib":7,"../lodash":10,"../util":29,"./feasible-tree":25,"./util":28}],28:[function(t,e,n){"use strict";function i(t){function e(i){var r=t.node(i);if(a.has(n,i))return r.rank;n[i]=!0;var o=a.min(a.map(t.outEdges(i),function(n){return e(n.w)-t.edge(n).minlen}));return o===Number.POSITIVE_INFINITY&&(o=0),r.rank=o}var n={};a.each(t.sources(),e)}function r(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var a=t("../lodash");e.exports={longestPath:i,slack:r}},{"../lodash":10}],29:[function(t,e,n){"use strict";function i(t,e,n,i){var r;do r=v.uniqueId(i);while(t.hasNode(r));return n.dummy=e,t.setNode(r,n),r}function r(t){var e=(new y).setGraph(t.graph());return v.each(t.nodes(),function(n){e.setNode(n,t.node(n))}),v.each(t.edges(),function(n){var i=e.edge(n.v,n.w)||{weight:0,minlen:1},r=t.edge(n);e.setEdge(n.v,n.w,{weight:i.weight+r.weight,minlen:Math.max(i.minlen,r.minlen)})}),e}function a(t){var e=new y({multigraph:t.isMultigraph()}).setGraph(t.graph());return v.each(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),v.each(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e}function o(t){var e=v.map(t.nodes(),function(e){var n={};return v.each(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return v.zipObject(t.nodes(),e)}function s(t){var e=v.map(t.nodes(),function(e){var n={};return v.each(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return v.zipObject(t.nodes(),e)}function l(t,e){var n=t.x,i=t.y,r=e.x-n,a=e.y-i,o=t.width/2,s=t.height/2;if(!r&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(a)*o>Math.abs(r)*s?(0>a&&(s=-s),l=s*r/a,u=s):(0>r&&(o=-o),l=o,u=o*a/r),{x:n+l,y:i+u}}function u(t){var e=v.map(v.range(f(t)+1),function(){return[]});return v.each(t.nodes(),function(n){var i=t.node(n),r=i.rank;v.isUndefined(r)||(e[r][i.order]=n)}),e}function c(t){var e=v.min(v.map(t.nodes(),function(e){return t.node(e).rank}));v.each(t.nodes(),function(n){var i=t.node(n);v.has(i,"rank")&&(i.rank-=e)})}function h(t){var e=v.min(v.map(t.nodes(),function(e){return t.node(e).rank})),n=[];v.each(t.nodes(),function(i){var r=t.node(i).rank-e;n[r]||(n[r]=[]),n[r].push(i)});var i=0,r=t.graph().nodeRankFactor;v.each(n,function(e,n){v.isUndefined(e)&&n%r!==0?--i:i&&v.each(e,function(e){t.node(e).rank+=i})})}function d(t,e,n,r){var a={width:0,height:0};return arguments.length>=4&&(a.rank=n,a.order=r),i(t,"border",a,e)}function f(t){return v.max(v.map(t.nodes(),function(e){var n=t.node(e).rank;return v.isUndefined(n)?void 0:n}))}function g(t,e){var n={lhs:[],rhs:[]};return v.each(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n}function p(t,e){var n=v.now();try{return e()}finally{console.log(t+" time: "+(v.now()-n)+"ms")}}function m(t,e){return e()}var v=t("./lodash"),y=t("./graphlib").Graph;e.exports={addDummyNode:i,simplify:r,asNonCompoundGraph:a,successorWeights:o,predecessorWeights:s,intersectRect:l,buildLayerMatrix:u,normalizeRanks:c,removeEmptyRanks:h,addBorderNode:d,maxRank:f,partition:g,time:p,notime:m}},{"./graphlib":7,"./lodash":10}],30:[function(t,e,n){e.exports="0.7.4"},{}]},{},[1])(1)}),function(t,e){if("function"==typeof define&&define.amd)define(["backbone","lodash","jquery"],function(n,i,r){return n.$=r,e(t,n,i,r)});else if("undefined"!=typeof exports){var n=require("backbone"),i=require("lodash"),r=n.$=require("jquery");module.exports=e(t,n,i,r)}else{var n=t.Backbone,i=t._,r=n.$=t.jQuery||t.$;t.joint=e(t,n,i,r),t.g=t.joint.g,t.V=t.Vectorizer=t.joint.V}}(this,function(t,e,n,i){var r,a,o=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);var i;void 0===n&&Object(e)!==e?(i=e.split(-1===e.indexOf("@")?" ":"@"),this.x=parseInt(i[0],10),this.y=parseInt(i[1],10)):Object(e)===e?(this.x=e.x,this.y=e.y):(this.x=e,this.y=n)}function e(n,i){return this instanceof e?(this.start=t(n),void(this.end=t(i))):new e(n,i)}function n(t,e,i,r){return this instanceof n?(void 0===e&&(e=t.y,i=t.width,r=t.height,t=t.x),this.x=t,this.y=e,this.width=i,void(this.height=r)):new n(t,e,i,r)}function i(e,n,r){return this instanceof i?(e=t(e),this.x=e.x,this.y=e.y,this.a=n,void(this.b=r)):new i(e,n,r)}var r=Math,a=r.abs,s=r.cos,l=r.sin,u=r.sqrt,c=r.min,h=r.max,d=(r.atan,r.atan2),f=(r.acos,r.round),g=r.floor,p=r.PI,m=r.random,v=function(t){return 180*t/p%360},y=function(t,e){return e=e||!1,t=e?t:t%360,t*p/180},I=function(t,e){return e*Math.round(t/e)},b=function(t){return t%360+(0>t?360:0)};t.prototype={toString:function(){return this.x+"@"+this.y},adhereToRect:function(t){return t.containsPoint(this)?this:(this.x=c(h(this.x,t.x),t.x+t.width),this.y=c(h(this.y,t.y),t.y+t.height),this)},theta:function(e){e=t(e);var n=-(e.y-this.y),i=e.x-this.x,r=10,a=0==n.toFixed(r)&&0==i.toFixed(r)?0:d(n,i);return 0>a&&(a=2*p+a),180*a/p},distance:function(t){return e(this,t).length()},manhattanDistance:function(t){return a(t.x-this.x)+a(t.y-this.y)},offset:function(t,e){return this.x+=t||0,this.y+=e||0,this},magnitude:function(){return u(this.x*this.x+this.y*this.y)||.01},update:function(t,e){return this.x=t||0,this.y=e||0,this},round:function(t){return this.x=t?this.x.toFixed(t):f(this.x),this.y=t?this.y.toFixed(t):f(this.y),this},normalize:function(t){var e=(t||1)/this.magnitude();return this.x=e*this.x,this.y=e*this.y,this},difference:function(e){return t(this.x-e.x,this.y-e.y)},bearing:function(t){return e(this,t).bearing()},toPolar:function(e){e=e&&t(e)||t(0,0);var n=this.x,i=this.y;return this.x=u((n-e.x)*(n-e.x)+(i-e.y)*(i-e.y)),this.y=y(e.theta(t(n,i))),this},rotate:function(e,n){n=(n+360)%360,this.toPolar(e),this.y+=y(n);var i=t.fromPolar(this.x,this.y,e);return this.x=i.x,this.y=i.y,this},move:function(e,n){var i=y(t(e).theta(this));return this.offset(s(i)*n,-l(i)*n)},changeInAngle:function(e,n,i){return t(this).offset(-e,-n).theta(i)-this.theta(i)},equals:function(t){return this.x===t.x&&this.y===t.y},snapToGrid:function(t,e){return this.x=I(this.x,t),this.y=I(this.y,e||t),this},reflection:function(e){return t(e).move(this,this.distance(e))},clone:function(){return t(this)}},t.fromPolar=function(e,n,i){i=i&&t(i)||t(0,0);var r=a(e*s(n)),o=a(e*l(n)),u=b(v(n));return 90>u?o=-o:180>u?(r=-r,o=-o):270>u&&(r=-r),t(i.x+r,i.y+o)},t.random=function(e,n,i,r){return t(g(m()*(n-e+1)+e),g(m()*(r-i+1)+i))},e.prototype={toString:function(){return this.start.toString()+" "+this.end.toString()},length:function(){return u(this.squaredLength())},squaredLength:function(){var t=this.start.x,e=this.start.y,n=this.end.x,i=this.end.y;return(t-=n)*t+(e-=i)*e},midpoint:function(){return t((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},intersection:function(e){var n=t(this.end.x-this.start.x,this.end.y-this.start.y),i=t(e.end.x-e.start.x,e.end.y-e.start.y),r=n.x*i.y-n.y*i.x,a=t(e.start.x-this.start.x,e.start.y-this.start.y),o=a.x*i.y-a.y*i.x,s=a.x*n.y-a.y*n.x;if(0===r||0>o*r||0>s*r)return null;if(r>0){if(o>r||s>r)return null}else if(r>o||r>s)return null;return t(this.start.x+o*n.x/r,this.start.y+o*n.y/r)},bearing:function(){var t=y(this.start.y),e=y(this.end.y),n=this.start.x,i=this.end.x,r=y(i-n),a=l(r)*s(e),o=s(t)*l(e)-l(t)*s(e)*s(r),u=v(d(a,o)),c=["NE","E","SE","S","SW","W","NW","N"],h=u-22.5;return 0>h&&(h+=360),h=parseInt(h/45),c[h]},pointAt:function(e){var n=(1-e)*this.start.x+e*this.end.x,i=(1-e)*this.start.y+e*this.end.y;return t(n,i)},pointOffset:function(t){return((this.end.x-this.start.x)*(t.y-this.start.y)-(this.end.y-this.start.y)*(t.x-this.start.x))/2},clone:function(){return e(this)}},n.prototype={toString:function(){return this.origin().toString()+" "+this.corner().toString()},equals:function(t){var e=o.rect(this).normalize(),n=o.rect(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},origin:function(){return t(this.x,this.y)},corner:function(){return t(this.x+this.width,this.y+this.height)},topRight:function(){return t(this.x+this.width,this.y)},bottomLeft:function(){return t(this.x,this.y+this.height)},center:function(){return t(this.x+this.width/2,this.y+this.height/2)},intersect:function(t){var e=this.origin(),i=this.corner(),r=t.origin(),a=t.corner();if(a.x<=e.x||a.y<=e.y||r.x>=i.x||r.y>=i.y)return null;var o=Math.max(e.x,r.x),s=Math.max(e.y,r.y);return n(o,s,Math.min(i.x,a.x)-o,Math.min(i.y,a.y)-s)},union:function(t){var e=this.origin(),i=this.corner(),r=t.origin(),a=t.corner(),o=Math.min(e.x,r.x),s=Math.min(e.y,r.y),l=Math.max(i.x,a.x),u=Math.max(i.y,a.y);return n(o,s,l-o,u-s)},sideNearestToPoint:function(e){e=t(e);var n=e.x-this.x,i=this.x+this.width-e.x,r=e.y-this.y,a=this.y+this.height-e.y,o=n,s="left";return o>i&&(o=i,s="right"),o>r&&(o=r,s="top"),o>a&&(o=a,s="bottom"),s},containsPoint:function(e){return e=t(e),e.x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(t){var e=n(t).normalize(),i=e.width,r=e.height,a=e.x,o=e.y,s=this.width,l=this.height;if(0>(s|l|i|r))return!1;var u=this.x,c=this.y;if(u>a||c>o)return!1;if(s+=u,i+=a,a>=i){if(s>=u||i>s)return!1}else if(s>=u&&i>s)return!1;if(l+=c,r+=o,o>=r){if(l>=c||r>l)return!1}else if(l>=c&&r>l)return!1;return!0},pointNearestToPoint:function(e){if(e=t(e),this.containsPoint(e)){var n=this.sideNearestToPoint(e);switch(n){case"right":return t(this.x+this.width,e.y);case"left":return t(this.x,e.y);case"bottom":return t(e.x,this.y+this.height);case"top":return t(e.x,this.y)}}return e.adhereToRect(this)},intersectionWithLineFromCenterToPoint:function(n,i){n=t(n);var r,a=t(this.x+this.width/2,this.y+this.height/2);i&&n.rotate(a,i);for(var o=[e(this.origin(),this.topRight()),e(this.topRight(),this.corner()),e(this.corner(),this.bottomLeft()),e(this.bottomLeft(),this.origin())],s=e(a,n),l=o.length-1;l>=0;--l){var u=o[l].intersection(s);if(null!==u){r=u;break}}return r&&i&&r.rotate(a,-i),r},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},round:function(t){return this.x=t?this.x.toFixed(t):f(this.x),this.y=t?this.y.toFixed(t):f(this.y),this.width=t?this.width.toFixed(t):f(this.width),this.height=t?this.height.toFixed(t):f(this.height),this},normalize:function(){var t=this.x,e=this.y,n=this.width,i=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,i=-this.height),this.x=t,this.y=e,this.width=n,this.height=i,this},bbox:function(t){var e=y(t||0),i=a(l(e)),r=a(s(e)),o=this.width*r+this.height*i,u=this.width*i+this.height*r;return n(this.x+(this.width-o)/2,this.y+(this.height-u)/2,o,u)},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),i=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=i.x-n.x,this.height=i.y-n.y,this},clone:function(){return n(this)}},i.prototype={toString:function(){return t(this.x,this.y).toString()+" "+this.a+" "+this.b},bbox:function(){return n(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},intersectionWithLineFromCenterToPoint:function(e,n){e=t(e),n&&e.rotate(t(this.x,this.y),n);var i,r=e.x-this.x,a=e.y-this.y;if(0===r)return i=this.bbox().pointNearestToPoint(e),n?i.rotate(t(this.x,this.y),-n):i;var o=a/r,s=o*o,l=this.a*this.a,c=this.b*this.b,h=u(1/(1/l+s/c));h=0>r?-h:h;var d=o*h;return i=t(this.x+h,this.y+d),n?i.rotate(t(this.x,this.y),-n):i},clone:function(){return i(this)}};var C={curveThroughPoints:function(t){for(var e=this.getCurveControlPoints(t),n=["M",t[0].x,t[0].y],i=0;i<e[0].length;i++)n.push("C",e[0][i].x,e[0][i].y,e[1][i].x,e[1][i].y,t[i+1].x,t[i+1].y);return n},getCurveControlPoints:function(e){var n,i=[],r=[],a=e.length-1;if(1==a)return i[0]=t((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),r[0]=t(2*i[0].x-e[0].x,2*i[0].y-e[0].y),[i,r];var o=[];for(n=1;a-1>n;n++)o[n]=4*e[n].x+2*e[n+1].x;o[0]=e[0].x+2*e[1].x,o[a-1]=(8*e[a-1].x+e[a].x)/2;var s=this.getFirstControlPoints(o);for(n=1;a-1>n;++n)o[n]=4*e[n].y+2*e[n+1].y;o[0]=e[0].y+2*e[1].y,o[a-1]=(8*e[a-1].y+e[a].y)/2;var l=this.getFirstControlPoints(o);for(n=0;a>n;n++)i.push(t(s[n],l[n])),a-1>n?r.push(t(2*e[n+1].x-s[n+1],2*e[n+1].y-l[n+1])):r.push(t((e[a].x+s[a-1])/2,(e[a].y+l[a-1])/2));return[i,r]},getFirstControlPoints:function(t){var e=t.length,n=[],i=[],r=2;n[0]=t[0]/r;for(var a=1;e>a;a++)i[a]=1/r,r=(e-1>a?4:3.5)-i[a],n[a]=(t[a]-n[a-1])/r;for(a=1;e>a;a++)n[e-a-1]-=i[e-a]*n[e-a];return n},getInversionSolver:function(t,e,n,i){function r(t,e){var n=a[t],i=a[e];return function(r){var a=(t%3?3:1)*(e%3?3:1),o=r.x*(n.y-i.y)+r.y*(i.x-n.x)+n.x*i.y-n.y*i.x;return a*o}}var a=arguments;return function(n){var i=3*r(2,3)(e),a=r(1,3)(t)/i,o=-r(2,3)(t)/i,s=a*r(3,1)(n)+o*(r(3,0)(n)+r(2,1)(n))+r(2,0)(n),l=a*r(3,0)(n)+o*r(2,0)(n)+r(1,0)(n);return l/(l-s)}},getCurveDivider:function(t,n,i,r){return function(a){var o=e(t,n).pointAt(a),s=e(n,i).pointAt(a),l=e(i,r).pointAt(a),u=e(o,s).pointAt(a),c=e(s,l).pointAt(a),h=e(u,c).pointAt(a);return[{p0:t,p1:o,p2:u,p3:h},{p0:h,p1:c,p2:l,p3:r}]}}},w={linear:function(t,e,n){var i=t[1]-t[0],r=e[1]-e[0];return(n-t[0])/i*r+e[0]||0}};return{toDeg:v,toRad:y,snapToGrid:I,normalizeAngle:b,point:t,line:e,rect:n,ellipse:i,bezier:C,scale:w}}();r=a=function(){function t(){var t=++A+"";return"v-"+t}function e(t){return(t||"").replace(/ /g," ")}function n(t){return t===Object(t)}function i(t){return"[object Array]"==Object.prototype.toString.call(t)}function r(t){var e='<svg xmlns="'+C.xmlns+'" xmlns:xlink="'+C.xlink+'" version="'+w+'">'+(t||"")+"</svg>",n=a(e,{async:!1});return n.documentElement}function a(t,e){e=e||{};var n;try{var i=new DOMParser;"undefined"!=typeof e.async&&(i.async=e.async),n=i.parseFromString(t,"text/xml")}catch(r){n=void 0}if(!n||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return n}function s(t,e,n){var i,a;if(t){if("object"==typeof t)return new d(t);if(e=e||{},"svg"===t.toLowerCase())return new d(r());if("<"===t[0]){var o=r(t);if(o.childNodes.length>1){var s=[];for(i=0,a=o.childNodes.length;a>i;i++){var u=o.childNodes[i];s.push(new d(document.importNode(u,!0)))}return s}return new d(document.importNode(o.firstChild,!0))}t=document.createElementNS(C.xmlns,t);for(var c in e)l(t,c,e[c]);for("[object Array]"!=Object.prototype.toString.call(n)&&(n=[n]),i=0,a=n[0]&&n.length||0;a>i;i++){var h=n[i];t.appendChild(h instanceof d?h.node:h)}return new d(t)}}function l(t,e,n){if(e.indexOf(":")>-1){var i=e.split(":");t.setAttributeNS(C[i[0]],i[1],n)}else"id"===e?t.id=n:t.setAttribute(e,n)}function u(t){var e,n,i;if(t){var r=/[ ,]+/,a=t.match(/translate\((.*)\)/);a&&(e=a[1].split(r));var o=t.match(/rotate\((.*)\)/);o&&(n=o[1].split(r));var s=t.match(/scale\((.*)\)/);s&&(i=s[1].split(r))}var l=i&&i[0]?parseFloat(i[0]):1;return{translate:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotate:{angle:n&&n[0]?parseInt(n[0],10):0,cx:n&&n[1]?parseInt(n[1],10):void 0,cy:n&&n[2]?parseInt(n[2],10):void 0},scale:{sx:l,sy:i&&i[1]?parseFloat(i[1]):l}}}function c(t,e){var n=e.x*t.a+e.y*t.c+0,i=e.x*t.b+e.y*t.d+0;return{x:n,y:i}}function h(t){var e=c(t,{x:0,y:1}),n=c(t,{x:1,y:0}),i=180/Math.PI*Math.atan2(e.y,e.x)-90,r=180/Math.PI*Math.atan2(n.y,n.x);return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),skewX:i,skewY:r,rotation:i}}function d(e){e instanceof d&&(e=e.node),this.node=e,this.node.id||(this.node.id=t())}function f(t){t=s(t);var e=["M",t.attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ");return e}function g(t){t=s(t);for(var e,n=t.node.points,i=[],r=0;r<n.length;r++)e=n[r],i.push(0===r?"M":"L",e.x,e.y);return i.push("Z"),i.join(" ")}function p(t){t=s(t);for(var e,n=t.node.points,i=[],r=0;r<n.length;r++)e=n[r],i.push(0===r?"M":"L",e.x,e.y);return i.join(" ")}function m(t){t=s(t);var e=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,i=parseFloat(t.attr("r")),r=i*x,a=["M",e,n-i,"C",e+r,n-i,e+i,n-r,e+i,n,"C",e+i,n+r,e+r,n+i,e,n+i,"C",e-r,n+i,e-i,n+r,e-i,n,"C",e-i,n-r,e-r,n-i,e,n-i,"Z"].join(" ");return a}function v(t){t=s(t);var e=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,i=parseFloat(t.attr("rx")),r=parseFloat(t.attr("ry"))||i,a=i*x,o=r*x,l=["M",e,n-r,"C",e+a,n-r,e+i,n-o,e+i,n,"C",e+i,n+o,e+a,n+r,e,n+r,"C",e-a,n+r,e-i,n+o,e-i,n,"C",e-i,n-o,e-a,n-r,e,n-r,"Z"].join(" ");return l}function y(t){t=s(t);var e,n=parseFloat(t.attr("x"))||0,i=parseFloat(t.attr("y"))||0,r=parseFloat(t.attr("width"))||0,a=parseFloat(t.attr("height"))||0,l=parseFloat(t.attr("rx"))||0,u=parseFloat(t.attr("ry"))||0,c=o.rect(n,i,r,a);if(l||u){var h=n+r,d=i+a;e=["M",n+l,i,"L",h-l,i,"Q",h,i,h,i+u,"L",h,i+a-u,"Q",h,d,h-l,d,"L",n+l,d,"Q",n,d,n,d-l,"L",n,i+u,"Q",n,i,n+l,i,"Z"].join(" ")}else e=["M",c.origin().x,c.origin().y,"H",c.corner().x,"V",c.corner().y,"H",c.origin().x,"V",c.origin().y,"Z"].join(" ");return e}function I(t){var e=t.rx||t["top-rx"]||0,n=t.rx||t["bottom-rx"]||0,i=t.ry||t["top-ry"]||0,r=t.ry||t["bottom-ry"]||0;return["M",t.x,t.y+i,"v",t.height-i-r,"a",n,r,0,0,0,n,r,"h",t.width-2*n,"a",n,r,0,0,0,n,-r,"v",-(t.height-r-i),"a",e,i,0,0,0,-e,-i,"h",-(t.width-2*e),"a",e,i,0,0,0,-e,i].join(" ")}var b="object"==typeof window&&!(!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"));if(!b)return function(){};var C={xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},w="1.1",A=0;d.prototype={getTransformToElement:function(t){return t.getScreenCTM().inverse().multiply(this.node.getScreenCTM())},translate:function(t,e,n){n=n||{},e=e||0;var i=this.attr("transform")||"",r=u(i);if("undefined"==typeof t)return r.translate;i=i.replace(/translate\([^\)]*\)/g,"").trim();var a=n.absolute?t:r.translate.tx+t,o=n.absolute?e:r.translate.ty+e,s="translate("+a+","+o+")";return this.attr("transform",(s+" "+i).trim()),this},rotate:function(t,e,n,i){i=i||{};var r=this.attr("transform")||"",a=u(r);if("undefined"==typeof t)return a.rotate;r=r.replace(/rotate\([^\)]*\)/g,"").trim(),t%=360;var o=i.absolute?t:a.rotate.angle+t,s=void 0!==e&&void 0!==n?","+e+","+n:"",l="rotate("+o+s+")";return this.attr("transform",(r+" "+l).trim()),this},scale:function(t,e){e="undefined"==typeof e?t:e;var n=this.attr("transform")||"",i=u(n);if("undefined"==typeof t)return i.scale;n=n.replace(/scale\([^\)]*\)/g,"").trim();var r="scale("+t+","+e+")";return this.attr("transform",(n+" "+r).trim()),this},bbox:function(t,e){if(!this.node.ownerSVGElement)return{x:0,y:0,width:0,height:0};var n;try{n=this.node.getBBox(),n={x:n.x,y:n.y,width:n.width,height:n.height}}catch(i){n={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}if(t)return n;var r=this.getTransformToElement(e||this.node.ownerSVGElement);return N.transformRect(n,r)},text:function(t,r){t=e(t),r=r||{};var a,o=t.split("\n"),l=0,u=this.attr("y");u||this.attr("y","0.8em"),this.attr("display",t?null:"none"),this.node.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.node.textContent="";var c=this.node;if(r.textPath){var h=this.find("defs");0===h.length&&(h=s("defs"),this.append(h));var d=Object(r.textPath)===r.textPath?r.textPath.d:r.textPath;if(d){var f=s("path",{d:d});h.append(f)}var g=s("textPath");!r.textPath["xlink:href"]&&f&&g.attr("xlink:href","#"+f.node.id),Object(r.textPath)===r.textPath&&g.attr(r.textPath),this.append(g),c=g.node}for(var p=0,l=0;l<o.length;l++){var m=o[l],v=r.lineHeight||"1em";"auto"===r.lineHeight&&(v="1.5em");var y=N("tspan",{dy:0==l?"0em":v,x:this.attr("x")||0});if(y.addClass("v-line"),m)if(r.annotations){for(var I=0,b=N.annotateString(o[l],i(r.annotations)?r.annotations:[r.annotations],{offset:-p,includeAnnotationIndices:r.includeAnnotationIndices}),C=0;C<b.length;C++){var w=b[C];if(n(w)){var A=parseInt(w.attrs["font-size"],10);A&&A>I&&(I=A),a=N("tspan",w.attrs),r.includeAnnotationIndices&&a.attr("annotations",w.annotations),w.attrs["class"]&&a.addClass(w.attrs["class"]),a.node.textContent=w.t}else a=document.createTextNode(w||" ");y.append(a)}"auto"===r.lineHeight&&I&&0!==l&&y.attr("dy",1.2*I+"px")}else y.node.textContent=m;else y.addClass("v-empty-line"),y.node.style.opacity=0,y.node.textContent="-";N(c).append(y),p+=m.length+1}return this},attr:function(t,e){if("undefined"==typeof t){for(var n=this.node.attributes,i={},r=0;r<n.length;r++)i[n[r].nodeName]=n[r].nodeValue;return i}if("string"==typeof t&&"undefined"==typeof e)return this.node.getAttribute(t);if("object"==typeof t)for(var a in t)t.hasOwnProperty(a)&&l(this.node,a,t[a]);else l(this.node,t,e);return this},remove:function(){this.node.parentNode&&this.node.parentNode.removeChild(this.node)},append:function(t){var e=t;"[object Array]"!==Object.prototype.toString.call(t)&&(e=[t]);for(var n=0,i=e.length;i>n;n++)t=e[n],this.node.appendChild(t instanceof d?t.node:t);return this},prepend:function(t){this.node.insertBefore(t instanceof d?t.node:t,this.node.firstChild)},svg:function(){return this.node instanceof window.SVGSVGElement?this:N(this.node.ownerSVGElement)},defs:function(){var t=this.svg().node.getElementsByTagName("defs");return t&&t.length?N(t[0]):void 0},clone:function(){var e=N(this.node.cloneNode(!0));return e.node.id=t(),e},findOne:function(t){var e=this.node.querySelector(t);return e?N(e):void 0},find:function(t){var e=this.node.querySelectorAll(t);return Array.prototype.map.call(e,N)},index:function(){for(var t=0,e=this.node.previousSibling;e;)1===e.nodeType&&t++,e=e.previousSibling;return t},findParentByClass:function(t,e){e=e||this.node.ownerSVGElement;for(var n=this.node.parentNode;n&&n!==e;){if(N(n).hasClass(t))return N(n);n=n.parentNode}return null},toLocalPoint:function(t,e){var n=this.svg().node,i=n.createSVGPoint();i.x=t,i.y=e;try{var r=i.matrixTransform(n.getScreenCTM().inverse()),a=this.getTransformToElement(n).inverse()}catch(o){return i}return r.matrixTransform(a)},translateCenterToPoint:function(t){var e=this.bbox(),n=o.rect(e).center();this.translate(t.x-n.x,t.y-n.y)},translateAndAutoOrient:function(t,e,n){var i=this.scale();this.attr("transform",""),this.scale(i.sx,i.sy);var r=this.svg().node,a=this.bbox(!1,n),s=r.createSVGTransform();s.setTranslate(-a.x-a.width/2,-a.y-a.height/2);var l=r.createSVGTransform(),u=o.point(t).changeInAngle(t.x-e.x,t.y-e.y,e);l.setRotate(u,0,0);var c=r.createSVGTransform(),d=o.point(t).move(e,a.width/2);c.setTranslate(t.x+(t.x-d.x),t.y+(t.y-d.y));var f=this.getTransformToElement(n),g=r.createSVGTransform();g.setMatrix(c.matrix.multiply(l.matrix.multiply(s.matrix.multiply(f))));var p=h(g.matrix);return this.translate(p.translateX,p.translateY),this.rotate(p.rotation),this},animateAlongPath:function(t,e){var n=N("animateMotion",t),i=N("mpath",{"xlink:href":"#"+N(e).node.id});n.append(i),this.append(n);try{n.node.beginElement()}catch(r){if("fake"===document.documentElement.getAttribute("smiling")){var a=n.node;a.animators=[];var o=a.getAttribute("id");o&&(id2anim[o]=a);for(var s=getTargets(a),l=0,u=s.length;u>l;l++){var c=s[l],h=new Animator(a,c,l);animators.push(h),a.animators[l]=h,h.register()}}}},hasClass:function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(this.node.getAttribute("class"))},addClass:function(t){if(!this.hasClass(t)){var e=this.node.getAttribute("class")||"";this.node.setAttribute("class",(e+" "+t).trim())}return this},removeClass:function(t){if(this.hasClass(t)){var e=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");
this.node.setAttribute("class",e)}return this},toggleClass:function(t,e){var n="undefined"==typeof e?this.hasClass(t):!e;return n?this.removeClass(t):this.addClass(t),this},sample:function(t){t=t||1;for(var e,n=this.node,i=n.getTotalLength(),r=[],a=0;i>a;)e=n.getPointAtLength(a),r.push({x:e.x,y:e.y,distance:a}),a+=t;return r},convertToPath:function(){var t=s("path");t.attr(this.attr());var e=this.convertToPathData();return e&&t.attr("d",e),t},convertToPathData:function(){var t=this.node.tagName.toUpperCase();switch(t){case"PATH":return this.attr("d");case"LINE":return f(this.node);case"POLYGON":return g(this.node);case"POLYLINE":return p(this.node);case"ELLIPSE":return v(this.node);case"CIRCLE":return m(this.node);case"RECT":return y(this.node)}throw new Error(t+" cannot be converted to PATH.")},findIntersection:function(t,e){var n=this.svg().node;e=e||n;var i=o.rect(this.bbox(!1,e)),r=i.center(),a=i.intersectionWithLineFromCenterToPoint(t);if(a){var s=this.node.localName.toUpperCase();if("RECT"===s){var l=o.rect(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),u=this.getTransformToElement(e),c=N.decomposeMatrix(u),h=n.createSVGTransform();h.setRotate(-c.rotation,r.x,r.y);var d=N.transformRect(l,h.matrix.multiply(u));a=o.rect(d).intersectionWithLineFromCenterToPoint(t,c.rotation)}else if("PATH"===s||"POLYGON"===s||"POLYLINE"===s||"CIRCLE"===s||"ELLIPSE"===s){for(var f="PATH"===s?this:this.convertToPath(),g=f.sample(),p=1/0,m=[],v=0,y=g.length;y>v;v++){var I=g[v],b=N.createSVGPoint(I.x,I.y);b=b.matrixTransform(this.getTransformToElement(e)),I=o.point(b);var C=I.distance(r),w=1.1*I.distance(t),A=C+w;p>A?(p=A,m=[{sample:I,refDistance:w}]):p+1>A&&m.push({sample:I,refDistance:w})}m.sort(function(t,e){return t.refDistance-e.refDistance}),a=m[0].sample}return a}}};var x=.5522847498307935,N=s;N.isVElement=function(t){return t instanceof d},N.decomposeMatrix=h,N.rectToPath=I;var M=N("svg").node;return N.createSVGMatrix=function(t){var e=M.createSVGMatrix();for(var n in t)e[n]=t[n];return e},N.createSVGTransform=function(){return M.createSVGTransform()},N.createSVGPoint=function(t,e){var n=M.createSVGPoint();return n.x=t,n.y=e,n},N.transformRect=function(t,e){var n=M.createSVGPoint();n.x=t.x,n.y=t.y;var i=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y;var r=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y+t.height;var a=n.matrixTransform(e);n.x=t.x,n.y=t.y+t.height;var o=n.matrixTransform(e),s=Math.min(i.x,r.x,a.x,o.x),l=Math.max(i.x,r.x,a.x,o.x),u=Math.min(i.y,r.y,a.y,o.y),c=Math.max(i.y,r.y,a.y,o.y);return{x:s,y:u,width:l-s,height:c-u}},N.transformPoint=function(t,e){return N.createSVGPoint(t.x,t.y).matrixTransform(e)},N.styleToObject=function(t){for(var e={},n=t.split(";"),i=0;i<n.length;i++){var r=n[i],a=r.split("=");e[a[0].trim()]=a[1].trim()}return e},N.createSlicePathData=function(t,e,n,i){var r=2*Math.PI-1e-6,a=t,o=e,s=n,l=i,u=(s>l&&(u=s,s=l,l=u),l-s),c=u<Math.PI?"0":"1",h=Math.cos(s),d=Math.sin(s),f=Math.cos(l),g=Math.sin(l);return u>=r?a?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":a?"M"+o*h+","+o*d+"A"+o+","+o+" 0 "+c+",1 "+o*f+","+o*g+"L"+a*f+","+a*g+"A"+a+","+a+" 0 "+c+",0 "+a*h+","+a*d+"Z":"M"+o*h+","+o*d+"A"+o+","+o+" 0 "+c+",1 "+o*f+","+o*g+"L0,0Z"},N.mergeAttrs=function(t,e){for(var i in e)"class"===i?t[i]=t[i]?t[i]+" "+e[i]:e[i]:"style"===i?n(t[i])&&n(e[i])?t[i]=N.mergeAttrs(t[i],e[i]):n(t[i])?t[i]=N.mergeAttrs(t[i],N.styleToObject(e[i])):n(e[i])?t[i]=N.mergeAttrs(N.styleToObject(t[i]),e[i]):t[i]=N.mergeAttrs(N.styleToObject(t[i]),N.styleToObject(e[i])):t[i]=e[i];return t},N.annotateString=function(t,e,i){e=e||[],i=i||{},offset=i.offset||0;for(var r,a,o,s=[],l=[],u=0;u<t.length;u++){a=l[u]=t[u];for(var c=0;c<e.length;c++){var h=e[c],d=h.start+offset,f=h.end+offset;u>=d&&f>u&&(n(a)?a.attrs=N.mergeAttrs(N.mergeAttrs({},a.attrs),h.attrs):a=l[u]={t:t[u],attrs:h.attrs},i.includeAnnotationIndices&&(a.annotations||(a.annotations=[])).push(c))}o=l[u-1],o?n(a)&&n(o)?JSON.stringify(a.attrs)===JSON.stringify(o.attrs)?r.t+=a.t:(s.push(r),r=a):n(a)?(s.push(r),r=a):n(o)?(s.push(r),r=a):r=(r||"")+a:r=a}return r&&s.push(r),s},N.findAnnotationsAtIndex=function(t,e){if(!t)return[];var n=[];return t.forEach(function(t){t.start<e&&e<=t.end&&n.push(t)}),n},N.findAnnotationsBetweenIndexes=function(t,e,n){if(!t)return[];var i=[];return t.forEach(function(t){(e>=t.start&&e<t.end||n>t.start&&n<=t.end||t.start>=e&&t.end<n)&&i.push(t)}),i},N.shiftAnnotations=function(t,e,n){return t?(t.forEach(function(t){t.start>=e&&(t.start+=n,t.end+=n)}),t):t},N.sanitizeText=e,N}();var s={version:"0.9.7",dia:{},ui:{},layout:{},shapes:{},format:{},connectors:{},routers:{},mvc:{views:{}},setTheme:function(t,e){e=e||{},n.invoke(s.mvc.views,"setTheme",t,e),s.mvc.View.prototype.options.theme=t},util:{hashCode:function(t){var e=0;if(0==t.length)return e;for(var n=0;n<t.length;n++){var i=t.charCodeAt(n);e=(e<<5)-e+i,e&=e}return e},getByPath:function(t,e,n){n=n||"/";for(var i,r=e.split(n);r.length;){if(i=r.shift(),!(Object(t)===t&&i in t))return;t=t[i]}return t},setByPath:function(t,e,n,i){i=i||"/";var r=e.split(i),a=t,o=0;if(e.indexOf(i)>-1){for(var s=r.length;s-1>o;o++)a=a[r[o]]||(a[r[o]]={});a[r[s-1]]=n}else t[e]=n;return t},unsetByPath:function(t,e,n){n=n||"/";var i=e.lastIndexOf(n);if(i>-1){var r=s.util.getByPath(t,e.substr(0,i),n);r&&delete r[e.slice(i+1)]}else delete t[e];return t},flattenObject:function(t,e,n){e=e||"/";var i={};for(var r in t)if(t.hasOwnProperty(r)){var a="object"==typeof t[r];if(a&&n&&n(t[r])&&(a=!1),a){var o=this.flattenObject(t[r],e,n);for(var s in o)o.hasOwnProperty(s)&&(i[r+e+s]=o[s])}else i[r]=t[r]}return i},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},guid:function(t){return this.guid.id=this.guid.id||1,t.id=void 0===t.id?"j_"+this.guid.id++:t.id,t.id},mixin:function(){for(var t=arguments[0],e=1,i=arguments.length;i>e;e++){var r=arguments[e];(Object(r)===r||n.isFunction(r)||null!==r&&void 0!==r)&&n.each(r,function(e,i){return this.mixin.deep&&Object(e)===e?(t[i]||(t[i]=n.isArray(e)?[]:{}),void this.mixin(t[i],e)):void(t[i]!==e&&(this.mixin.supplement&&t.hasOwnProperty(i)||(t[i]=e)))},this)}return t},supplement:function(){this.mixin.supplement=!0;var t=this.mixin.apply(this,arguments);return this.mixin.supplement=!1,t},deepMixin:function(){this.mixin.deep=!0;var t=this.mixin.apply(this,arguments);return this.mixin.deep=!1,t},deepSupplement:function(){this.mixin.deep=this.mixin.supplement=!0;var t=this.mixin.apply(this,arguments);return this.mixin.deep=this.mixin.supplement=!1,t},normalizeEvent:function(t){var e=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(e){for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}return t},nextFrame:function(){var t;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),r=setTimeout(function(){t(n+i)},i);return e=n+i,r}}return function(e,i){return t(i?n.bind(e,i):e)}}(),cancelFrame:function(){var t,e="undefined"!=typeof window;return e&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,e?n.bind(t,window):t}(),shapePerimeterConnectionPoint:function(t,e,n,i){var a,s;if(!n){var l=e.$(".scalable")[0],u=e.$(".rotatable")[0];l&&l.firstChild?n=l.firstChild:u&&u.firstChild&&(n=u.firstChild)}return n?(s=r(n).findIntersection(i,t.paper.viewport),s||(a=o.rect(r(n).bbox(!1,t.paper.viewport)))):(a=e.model.getBBox(),s=a.intersectionWithLineFromCenterToPoint(i)),s||a.center()},breakText:function(t,e,n,i){i=i||{};var a=e.width,o=e.height,s=i.svgDocument||r("svg").node,l=r("<text><tspan></tspan></text>").attr(n||{}).node,u=l.firstChild,c=document.createTextNode("");u.appendChild(c),s.appendChild(l),i.svgDocument||document.body.appendChild(s);for(var h,d=t.split(" "),f=[],g=[],p=0,m=0,v=d.length;v>p;p++){var y=d[p];if(c.data=g[m]?g[m]+" "+y:y,u.getComputedTextLength()<=a)g[m]=c.data,h&&(f[m++]=!0,h=0);else{if(!g[m]||h){var I=!!h;if(h=y.length-1,I||!h){if(!h){if(!g[m]){g=[];break}d.splice(p,2,y+d[p+1]),v--,f[m++]=!0,p--;continue}d[p]=y.substring(0,h),d[p+1]=y.substring(h)+d[p+1]}else d.splice(p,1,y.substring(0,h),y.substring(h)),v++,m&&!f[m-1]&&m--;p--;continue}m++,p--}if("undefined"!=typeof o){var b=b||1.25*l.getBBox().height;if(b*g.length>o){g.splice(Math.floor(o/b));break}}}return i.svgDocument?s.removeChild(l):document.body.removeChild(s),g.join("\n")},imageToDataUri:function(t,e){if(!t||"data:"===t.substr(0,"data:".length))return setTimeout(function(){e(null,t)},0);var n=document.createElement("canvas"),i=document.createElement("img");i.onload=function(){var r=n.getContext("2d");n.width=i.width,n.height=i.height,r.drawImage(i,0,0);try{var a=(t.split(".").pop()||"png","jpeg"),o=n.toDataURL(a)}catch(s){if(/\.svg$/.test(t)){var l=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");l.open("GET",t,!1),l.send(null);var u=l.responseText;return e(null,"data:image/svg+xml,"+encodeURIComponent(u))}console.error(i.src,"fails to convert",s)}e(null,o)},i.ononerror=function(){e(new Error("Failed to load image."))},i.src=t},getElementBBox:function(t){var e,n=i(t),a=n.offset();if(t.ownerSVGElement){e=r(t).bbox();var o=t.getBoundingClientRect(),s=(o.width-e.width)/2,l=(o.height-e.height)/2;e.x=a.left+s,e.y=a.top+l}else e={x:a.left,y:a.top,width:n.outerWidth(),height:n.outerHeight()};return e},sortElements:function(t,e){var n=i(t),r=n.map(function(){var t=this,e=t.parentNode,n=e.insertBefore(document.createTextNode(""),t.nextSibling);return function(){if(e===this)throw new Error("You can't sort elements if any one is a descendant of another.");e.insertBefore(this,n),e.removeChild(n)}});return Array.prototype.sort.call(n,e).each(function(t){r[t].call(this)})},setAttributesBySelector:function(t,e){var r=i(t);n.each(e,function(t,e){var i=r.find(e).addBack().filter(e);n.has(t,"class")&&(i.addClass(t["class"]),t=n.omit(t,"class")),i.attr(t)})},normalizeSides:function(t){return Object(t)!==t?(t=t||0,{top:t,bottom:t,left:t,right:t}):{top:t.top||0,bottom:t.bottom||0,left:t.left||0,right:t.right||0}},timing:{linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,n=1;1;e+=n,n/=2)if(t>=(7-4*e)/11){var i=(11-6*e-11*t)/4;return-i*i+n*n}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}},clamp:function(t,e,n){return e=e||0,n=n||1,function(i){var r=t(i);return e>r?e:r>n?n:r}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},interpolate:{number:function(t,e){var n=e-t;return function(e){return t+n*e}},object:function(t,e){var i=n.keys(t);return function(n){var r,a,o={};for(r=i.length-1;-1!=r;r--)a=i[r],o[a]=t[a]+(e[a]-t[a])*n;return o}},hexColor:function(t,e){var n=parseInt(t.slice(1),16),i=parseInt(e.slice(1),16),r=255&n,a=(255&i)-r,o=65280&n,s=(65280&i)-o,l=16711680&n,u=(16711680&i)-l;return function(t){var e=r+a*t&255,n=o+s*t&65280,i=l+u*t&16711680;return"#"+(1<<24|e|n|i).toString(16).slice(1)}},unit:function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,i=n.exec(t),r=n.exec(e),a=r[1].indexOf("."),o=a>0?r[1].length-a-1:0;t=+i[1];var s=+r[1]-t,l=i[2];return function(e){return(t+s*e).toFixed(o)+l}}},filter:{outline:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',i=n.isFinite(t.margin)?t.margin:2,r=n.isFinite(t.width)?t.width:1;return n.template(e)({color:t.color||"blue",opacity:n.isFinite(t.opacity)?t.opacity:1,outerRadius:i+r,innerRadius:i})},highlight:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return n.template(e)({color:t.color||"red",width:n.isFinite(t.width)?t.width:1,blur:n.isFinite(t.blur)?t.blur:0,opacity:n.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=n.isFinite(t.x)?t.x:2;return n.template('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:n.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return n.template(e)({dx:t.dx||0,dy:t.dy||0,opacity:n.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:n.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=n.isFinite(t.amount)?t.amount:1;return n.template('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=n.isFinite(t.amount)?t.amount:1;return n.template('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=n.isFinite(t.amount)?t.amount:1;return n.template('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return n.template('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=n.isFinite(t.amount)?t.amount:1;return n.template('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return n.template('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:n.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=n.isFinite(t.amount)?t.amount:1;return n.template('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},format:{number:function(t,e,n){function i(t){for(var e=t.length,i=[],r=0,a=n.grouping[0];e>0&&a>0;)i.push(t.substring(e-=a,e+a)),a=n.grouping[r=(r+1)%n.grouping.length];return i.reverse().join(n.thousands)}n=n||{currency:["$",""],decimal:".",thousands:",",grouping:[3]};var r=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,a=r.exec(t),o=a[1]||" ",s=a[2]||">",l=a[3]||"",u=a[4]||"",c=a[5],h=+a[6],d=a[7],f=a[8],g=a[9],p=1,m="",v="",y=!1;switch(f&&(f=+f.substring(1)),(c||"0"===o&&"="===s)&&(c=o="0",s="=",d&&(h-=Math.floor((h-1)/4))),g){case"n":d=!0,g="g";break;case"%":p=100,v="%",g="f";break;case"p":p=100,v="%",g="r";break;case"b":case"o":case"x":case"X":"#"===u&&(m="0"+g.toLowerCase());case"c":case"d":y=!0,f=0;break;case"s":p=-1,g="r"}"$"===u&&(m=n.currency[0],v=n.currency[1]),"r"!=g||f||(g="g"),null!=f&&("g"==g?f=Math.max(1,Math.min(21,f)):"e"!=g&&"f"!=g||(f=Math.max(0,Math.min(20,f))));var I=c&&d;if(y&&e%1)return"";var b=0>e||0===e&&0>1/e?(e=-e,"-"):l,C=v;if(0>p){var w=this.prefix(e,f);e=w.scale(e),C=w.symbol+v}else e*=p;e=this.convert(g,e,f);var A=e.lastIndexOf("."),x=0>A?e:e.substring(0,A),N=0>A?"":n.decimal+e.substring(A+1);!c&&d&&n.grouping&&(x=i(x));var M=m.length+x.length+N.length+(I?0:b.length),k=h>M?new Array(M=h-M+1).join(o):"";return I&&(x=i(k+x)),b+=m,e=x+N,("<"===s?b+e+k:">"===s?k+b+e:"^"===s?k.substring(0,M>>=1)+b+e+k.substring(M):b+(I?e:k+e))+C},string:function(t,e){for(var n,i="{",r=!1,a=[];-1!==(n=t.indexOf(i));){var o,s,l;if(o=t.slice(0,n),r){s=o.split(":"),l=s.shift().split("."),o=e;for(var u=0;u<l.length;u++)o=o[l[u]];s.length&&(o=this.number(s,o))}a.push(o),t=t.slice(n+1),i=(r=!r)?"}":"{"}return a.push(t),a.join("")},convert:function(t,e,n){switch(t){case"b":return e.toString(2);case"c":return String.fromCharCode(e);case"o":return e.toString(8);case"x":return e.toString(16);case"X":return e.toString(16).toUpperCase();case"g":return e.toPrecision(n);case"e":return e.toExponential(n);case"f":return e.toFixed(n);case"r":return(e=this.round(e,this.precision(e,n))).toFixed(Math.max(0,Math.min(20,this.precision(e*(1+1e-15),n))));default:return e+""}},round:function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},precision:function(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)},prefix:function(t,e){var i=n.map(["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],function(t,e){var n=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}),r=0;return t&&(0>t&&(t*=-1),e&&(t=this.round(t,this.precision(t,e))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((0>=r?r+1:r-1)/3)))),i[8+r/3]}}}};if(s.mvc.View=e.View.extend({options:{theme:"default"},theme:null,themeClassNamePrefix:"joint-theme-",requireSetThemeOverride:!1,constructor:function(t){e.View.call(this,t)},initialize:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=n.extend({},s.mvc.View.prototype.options||{},this.options||{},t||{}),n.bindAll(this,"setTheme","onSetTheme","remove","onRemove"),s.mvc.views[this.cid]=this,this.setTheme(this.options.theme),this.init()},init:function(){},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override?void 0:(this.onSetTheme(this.theme,t),this.theme&&this.$el.removeClass(this.themeClassNamePrefix+this.theme),this.$el.addClass(this.themeClassNamePrefix+t),this.theme=t,this)},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),s.mvc.views[this.cid]=null,e.View.prototype.remove.apply(this,arguments),this},onRemove:function(){}}),s.dia.GraphCells=e.Collection.extend({cellNamespace:s.shapes,initialize:function(t,e){this.on("change:z",this.sort,this),e.cellNamespace&&(this.cellNamespace=e.cellNamespace),this.graph=e.graph},model:function(t,e){var n=e.collection,i=n.cellNamespace,r="link"===t.type?s.dia.Link:s.util.getByPath(i,t.type,".")||s.dia.Element,a=new r(t,e);return a.graph=n.graph,a},comparator:function(t){return t.get("z")||0}}),s.dia.Graph=e.Model.extend({initialize:function(t,n){n=n||{};var i=new s.dia.GraphCells([],{model:n.cellModel,cellNamespace:n.cellNamespace,graph:this});e.Model.prototype.set.call(this,"cells",i),i.on("all",this.trigger,this),this._out={},this._in={},this._nodes={},this._edges={},i.on("add",this._restructureOnAdd,this),i.on("remove",this._restructureOnRemove,this),i.on("reset",this._restructureOnReset,this),i.on("change:source",this._restructureOnChangeSource,this),i.on("change:target",this._restructureOnChangeTarget,this),i.on("remove",this._removeCell,this)},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var e=t.get("source"),n=t.get("target");e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var e=t.get("source"),n=t.get("target");e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},n.each(t,this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.get("source");n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=e.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,i,r){var a;return"object"==typeof t?(a=t,r=i):(a={})[t]=i,a.hasOwnProperty("cells")&&(this.resetCells(a.cells,r),a=n.omit(a,"cells")),e.Model.prototype.set.call(this,a,r)},clear:function(t){t=n.extend({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.trigger("batch:start",{batchName:"clear"});var i=e.sortBy(function(t){return t.isLink()?1:2});do i.shift().remove(t);while(i.length>0);return this.trigger("batch:stop",{batchName:"clear"}),this},_prepareCell:function(t){var i;if(t instanceof e.Model?(i=t.attributes,t.graph=this):i=t,n.isUndefined(i.z)&&(i.z=this.maxZIndex()+1),!n.isString(i.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},maxZIndex:function(){var t=this.get("cells").last();return t?t.get("z")||0:0},addCell:function(t,e){return n.isArray(t)?this.addCells(t,e):(this.get("cells").add(this._prepareCell(t),e||{}),this)},addCells:function(t,e){return e=e||{},e.position=t.length,n.each(t,function(t){e.position--,this.addCell(t,e)},this),this},resetCells:function(t,e){return this.get("cells").reset(n.map(t,this._prepareCell,this),e),this},_removeCell:function(t,e,n){n=n||{},n.clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0}),delete t.graph},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return n.map(this._nodes,function(t,e){return this.getCell(e)},this)},getLinks:function(){return n.map(this._edges,function(t,e){return this.getCell(e)},this)},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){e=e||{};var i=e.inbound,r=e.outbound;n.isUndefined(i)&&n.isUndefined(r)&&(i=r=!0);var a=[],o={};if(r&&n.each(this.getOutboundEdges(t.id),function(t,e){o[e]||(a.push(this.getCell(e)),o[e]=!0)},this),i&&n.each(this.getInboundEdges(t.id),function(t,e){o[e]||(a.push(this.getCell(e)),o[e]=!0)},this),e.deep){var s=t.getEmbeddedCells({deep:!0}),l={};n.each(s,function(t){t.isLink()&&(l[t.id]=!0)}),n.each(s,function(t){t.isLink()||(r&&n.each(this.getOutboundEdges(t.id),function(t,e){o[e]||l[e]||(a.push(this.getCell(e)),o[e]=!0)},this),i&&n.each(this.getInboundEdges(t.id),function(t,e){o[e]||l[e]||(a.push(this.getCell(e)),o[e]=!0)},this))},this)}return a},getNeighbors:function(t,e){e=e||{};var i=e.inbound,r=e.outbound;n.isUndefined(i)&&n.isUndefined(r)&&(i=r=!0);var a=n.transform(this.getConnectedLinks(t,e),function(a,o){var s=o.get("source"),l=o.get("target"),u=o.hasLoop(e);if(i&&n.has(s,"id")&&!a[s.id]){var c=this.getCell(s.id);!u&&(!c||c===t||e.deep&&c.isEmbeddedIn(t))||(a[s.id]=c)}if(r&&n.has(l,"id")&&!a[l.id]){var h=this.getCell(l.id);!u&&(!h||h===t||e.deep&&h.isEmbeddedIn(t))||(a[l.id]=h)}},{},this);return n.values(a)},getCommonAncestor:function(){var t=n.map(arguments,function(t){for(var e=[],n=t.get("parent");n;)e.push(n),n=this.getCell(n).get("parent");return e},this);t=n.sortBy(t,"length");var e=n.find(t.shift(),function(e){return n.every(t,function(t){return n.contains(t,e)})});return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var i=[];return this.search(t,function(e){e!==t&&i.push(e)},n.extend({},e,{outbound:!0})),i},cloneCells:function(t){var e={},i={};return n.each(t,function(t){if(!e[t.id]){var n=t.clone();e[t.id]=n,i[n.id]=t.get("embeds")}}),n.each(t,function(t){var r=e[t.id];if(r.isLink()){var a=r.get("source"),o=r.get("target");a.id&&e[a.id]&&r.prop("source/id",e[a.id].id),o.id&&e[o.id]&&r.prop("target/id",e[o.id].id)}var s=r.get("parent");if(s&&e[s]&&r.set("parent",e[s].id),i[r.id]){var l=[];n.each(i[r.id],function(t){e[t]?l.push(e[t].id):l.push(t)}),r.set("embeds",l)}}),e},cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var i=[],r={},a=[],o=[];return n.each(t,function(t){if(r[t.id]||(i.push(t),r[t.id]=t,t.isLink()?o.push(t):a.push(t)),e.deep){var s=t.getEmbeddedCells({deep:!0});n.each(s,function(t){r[t.id]||(i.push(t),r[t.id]=t,t.isLink()?o.push(t):a.push(t))})}}),n.each(o,function(t){var e=t.get("source"),n=t.get("target");if(e.id&&!r[e.id]){var o=this.getCell(e.id);i.push(o),r[o.id]=o,a.push(o)}if(n.id&&!r[n.id]){var s=this.getCell(n.id);i.push(this.getCell(n.id)),r[s.id]=s,a.push(s)}},this),n.each(a,function(t){var a=this.getConnectedLinks(t,e);n.each(a,function(t){var e=t.get("source"),n=t.get("target");!r[t.id]&&e.id&&r[e.id]&&n.id&&r[n.id]&&(i.push(t),r[t.id]=t)})},this),i},getPredecessors:function(t,e){e=e||{};var i=[];return this.search(t,function(e){e!==t&&i.push(e)},n.extend({},e,{inbound:!0})),i},search:function(t,e,n){n=n||{},n.breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,i){i=i||{};var r={},a={},o=[];for(o.push(t),a[t.id]=0;o.length>0;){var s=o.shift();if(!r[s.id]){if(r[s.id]=!0,e(s,a[s.id])===!1)return;n.each(this.getNeighbors(s,i),function(t){a[t.id]=a[s.id]+1,o.push(t)})}}},dfs:function(t,e,i,r,a){i=i||{};var o=r||{},s=a||0;e(t,s)!==!1&&(o[t.id]=!0,n.each(this.getNeighbors(t,i),function(t){o[t.id]||this.dfs(t,e,i,o,s+1)},this))},getSources:function(){var t=[];return n.each(this._nodes,function(e,i){this._in[i]&&!n.isEmpty(this._in[i])||t.push(this.getCell(i))},this),t},getSinks:function(){var t=[];return n.each(this._nodes,function(e,i){this._out[i]&&!n.isEmpty(this._out[i])||t.push(this.getCell(i))},this),t},isSource:function(t){return!this._in[t.id]||n.isEmpty(this._in[t.id])},isSink:function(t){return!this._out[t.id]||n.isEmpty(this._out[t.id])},isSuccessor:function(t,e){var n=!1;return this.search(t,function(i){return i===e&&i!==t?(n=!0,!1):void 0},{outbound:!0}),n},isPredecessor:function(t,e){var n=!1;return this.search(t,function(i){return i===e&&i!==t?(n=!0,!1):void 0},{inbound:!0}),n},isNeighbor:function(t,e,i){i=i||{};var r=i.inbound,a=i.outbound;n.isUndefined(r)&&n.isUndefined(a)&&(r=a=!0);var o=!1;return n.each(this.getConnectedLinks(t,i),function(t){var s=t.get("source"),l=t.get("target");t.hasLoop(i);return r&&n.has(s,"id")&&s.id===e.id?(o=!0,!1):a&&n.has(l,"id")&&l.id===e.id?(o=!0,!1):void 0}),o},disconnectLinks:function(t,e){n.each(this.getConnectedLinks(t),function(n){n.set(n.get("source").id===t.id?"source":"target",o.point(0,0),e)})},removeLinks:function(t,e){n.invoke(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return n.filter(this.getElements(),function(e){return e.getBBox().containsPoint(t)})},findModelsInArea:function(t,e){e=n.defaults(e||{},{strict:!1});var i=e.strict?"containsRect":"intersect";return n.filter(this.getElements(),function(e){return t[i](e.getBBox())})},findModelsUnderElement:function(t,e){e=n.defaults(e||{},{searchBy:"bbox"});var i=t.getBBox(),r="bbox"==e.searchBy?this.findModelsInArea(i):this.findModelsFromPoint(i[e.searchBy]());return n.reject(r,function(e){return t.id==e.id||e.isEmbeddedIn(t)})},getBBox:function(t){return t=t||this.collection.models,n.reduce(t,function(t,e){return e.isLink()?t:t?t.union(e.getBBox()):e.getBBox()},void 0)},translate:function(t,e,i){var r=n.reject(this.getCells(),function(t){return t.isEmbedded()});n.invoke(r,"translate",t,e,i)}}),s.dia.Cell=e.Model.extend({constructor:function(t,e){var i,r=t||{};this.cid=n.uniqueId("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),(i=n.result(this,"defaults"))&&(r=n.merge({},i,r)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(){var t=this.constructor.prototype.defaults.attrs||{},e=this.attributes.attrs,i={};n.each(e,function(e,r){var a=t[r];n.each(e,function(t,e){n.isObject(t)&&!n.isArray(t)?n.each(t,function(t,o){a&&a[e]&&n.isEqual(a[e][o],t)||(i[r]=i[r]||{},(i[r][e]||(i[r][e]={}))[o]=t)}):a&&n.isEqual(a[e],t)||(i[r]=i[r]||{},i[r][e]=t)})});var r=n.cloneDeep(n.omit(this.attributes,"attrs"));return r.attrs=i,r},initialize:function(t){t&&t.id||this.set("id",s.util.uuid(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},processPorts:function(){var t=this.ports,e={};n.each(this.get("attrs"),function(t,i){t&&t.port&&(n.isUndefined(t.port.id)?e[t.port]={id:t.port}:e[t.port.id]=t.port)});var i={};if(n.each(t,function(t,n){e[n]||(i[n]=!0)}),this.graph&&!n.isEmpty(i)){var r=this.graph.getConnectedLinks(this,{inbound:!0});n.each(r,function(t){i[t.get("target").port]&&t.remove()});var a=this.graph.getConnectedLinks(this,{outbound:!0});n.each(a,function(t){i[t.get("source").port]&&t.remove()})}this.ports=e},remove:function(t){t=t||{};var e=this.graph;e&&e.trigger("batch:start",{batchName:"remove"});var i=this.get("parent");if(i){var r=e&&e.getCell(i);r.unembed(this)}return n.invoke(this.getEmbeddedCells(),"remove",t),this.trigger("remove",this,this.collection,t),e&&e.trigger("batch:stop",{batchName:"remove"}),this},toFront:function(t){if(this.graph){t=t||{};var e=(this.graph.getLastCell().get("z")||0)+1;if(this.trigger("batch:start",{batchName:"to-front"}).set("z",e,t),t.deep){var i=this.getEmbeddedCells({deep:!0,breadthFirst:!0});n.each(i,function(n){n.set("z",++e,t)})}this.trigger("batch:stop",{batchName:"to-front"})}return this},toBack:function(t){if(this.graph){t=t||{};var e=(this.graph.getFirstCell().get("z")||0)-1;if(this.trigger("batch:start",{batchName:"to-back"}),t.deep){var i=this.getEmbeddedCells({deep:!0,breadthFirst:!0});n.eachRight(i,function(n){n.set("z",e--,t)})}this.set("z",e,t).trigger("batch:stop",{
batchName:"to-back"})}return this},embed:function(t,e){if(this===t||this.isEmbeddedIn(t))throw new Error("Recursive embedding not allowed.");this.trigger("batch:start",{batchName:"embed"});var i=n.clone(this.get("embeds")||[]);return i[t.isLink()?"unshift":"push"](t.id),t.set("parent",this.id,e),this.set("embeds",n.uniq(i),e),this.trigger("batch:stop",{batchName:"embed"}),this},unembed:function(t,e){return this.trigger("batch:start",{batchName:"unembed"}),t.unset("parent",e),this.set("embeds",n.without(this.get("embeds"),t.id),e),this.trigger("batch:stop",{batchName:"unembed"}),this},getAncestors:function(){var t=[],e=this.get("parent");if(!this.graph)return t;for(;void 0!==e;){var n=this.graph.getCell(e);if(void 0===n)break;t.push(n),e=n.get("parent")}return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var e;if(t.deep)if(t.breadthFirst){e=[];for(var i=this.getEmbeddedCells();i.length>0;){var r=i.shift();e.push(r),i.push.apply(i,r.getEmbeddedCells())}}else e=this.getEmbeddedCells(),n.each(e,function(n){e.push.apply(e,n.getEmbeddedCells(t))});else e=n.map(this.get("embeds"),this.graph.getCell,this.graph);return e}return[]},isEmbeddedIn:function(t,e){var i=n.isString(t)?t:t.id,r=this.get("parent");if(e=n.defaults({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===i)return!0;r=this.graph.getCell(r).get("parent")}return!1}return r===i},isEmbedded:function(){return!!this.get("parent")},clone:function(t){if(t=t||{},t.deep)return n.values(s.dia.Graph.prototype.cloneCells.call(null,[this].concat(this.getEmbeddedCells({deep:!0}))));var i=e.Model.prototype.clone.apply(this,arguments);return i.set("id",s.util.uuid()),i.set("embeds",""),i},prop:function(t,e,i){var r="/";if(n.isString(t)){if(arguments.length>1){var a=t,o=a.split("/"),l=o[0];if(o.shift(),i=i||{},i.propertyPath=a,i.propertyValue=e,0===o.length)return this.set(l,e,i);var u={},c=u,h=l;n.each(o,function(t){c=c[h]=n.isFinite(Number(t))?[]:{},h=t}),u=s.util.setByPath(u,a,e,"/");var d=n.merge({},this.attributes);i.rewrite&&s.util.unsetByPath(d,a,"/");var f=n.merge(d,u);return this.set(l,f[l],i)}return s.util.getByPath(this.attributes,t,r)}return this.set(n.merge({},this.attributes,t),e)},removeProp:function(t,e){e=e||{},e.dirty=!0;var i=t.split("/");if(1===i.length)return this.unset(t,e);var r=i[0],a=i.slice(1).join("/"),o=n.merge({},this.get(r));return s.util.unsetByPath(o,a,"/"),this.set(r,o,e)},attr:function(t,e,i){var r=Array.prototype.slice.call(arguments);return n.isString(t)?r[0]="attrs/"+t:r[0]={attrs:t},this.prop.apply(this,r)},removeAttr:function(t,e){return n.isArray(t)?(n.each(t,function(t){this.removeAttr(t,e)},this),this):this.removeProp("attrs/"+t,e)},transition:function(t,e,i,r){r=r||"/";var a={duration:100,delay:10,timingFunction:s.util.timing.linear,valueFunction:s.util.interpolate.number};i=n.extend(a,i);var o,l=0,u=n.bind(function(e){var n,r,a;l=l||e,e-=l,r=e/i.duration,1>r?this._transitionIds[t]=n=s.util.nextFrame(u):(r=1,delete this._transitionIds[t]),a=o(i.timingFunction(r)),i.transitionId=n,this.prop(t,a,i),n||this.trigger("transition:end",this,t)},this),c=n.bind(function(n){this.stopTransitions(t),o=i.valueFunction(s.util.getByPath(this.attributes,t,r),e),this._transitionIds[t]=s.util.nextFrame(n),this.trigger("transition:start",this,t)},this);return n.delay(c,i.delay,u)},getTransitions:function(){return n.keys(this._transitionIds)},stopTransitions:function(t,e){e=e||"/";var i=t&&t.split(e);return n(this._transitionIds).keys().filter(i&&function(t){return n.isEqual(i,t.split(e).slice(0,i.length))}).each(function(t){s.util.cancelFrame(this._transitionIds[t]),delete this._transitionIds[t],this.trigger("transition:end",this,t)},this),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isLink:function(){return!1}}),s.dia.CellView=s.mvc.View.extend({tagName:"g",attributes:function(){return{"model-id":this.model.id}},constructor:function(t){t.id=t.id||s.util.guid(this),s.mvc.View.call(this,t)},init:function(){n.bindAll(this,"remove","update"),this.$el.data("view",this),this.listenTo(this.model,"change:attrs",this.onChangeAttrs)},onChangeAttrs:function(t,e,n){return n.dirty?this.render():this.update(t,e,n)},_ensureElement:function(){var t;if(this.el)t=n.result(this,"el");else{var e=n.extend({id:this.id},n.result(this,"attributes"));this.className&&(e["class"]=n.result(this,"className")),t=r(n.result(this,"tagName"),e).node}this.setElement(t,!1)},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],this.vel=r(this.el)},findBySelector:function(t){var e="."===t?this.$el:this.$el.find(t);return e},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getStrokeBBox:function(t){var e=!!t;t=t||this.el;var n,i=r(t).bbox(!1,this.paper.viewport);return n=e?r(t).attr("stroke-width"):this.model.attr("rect/stroke-width")||this.model.attr("circle/stroke-width")||this.model.attr("ellipse/stroke-width")||this.model.attr("path/stroke-width"),n=parseFloat(n)||0,o.rect(i).moveAndExpand({x:-n/2,y:-n/2,width:n,height:n})},getBBox:function(){return o.rect(this.vel.bbox())},highlight:function(t,e){return t=t?this.$(t)[0]||this.el:this.el,e=e||{},e.partial=t!=this.el,this.notify("cell:highlight",t,e),this},unhighlight:function(t,e){return t=t?this.$(t)[0]||this.el:this.el,e=e||{},e.partial=t!=this.el,this.notify("cell:unhighlight",t,e),this},findMagnet:function(t){var e=this.$(t);if(0===e.length||e[0]===this.el){var n=this.model.get("attrs")||{};if(n["."]&&n["."].magnet===!1)return;return this.el}return e.attr("magnet")?e[0]:this.findMagnet(e.parent())},applyFilter:function(t,e){var a=n.isString(t)?this.findBySelector(t):i(t),o=e.name+this.paper.svg.id+s.util.hashCode(JSON.stringify(e));if(!this.paper.svg.getElementById(o)){var l=s.util.filter[e.name]&&s.util.filter[e.name](e.args||{});if(!l)throw new Error("Non-existing filter "+e.name);var u=r(l);u.attr({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3}),e.attrs&&u.attr(e.attrs),u.node.id=o,r(this.paper.svg).defs().append(u)}a.each(function(){r(this).attr("filter","url(#"+o+")")})},applyGradient:function(t,e,a){var o=n.isString(t)?this.findBySelector(t):i(t),l=a.type+this.paper.svg.id+s.util.hashCode(JSON.stringify(a));if(!this.paper.svg.getElementById(l)){var u=["<"+a.type+">",n.map(a.stops,function(t){return'<stop offset="'+t.offset+'" stop-color="'+t.color+'" stop-opacity="'+(n.isFinite(t.opacity)?t.opacity:1)+'" />'}).join(""),"</"+a.type+">"].join(""),c=r(u);a.attrs&&c.attr(a.attrs),c.node.id=l,r(this.paper.svg).defs().append(c)}o.each(function(){r(this).attr(e,"url(#"+l+")")})},getSelector:function(t,e){if(t===this.el)return e;var n=r(t).index()+1,i=t.tagName+":nth-child("+n+")";return e&&(i+=" > "+e),this.getSelector(t.parentNode,i)},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},pointerdown:function(t,e,n){this.model.collection&&(this.model.trigger("batch:start",{batchName:"pointer"}),this._collection=this.model.collection),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){this.notify("cell:pointerup",t,e,n),this._collection&&(this._collection.trigger("batch:stop",{batchName:"pointer"}),delete this._collection)},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},onSetTheme:function(t,e){t&&this.vel.removeClass(this.themeClassNamePrefix+t),this.vel.addClass(this.themeClassNamePrefix+e)}}),s.dia.Element=s.dia.Cell.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},position:function(t,e,i){var r=n.isNumber(e);if(i=(r?i:t)||{},i.parentRelative){if(!this.graph)throw new Error("Element must be part of a graph.");var a=this.graph.getCell(this.get("parent")),s=a&&!a.isLink()?a.get("position"):{x:0,y:0}}if(r)return i.parentRelative&&(t+=s.x,e+=s.y),this.set("position",{x:t,y:e},i);var l=o.point(this.get("position"));return i.parentRelative?l.difference(s):l},translate:function(t,e,i){if(t=t||0,e=e||0,0===t&&0===e)return this;i=i||{},i.translateBy=i.translateBy||this.id;var r=this.get("position")||{x:0,y:0};if(i.restrictedArea&&i.translateBy===this.id){var a=this.getBBox({deep:!0}),o=i.restrictedArea,l=r.x-a.x,u=r.y-a.y,c=Math.max(o.x+l,Math.min(o.x+o.width+l-a.width,r.x+t)),h=Math.max(o.y+u,Math.min(o.y+o.height+u-a.height,r.y+e));t=c-r.x,e=h-r.y}var d={x:r.x+t,y:r.y+e};return i.tx=t,i.ty=e,i.transition?(n.isObject(i.transition)||(i.transition={}),this.transition("position",d,n.extend({},i.transition,{valueFunction:s.util.interpolate.object}))):(this.set("position",d,i),n.invoke(this.getEmbeddedCells(),"translate",t,e,i)),this},resize:function(t,e,i){if(i=i||{},this.trigger("batch:start",n.extend({},i,{element:this,batchName:"resize"})),i.direction){var r=this.get("size");switch(i.direction){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width}var a=o.normalizeAngle(this.get("angle")||0),s={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[i.direction];i.absolute&&(s+=Math.floor((a+45)/90),s%=4);var l=this.getBBox(),u=l[["bottomLeft","corner","topRight","origin"][s]](),c=o.point(u).rotate(l.center(),-a),h=Math.sqrt(t*t+e*e)/2,d=s*Math.PI/2;d+=Math.atan(s%2==0?e/t:t/e),d-=o.toRad(a);var f=o.point.fromPolar(h,d,c),g=o.point(f).offset(t/-2,e/-2);this.set("size",{width:t,height:e},i),this.position(g.x,g.y,i)}else this.set("size",{width:t,height:e},i);return this.trigger("batch:stop",n.extend({},i,{element:this,batchName:"resize"})),this},fitEmbeds:function(t){if(t=t||{},!this.graph)throw new Error("Element must be part of a graph.");var e=this.getEmbeddedCells();if(e.length>0){this.trigger("batch:start",{batchName:"fit-embeds"}),t.deep&&n.invoke(e,"fitEmbeds",t);var i=this.graph.getBBox(e),r=s.util.normalizeSides(t.padding);i.moveAndExpand({x:-r.left,y:-r.top,width:r.right+r.left,height:r.bottom+r.top}),this.set({position:{x:i.x,y:i.y},size:{width:i.width,height:i.height}},t),this.trigger("batch:stop",{batchName:"fit-embeds"})}return this},rotate:function(t,e,n){if(n){var i=this.getBBox().center(),r=this.get("size"),a=this.get("position");i.rotate(n,this.get("angle")-t);var o=i.x-r.width/2-a.x,s=i.y-r.height/2-a.y;this.trigger("batch:start",{batchName:"rotate"}),this.translate(o,s),this.rotate(t,e),this.trigger("batch:stop",{batchName:"rotate"})}else this.set("angle",e?t:(this.get("angle")+t)%360);return this},getBBox:function(t){if(t=t||{},t.deep&&this.graph){var e=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return e.push(this),this.graph.getBBox(e)}var n=this.get("position"),i=this.get("size");return o.rect(n.x,n.y,i.width,i.height)}}),s.dia.ElementView=s.dia.CellView.extend({SPECIAL_ATTRIBUTES:["style","text","html","ref-x","ref-y","ref-dx","ref-dy","ref-width","ref-height","ref","x-alignment","y-alignment","port"],className:function(){return"element "+this.model.get("type").replace(/\./g," ")},initialize:function(){n.bindAll(this,"translate","resize","rotate"),s.dia.CellView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:position",this.translate),this.listenTo(this.model,"change:size",this.resize),this.listenTo(this.model,"change:angle",this.rotate)},update:function(t,e){var a=this.model.get("attrs"),o=this.rotatableNode;if(o){var s=o.attr("transform");o.attr("transform","")}var l=[],u={};n.each(e||a,function(t,e){var a=this.findBySelector(e);if(0!==a.length){u[e]=a;var o=this.SPECIAL_ATTRIBUTES.slice();n.isObject(t.filter)&&(o.push("filter"),this.applyFilter(a,t.filter)),n.isObject(t.fill)&&(o.push("fill"),this.applyGradient(a,"fill",t.fill)),n.isObject(t.stroke)&&(o.push("stroke"),this.applyGradient(a,"stroke",t.stroke)),n.isUndefined(t.text)||(a.each(function(){r(this).text(t.text+"",{lineHeight:t.lineHeight,textPath:t.textPath,annotations:t.annotations})}),o.push("lineHeight","textPath","annotations"));var s=n.omit(t,o);a.each(function(){r(this).attr(s)}),t.port&&a.attr("port",n.isUndefined(t.port.id)?t.port:t.port.id),t.style&&a.css(t.style),n.isUndefined(t.html)||a.each(function(){i(this).html(t.html+"")}),n.isUndefined(t["ref-x"])&&n.isUndefined(t["ref-y"])&&n.isUndefined(t["ref-dx"])&&n.isUndefined(t["ref-dy"])&&n.isUndefined(t["x-alignment"])&&n.isUndefined(t["y-alignment"])&&n.isUndefined(t["ref-width"])&&n.isUndefined(t["ref-height"])||n.each(a,function(t,e,n){var r=i(t);r.selector=n.selector,l.push(r)})}},this);var c=this.model.get("size"),h={x:0,y:0,width:c.width,height:c.height};e=e||{},n.each(l,function(t){var i=e[t.selector],o=i?n.merge({},a[t.selector],i):a[t.selector];this.positionRelative(r(t[0]),h,o,u)},this),o&&o.attr("transform",s||"")},positionRelative:function(t,e,i,a){var o=i.ref,s=parseFloat(i["ref-dx"]),l=parseFloat(i["ref-dy"]),u=i["y-alignment"],c=i["x-alignment"],h=i["ref-y"],d=n.isString(h)&&"%"===h.slice(-1);h=parseFloat(h),d&&(h/=100);var f=i["ref-x"],g=n.isString(f)&&"%"===f.slice(-1);f=parseFloat(f),g&&(f/=100);var p=i["ref-width"],m=n.isString(p)&&"%"===p.slice(-1);p=parseFloat(p),m&&(p/=100);var v=i["ref-height"],y=n.isString(v)&&"%"===v.slice(-1);v=parseFloat(v),y&&(v/=100);var I=t.findParentByClass("scalable",this.el);if(o){var b;if(b=a&&a[o]?r(a[o][0]):"."===o?this.vel:this.vel.findOne(o),!b)throw new Error("dia.ElementView: reference does not exists.");e=b.bbox(!1,this.el)}t.attr("transform")&&t.attr("transform",t.attr("transform").replace(/translate\([^)]*\)/g,"").trim()||""),isFinite(p)&&(m||p>=0&&1>=p?t.attr("width",p*e.width):t.attr("width",Math.max(p+e.width,0))),isFinite(v)&&(y||v>=0&&1>=v?t.attr("height",v*e.height):t.attr("height",Math.max(v+e.height,0)));var C,w=0,A=0;if(isFinite(s)&&(I?(C=C||I.scale(),w=e.x+e.width+s/C.sx):w=e.x+e.width+s),isFinite(l)&&(I?(C=C||I.scale(),A=e.y+e.height+l/C.sy):A=e.y+e.height+l),isFinite(f)&&(g||f>0&&1>f?w=e.x+e.width*f:I?(C=C||I.scale(),w=e.x+f/C.sx):w=e.x+f),isFinite(h)&&(g||h>0&&1>h?A=e.y+e.height*h:I?(C=C||I.scale(),A=e.y+h/C.sy):A=e.y+h),!n.isUndefined(u)||!n.isUndefined(c)){var x=t.bbox(!1,this.paper.viewport);"middle"===u?A-=x.height/2:isFinite(u)&&(A+=u>-1&&1>u?x.height*u:u),"middle"===c?w-=x.width/2:isFinite(c)&&(w+=c>-1&&1>c?x.width*c:c)}t.translate(w,A)},renderMarkup:function(){var t=this.model.get("markup")||this.model.markup;if(!t)throw new Error("properties.markup is missing while the default render() implementation is used.");var e=r(t);this.vel.append(e)},render:function(){return this.$el.empty(),this.renderMarkup(),this.rotatableNode=this.vel.findOne(".rotatable"),this.scalableNode=this.vel.findOne(".scalable"),this.update(),this.resize(),this.rotate(),this.translate(),this},scale:function(t,e){this.vel.scale(t,e)},resize:function(){var t=this.model.get("size")||{width:1,height:1},e=this.model.get("angle")||0,n=this.scalableNode;if(n){var i=n.bbox(!0);n.attr("transform","scale("+t.width/(i.width||1)+","+t.height/(i.height||1)+")");var r=this.rotatableNode,a=r&&r.attr("transform");if(a&&"null"!==a){r.attr("transform",a+" rotate("+-e+","+t.width/2+","+t.height/2+")");var o=n.bbox(!1,this.paper.viewport);this.model.set("position",{x:o.x,y:o.y}),this.rotate()}this.update()}},translate:function(t,e,n){var i=this.model.get("position")||{x:0,y:0};this.vel.attr("transform","translate("+i.x+","+i.y+")")},rotate:function(){var t=this.rotatableNode;if(t){var e=this.model.get("angle")||0,n=this.model.get("size")||{width:1,height:1},i=n.width/2,r=n.height/2;t.attr("transform","rotate("+e+","+i+","+r+")")}},getBBox:function(t){if(t&&t.useModelGeometry){var e=this.model.getBBox().bbox(this.model.get("angle")),n=this.paper.viewport.getCTM();return o.rect(r.transformRect(e,n))}return s.dia.CellView.prototype.getBBox.apply(this,arguments)},prepareEmbedding:function(t){t=t||{};var e=t.model||this.model,i=t.paper||this.paper;e.toFront({deep:!0,ui:!0}),n.invoke(i.model.getConnectedLinks(e,{deep:!0}),"toFront",{ui:!0});var r=e.get("parent");r&&i.model.getCell(r).unembed(e,{ui:!0})},processEmbedding:function(t){t=t||{};var e=t.model||this.model,n=t.paper||this.paper,i=n.options,r=n.model.findModelsUnderElement(e,{searchBy:i.findParentBy});i.frontParentOnly&&(r=r.slice(-1));for(var a=null,o=this._candidateEmbedView,s=r.length-1;s>=0;s--){var l=r[s];if(o&&o.model.id==l.id){a=o;break}var u=l.findView(n);if(i.validateEmbedding.call(n,this,u)){a=u;break}}a&&a!=o&&(o&&o.unhighlight(null,{embedding:!0}),this._candidateEmbedView=a.highlight(null,{embedding:!0})),!a&&o&&(o.unhighlight(null,{embedding:!0}),delete this._candidateEmbedView)},finalizeEmbedding:function(t){t=t||{};var e=this._candidateEmbedView,i=t.model||this.model,r=t.paper||this.paper;e&&(e.model.embed(i,{ui:!0}),e.unhighlight(null,{embedding:!0}),delete this._candidateEmbedView),n.invoke(r.model.getConnectedLinks(i,{deep:!0}),"reparent",{ui:!0})},pointerdown:function(t,e,n){var i=this.paper;if(t.target.getAttribute("magnet")&&i.options.validateMagnet.call(i,this,t.target)){this.model.trigger("batch:start",{batchName:"add-link"});var r=i.getDefaultLink(this,t.target);r.set({source:{id:this.model.id,selector:this.getSelector(t.target),port:t.target.getAttribute("port")},target:{x:e,y:n}}),i.model.addCell(r);var a=this._linkView=i.findViewByModel(r);a.pointerdown(t,e,n),a.startArrowheadMove("target",{whenNotAllowed:"remove"})}else this._dx=e,this._dy=n,this.restrictedArea=i.getRestrictedArea(this),s.dia.CellView.prototype.pointerdown.apply(this,arguments),this.notify("element:pointerdown",t,e,n)},pointermove:function(t,e,i){if(this._linkView)this._linkView.pointermove(t,e,i);else{var r=this.paper.options.gridSize,a=n.isFunction(this.options.interactive)?this.options.interactive(this,"pointermove"):this.options.interactive;if(a!==!1){var l=this.model.get("position"),u=o.snapToGrid(l.x,r)-l.x+o.snapToGrid(e-this._dx,r),c=o.snapToGrid(l.y,r)-l.y+o.snapToGrid(i-this._dy,r);this.model.translate(u,c,{restrictedArea:this.restrictedArea,ui:!0}),this.paper.options.embeddingMode&&(this._inProcessOfEmbedding||(this.prepareEmbedding(),this._inProcessOfEmbedding=!0),this.processEmbedding())}this._dx=o.snapToGrid(e,r),this._dy=o.snapToGrid(i,r),s.dia.CellView.prototype.pointermove.apply(this,arguments),this.notify("element:pointermove",t,e,i)}},pointerup:function(t,e,n){this._linkView?(this._linkView.pointerup(t,e,n),this._linkView=null,this.model.trigger("batch:stop",{batchName:"add-link"})):(this._inProcessOfEmbedding&&(this.finalizeEmbedding(),this._inProcessOfEmbedding=!1),this.notify("element:pointerup",t,e,n),s.dia.CellView.prototype.pointerup.apply(this,arguments))}}),s.dia.Link=s.dia.Cell.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),labelMarkup:['<g class="label">',"<rect />","<text />","</g>"].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaults:{type:"link",source:{},target:{}},disconnect:function(){return this.set({source:o.point(0,0),target:o.point(0,0)})},label:function(t,e){t=t||0;var i=this.get("labels")||[];if(0===arguments.length||1===arguments.length)return i[t];var r=n.merge({},i[t],e),a=i.slice();return a[t]=r,this.set({labels:a})},translate:function(t,e,i){var r={},a=this.get("source"),o=this.get("target"),s=this.get("vertices");return a.id||(r.source={x:(a.x||0)+t,y:(a.y||0)+e}),o.id||(r.target={x:(o.x||0)+t,y:(o.y||0)+e}),s&&s.length&&(r.vertices=n.map(s,function(n){return{x:n.x+t,y:n.y+e}})),i=i||{},i.translateBy=i.translateBy||this.id,i.tx=t,i.ty=e,this.set(r,i)},reparent:function(t){var e;if(this.graph){var n=this.graph.getCell(this.get("source").id),i=this.graph.getCell(this.get("target").id),r=this.graph.getCell(this.get("parent"));n&&i&&(e=this.graph.getCommonAncestor(n,i)),!r||e&&e.id===r.id||r.unembed(this,t),e&&e.embed(this,t)}return e},isLink:function(){return!0},hasLoop:function(t){t=t||{};var e=this.get("source").id,n=this.get("target").id;if(!e||!n)return!1;var i=e===n;if(!i&&t.deep&&this.graph){var r=this.graph.getCell(e),a=this.graph.getCell(n);i=r.isEmbeddedIn(a)||a.isEmbeddedIn(r)}return i},getSourceElement:function(){var t=this.get("source");return t&&t.id&&this.graph&&this.graph.getCell(t.id)||null},getTargetElement:function(){var t=this.get("target");return t&&t.id&&this.graph&&this.graph.getCell(t.id)||null},getRelationshipAncestor:function(){var t;if(this.graph){var e=n.compact([this,this.getSourceElement(),this.getTargetElement()]);t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=n.isString(t)?t:t.id,i=this.getRelationshipAncestor();return!!i&&(i.id===e||i.isEmbeddedIn(e))}}),s.dia.LinkView=s.dia.CellView.extend({className:function(){return n.unique(this.model.get("type").split(".").concat("link")).join(" ")},options:{shortLinkLength:100,doubleLinkTools:!1,longLinkLength:160,linkToolsOffset:40,doubleLinkToolsOffset:60,sampleInterval:50},_z:null,initialize:function(t){s.dia.CellView.prototype.initialize.apply(this,arguments),"function"!=typeof this.constructor.prototype.watchSource&&(this.constructor.prototype.watchSource=this.createWatcher("source"),this.constructor.prototype.watchTarget=this.createWatcher("target")),this._labelCache={},this._markerCache={},this.startListening()},startListening:function(){var t=this.model;this.listenTo(t,"change:markup",this.render),this.listenTo(t,"change:smooth change:manhattan change:router change:connector",this.update),this.listenTo(t,"change:toolMarkup",this.onToolsChange),this.listenTo(t,"change:labels change:labelMarkup",this.onLabelsChange),this.listenTo(t,"change:vertices change:vertexMarkup",this.onVerticesChange),this.listenTo(t,"change:source",this.onSourceChange),this.listenTo(t,"change:target",this.onTargetChange)},onSourceChange:function(t,e,n){this.watchSource(t,e),n.translateBy&&this.model.get("target").id||(n.updateConnectionOnly=!0,this.update(this.model,null,n))},onTargetChange:function(t,e,n){this.watchTarget(t,e),n.translateBy||(n.updateConnectionOnly=!0,this.update(this.model,null,n))},onVerticesChange:function(t,e,n){this.renderVertexMarkers(),n.translateBy&&n.translateBy!==this.model.id||(n.updateConnectionOnly=!0,this.update(t,null,n))},onToolsChange:function(){this.renderTools().updateToolsPosition()},onLabelsChange:function(){this.renderLabels().updateLabelPositions()},render:function(){this.$el.empty();var t=this.model,e=r(t.get("markup")||t.markup);if(n.isArray(e)||(e=[e]),this._V={},n.each(e,function(t){var e=t.attr("class");e&&(this._V[i.camelCase(e)]=t)},this),!this._V.connection)throw new Error("link: no connection path in the markup");return this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e),this.renderLabels(),this.watchSource(t,t.get("source")).watchTarget(t,t.get("target")).update(),this},renderLabels:function(){if(!this._V.labels)return this;this._labelCache={};var t=i(this._V.labels.node).empty(),e=this.model.get("labels")||[];if(!e.length)return this;var a=n.template(this.model.get("labelMarkup")||this.model.labelMarkup),o=r(a()),l=this.can("labelMove");return n.each(e,function(e,a){var u=o.clone().node;r(u).attr("label-idx",a),l&&r(u).attr("cursor","move"),this._labelCache[a]=r(u);var c=i(u).find("text"),h=i(u).find("rect"),d=n.extend({"text-anchor":"middle","font-size":14},s.util.getByPath(e,"attrs/text","/"));c.attr(n.omit(d,"text")),n.isUndefined(d.text)||r(c[0]).text(d.text+""),t.append(u);var f=r(c[0]).bbox(!0,t[0]);r(c[0]).translate(0,-f.height/2);var g=n.extend({fill:"white",rx:3,ry:3},s.util.getByPath(e,"attrs/rect","/"));h.attr(n.extend(g,{x:f.x,y:f.y-f.height/2,width:f.width,height:f.height}))},this),this},renderTools:function(){if(!this._V.linkTools)return this;var t=i(this._V.linkTools.node).empty(),e=n.template(this.model.get("toolMarkup")||this.model.toolMarkup),a=r(e());if(t.append(a.node),this._toolCache=a,this.options.doubleLinkTools){var o;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(e=n.template(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),o=r(e())):o=a.clone(),t.append(o.node),this._tool2Cache=o}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=i(this._V.markerVertices.node).empty(),e=n.template(this.model.get("vertexMarkup")||this.model.vertexMarkup);return n.each(this.model.get("vertices"),function(i,a){t.append(r(e(n.extend({idx:a},i))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=i(this._V.markerArrowheads.node);t.empty();var e=n.template(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=r(e({end:"source"})),this._V.targetArrowhead=r(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},update:function(t,e,n){return n=n||{},n.updateConnectionOnly||this.updateAttributes(),this.updateConnection(n),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null,this.updatePostponed=!1,this},updateConnection:function(t){t=t||{};var e,i=this.model;if(t.translateBy&&i.isRelationshipEmbeddedIn(t.translateBy)){var r=t.tx||0,a=t.ty||0;e=this.route=n.map(this.route,function(t){return o.point(t).offset(r,a)}),this._translateConnectionPoints(r,a)}else e=this.route=this.findRoute(i.get("vertices")||[],t),this._findConnectionPoints(e);var s=this.getPathData(e);this._V.connection.attr("d",s),this._V.connectionWrap&&this._V.connectionWrap.attr("d",s),this._translateAndAutoOrientArrows(this._V.markerSource,this._V.markerTarget)},updateAttributes:function(){n.each(this.model.get("attrs"),function(t,e){var i=[];n.isObject(t.fill)&&(this.applyGradient(e,"fill",t.fill),i.push("fill")),n.isObject(t.stroke)&&(this.applyGradient(e,"stroke",t.stroke),i.push("stroke")),n.isObject(t.filter)&&(this.applyFilter(e,t.filter),i.push("filter")),i.length>0&&(i.unshift(t),t=n.omit.apply(n,i)),this.findBySelector(e).attr(t)},this)},_findConnectionPoints:function(t){var e,i,r,a,s=n.first(t);e=this.getConnectionPoint("source",this.model.get("source"),s||this.model.get("target")).round();var l=n.last(t);i=this.getConnectionPoint("target",this.model.get("target"),l||e).round();var u=this._markerCache;this._V.markerSource&&(u.sourceBBox=u.sourceBBox||this._V.markerSource.bbox(!0),r=o.point(e).move(s||i,u.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(u.targetBBox=u.targetBBox||this._V.markerTarget.bbox(!0),a=o.point(i).move(l||e,u.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),u.sourcePoint=r||e,u.targetPoint=a||i,this.sourcePoint=e,this.targetPoint=i},_translateConnectionPoints:function(t,e){var n=this._markerCache;n.sourcePoint.offset(t,e),n.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;var t=this.model.get("labels")||[];if(!t.length)return this;var e=this._V.connection.node,i=e.getTotalLength();if(!n.isNaN(i)){var r;n.each(t,function(t,a){var s=t.position,l=n.isObject(s)?s.distance:s,u=n.isObject(s)?s.offset:{x:0,y:0};l=l>i?i:l,l=0>l?i+l:l,l=l>1?l:i*l;var c=e.getPointAtLength(l);if(n.isObject(u))c=o.point(c).offset(u.x,u.y);else if(n.isNumber(u)){r||(r=this._samples||this._V.connection.sample(this.options.sampleInterval));for(var h,d,f,g,p=1/0,m=0,v=r.length;v>m;m++)f=r[m],g=o.line(f,c).squaredLength(),p>g&&(p=g,h=f,d=m);var y=r[d-1],I=r[d+1],b=0;I?b=o.point(c).theta(I):y&&(b=o.point(y).theta(c)),c=o.point(c).offset(u).rotate(c,b-90)}this._labelCache[a].attr("transform","translate("+c.x+", "+c.y+")")},this)}return this},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,i=this.getConnectionLength();if(!n.isNaN(i)){i<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var r=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+t),this.options.doubleLinkTools&&i>=this.options.longLinkLength){var a=this.options.doubleLinkToolsOffset||e;r=this.getPointAtLength(i-a),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+t),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===i.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},createWatcher:function(t){function e(e,n){n=n||{};var r=null,a=e.previous(t)||{};return a.id&&this.stopListening(this.paper.getModelById(a.id),"change",i),n.id&&(r=this.paper.getModelById(n.id),this.listenTo(r,"change",i)),i.call(this,r,{cacheOnly:!0}),this}var i=n.partial(this.onEndModelChange,t);return e},onEndModelChange:function(t,e,i){var r=!i.cacheOnly,a=this.model,s=a.get(t)||{};if(e){var l=this.constructor.makeSelector(s),u="source"==t?"target":"source",c=a.get(u)||{},h=c.id&&this.constructor.makeSelector(c);
if(i.handleBy===this.cid&&l==h)this[t+"BBox"]=this[u+"BBox"],this[t+"View"]=this[u+"View"],this[t+"Magnet"]=this[u+"Magnet"];else if(i.translateBy){var d=this[t+"BBox"];d.x+=i.tx,d.y+=i.ty}else{var f=this.paper.findViewByModel(s.id),g=f.el.querySelector(l);this[t+"BBox"]=f.getStrokeBBox(g),this[t+"View"]=f,this[t+"Magnet"]=g}if(i.handleBy===this.cid&&i.translateBy&&a.isEmbeddedIn(e)&&!n.isEmpty(a.get("vertices"))&&(r=!1),!this.updatePostponed&&c.id){var p=this.paper.getModelById(c.id);s.id===c.id&&(i.handleBy=this.cid),(i.handleBy===this.cid||i.translateBy&&p.isEmbeddedIn(i.translateBy))&&(this.updatePostponed=!0,r=!1)}}else this[t+"BBox"]=o.rect(s.x||0,s.y||0,1,1),this[t+"View"]=this[t+"Magnet"]=null;r&&(i.updateConnectionOnly=!0,this.update(a,null,i))},_translateAndAutoOrientArrows:function(t,e){t&&t.translateAndAutoOrient(this.sourcePoint,n.first(this.route)||this.targetPoint,this.paper.viewport),e&&e.translateAndAutoOrient(this.targetPoint,n.last(this.route)||this.sourcePoint,this.paper.viewport)},removeVertex:function(t){var e=n.clone(this.model.get("vertices"));return e&&e.length&&(e.splice(t,1),this.model.set("vertices",e,{ui:!0})),this},addVertex:function(t){for(var e,n=(this.model.get("vertices")||[]).slice(),i=n.slice(),a=this._V.connection.node.cloneNode(!1),o=a.getTotalLength(),s=20,l=n.length+1;l--&&(n.splice(l,0,t),r(a).attr("d",this.getPathData(this.findRoute(n))),e=a.getTotalLength(),e-o>s);)n=i.slice();return-1===l&&(l=0,n.splice(l,0,t)),this.model.set("vertices",n,{ui:!0}),l},sendToken:function(t,e,i){e=e||1e3,r(this.paper.viewport).append(t),r(t).animateAlongPath({dur:e+"ms",repeatCount:1},this._V.connection.node),n.delay(function(){r(t).remove(),i&&i()},e)},findRoute:function(t){var e=s.routers,i=this.model.get("router"),r=this.paper.options.defaultRouter;if(!i)if(this.model.get("manhattan"))i={name:"orthogonal"};else{if(!r)return t;i=r}var a=i.args||{},o=n.isFunction(i)?i:e[i.name];if(!n.isFunction(o))throw new Error('unknown router: "'+i.name+'"');var l=o.call(this,t||[],a,this);return l},getPathData:function(t){var e=s.connectors,i=this.model.get("connector"),r=this.paper.options.defaultConnector;i||(i=this.model.get("smooth")?{name:"smooth"}:r||{});var a=n.isFunction(i)?i:e[i.name],o=i.args||{};if(!n.isFunction(a))throw new Error('unknown connector: "'+i.name+'"');var l=a.call(this,this._markerCache.sourcePoint,this._markerCache.targetPoint,t||this.model.get("vertices")||{},o,this);return l},getConnectionPoint:function(t,e,i){var r;if(n.isEmpty(e)&&(e={x:0,y:0}),n.isEmpty(i)&&(i={x:0,y:0}),e.id){var a,s="source"===t?this.sourceBBox:this.targetBBox;if(i.id){var l="source"===t?this.targetBBox:this.sourceBBox;a=o.rect(l).intersectionWithLineFromCenterToPoint(o.rect(s).center()),a=a||o.rect(l).center()}else a=o.point(i);if(this.paper.options.perpendicularLinks||this.options.perpendicular){var u,c=o.rect(0,a.y,this.paper.options.width,1),h=o.rect(a.x,0,1,this.paper.options.height);if(c.intersect(o.rect(s)))switch(u=o.rect(s).sideNearestToPoint(a)){case"left":r=o.point(s.x,a.y);break;case"right":r=o.point(s.x+s.width,a.y);break;default:r=o.rect(s).center()}else if(h.intersect(o.rect(s)))switch(u=o.rect(s).sideNearestToPoint(a)){case"top":r=o.point(a.x,s.y);break;case"bottom":r=o.point(a.x,s.y+s.height);break;default:r=o.rect(s).center()}else r=o.rect(s).intersectionWithLineFromCenterToPoint(a),r=r||o.rect(s).center()}else if(this.paper.options.linkConnectionPoint){var d="target"===t?this.targetView:this.sourceView,f="target"===t?this.targetMagnet:this.sourceMagnet;r=this.paper.options.linkConnectionPoint(this,d,f,a)}else r=o.rect(s).intersectionWithLineFromCenterToPoint(a),r=r||o.rect(s).center()}else r=o.point(e);return r},getConnectionLength:function(){return this._V.connection.node.getTotalLength()},getPointAtLength:function(t){return this._V.connection.node.getPointAtLength(t)},_beforeArrowheadMove:function(){this._z=this.model.get("z"),this.model.toFront(),this.el.style.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets()},_afterArrowheadMove:function(){n.isNull(this._z)||(this.model.set("z",this._z,{ui:!0}),this._z=null),this.el.style.pointerEvents="visiblePainted",this.paper.options.markAvailable&&this._unmarkAvailableMagnets()},_createValidateConnectionArgs:function(t){function e(t,e){return n[a]=t,n[a+1]=t.el===e?void 0:e,n}var n=[];n[4]=t,n[5]=this;var i,r=0,a=0;"source"===t?(r=2,i="target"):(a=2,i="source");var o=this.model.get(i);return o.id&&(n[r]=this.paper.findViewByModel(o.id),n[r+1]=o.selector&&n[r].el.querySelector(o.selector)),e},_markAvailableMagnets:function(){var t=this.paper.model.getElements(),e=this.paper.options.validateConnection;n.chain(t).map(this.paper.findViewByModel,this.paper).each(function(t){var i="false"!==t.el.getAttribute("magnet")&&e.apply(this.paper,this._validateConnectionArgs(t,null)),a=n.filter(t.el.querySelectorAll("[magnet]"),function(n){return e.apply(this.paper,this._validateConnectionArgs(t,n))},this);i&&r(t.el).addClass("available-magnet"),n.each(a,function(t){r(t).addClass("available-magnet")}),(i||a.length)&&r(t.el).addClass("available-cell")},this).value()},_unmarkAvailableMagnets:function(){n.each(this.paper.el.querySelectorAll(".available-cell, .available-magnet"),function(t){r(t).removeClass("available-magnet").removeClass("available-cell")})},startArrowheadMove:function(t,e){e=n.defaults(e||{},{whenNotAllowed:"revert"}),this._action="arrowhead-move",this._whenNotAllowed=e.whenNotAllowed,this._arrowhead=t,this._initialEnd=n.clone(this.model.get(t))||{x:0,y:0},this._validateConnectionArgs=this._createValidateConnectionArgs(this._arrowhead),this._beforeArrowheadMove()},can:function(t){var e=n.isFunction(this.options.interactive)?this.options.interactive(this,"pointerdown"):this.options.interactive;return e===!1?!1:!n.isObject(e)||e[t]!==!1},pointerdown:function(t,e,i){if(s.dia.CellView.prototype.pointerdown.apply(this,arguments),this.notify("link:pointerdown",t,e,i),this._dx=e,this._dy=i,null==t.target.getAttribute("magnet")){var a=n.isFunction(this.options.interactive)?this.options.interactive(this,"pointerdown"):this.options.interactive;if(a!==!1){var o,l=t.target.getAttribute("class"),u=t.target.parentNode.getAttribute("class");switch("label"===u?(l=u,o=t.target.parentNode):o=t.target,l){case"marker-vertex":this.can("vertexMove")&&(this._action="vertex-move",this._vertexIdx=t.target.getAttribute("idx"));break;case"marker-vertex-remove":case"marker-vertex-remove-area":this.can("vertexRemove")&&this.removeVertex(t.target.getAttribute("idx"));break;case"marker-arrowhead":this.can("arrowheadMove")&&this.startArrowheadMove(t.target.getAttribute("end"));break;case"label":this.can("labelMove")&&(this._action="label-move",this._labelIdx=parseInt(r(o).attr("label-idx"),10),this._samples=this._V.connection.sample(1),this._linkLength=this._V.connection.node.getTotalLength());break;default:var c=t.target.parentNode.getAttribute("event");c?"remove"===c?this.model.remove():this.paper.trigger(c,t,this,e,i):this.can("vertexAdd")&&(this._vertexIdx=this.addVertex({x:e,y:i}),this._action="vertex-move")}}}},pointermove:function(t,e,i){switch(this._action){case"vertex-move":var a=n.clone(this.model.get("vertices"));a[this._vertexIdx]={x:e,y:i},this.model.set("vertices",a,{ui:!0});break;case"label-move":for(var l,u,c,h,d={x:e,y:i},f=(this.model.get("labels")[this._labelIdx],this._samples),g=1/0,p=0,m=f.length;m>p;p++)c=f[p],h=o.line(c,d).squaredLength(),g>h&&(g=h,l=c,u=p);var v=f[u-1],y=f[u+1],I=(o.point(l).distance(d),0);v&&y?I=o.line(v,y).pointOffset(d):v?I=o.line(v,l).pointOffset(d):y&&(I=o.line(l,y).pointOffset(d)),this.model.label(this._labelIdx,{position:{distance:l.distance/this._linkLength,offset:I}});break;case"arrowhead-move":if(this.paper.options.snapLinks){var b=this.paper.options.snapLinks.radius||50,C=this.paper.findViewsInArea({x:e-b,y:i-b,width:2*b,height:2*b});this._closestView&&this._closestView.unhighlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this._closestView=this._closestEnd=null;var w,A=Number.MAX_VALUE,x=o.point(e,i);n.each(C,function(t){"false"!==t.el.getAttribute("magnet")&&(w=t.model.getBBox().center().distance(x),b>w&&A>w&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(t,null))&&(A=w,this._closestView=t,this._closestEnd={id:t.model.id})),t.$("[magnet]").each(n.bind(function(e,n){var i=r(n).bbox(!1,this.paper.viewport);w=x.distance({x:i.x+i.width/2,y:i.y+i.height/2}),b>w&&A>w&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(t,n))&&(A=w,this._closestView=t,this._closestEnd={id:t.model.id,selector:t.getSelector(n),port:n.getAttribute("port")})},this))},this),this._closestView&&this._closestView.highlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this.model.set(this._arrowhead,this._closestEnd||{x:e,y:i},{ui:!0})}else{var N="mousemove"===t.type?t.target:document.elementFromPoint(t.clientX,t.clientY);this._targetEvent!==N&&(this._magnetUnderPointer&&this._viewUnderPointer.unhighlight(this._magnetUnderPointer,{connecting:!0}),this._viewUnderPointer=this.paper.findView(N),this._viewUnderPointer?(this._magnetUnderPointer=this._viewUnderPointer.findMagnet(N),this._magnetUnderPointer&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(this._viewUnderPointer,this._magnetUnderPointer))?this._magnetUnderPointer&&this._viewUnderPointer.highlight(this._magnetUnderPointer,{connecting:!0}):this._magnetUnderPointer=null):this._magnetUnderPointer=null),this._targetEvent=N,this.model.set(this._arrowhead,{x:e,y:i},{ui:!0})}}this._dx=e,this._dy=i,s.dia.CellView.prototype.pointermove.apply(this,arguments),this.notify("link:pointermove",t,e,i)},pointerup:function(t,e,n){if("label-move"===this._action)this._samples=null;else if("arrowhead-move"===this._action){var i=this.paper.options,r=this._arrowhead;if(i.snapLinks)this._closestView&&this._closestView.unhighlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this._closestView=this._closestEnd=null;else{var a=this._viewUnderPointer,o=this._magnetUnderPointer;if(this._viewUnderPointer=null,this._magnetUnderPointer=null,o){a.unhighlight(o,{connecting:!0});var l=a.getSelector(o),u=o.getAttribute("port"),c={id:a.model.id};null!=l&&(c.port=u),null!=u&&(c.selector=l),this.model.set(r,c,{ui:!0})}}if(!this.paper.linkAllowed(this))switch(this._whenNotAllowed){case"remove":this.model.remove();break;case"revert":default:this.model.set(r,this._initialEnd,{ui:!0})}i.embeddingMode&&this.model.reparent()&&(this._z=null),this._afterArrowheadMove()}this._action=null,this._whenNotAllowed=null,this.notify("link:pointerup",t,e,n),s.dia.CellView.prototype.pointerup.apply(this,arguments)}},{makeSelector:function(t){var e='[model-id="'+t.id+'"]';return t.port?e+=' [port="'+t.port+'"]':t.selector&&(e+=" "+t.selector),e}}),s.dia.Paper=s.mvc.View.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,perpendicularLinks:!1,elementView:s.dia.ElementView,linkView:s.dia.LinkView,snapLinks:!1,multiLinks:!0,guard:function(t,e){return!1},restrictTranslate:!1,markAvailable:!1,defaultLink:new s.dia.Link,defaultConnector:{name:"normal"},defaultRouter:null,validateMagnet:function(t,e){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,n,i,r,a){return("target"===r?n:t)instanceof s.dia.ElementView},embeddingMode:!1,validateEmbedding:function(t,e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,clickThreshold:0,cellViewNamespace:s.shapes},events:{mousedown:"pointerdown",dblclick:"mousedblclick",click:"mouseclick",touchstart:"pointerdown",mousemove:"pointermove",touchmove:"pointermove","mouseover .element":"cellMouseover","mouseover .link":"cellMouseover","mouseout .element":"cellMouseout","mouseout .link":"cellMouseout",contextmenu:"contextmenu"},init:function(){n.bindAll(this,"pointerup"),this.options.origin=n.clone(this.options.origin),this.options.defaultConnector=n.clone(this.options.defaultConnector),this.svg=r("svg").node,this.viewport=r("g").addClass("viewport").node,this.defs=r("defs").node,r(this.svg).append([this.viewport,this.defs]),this.$el.append(this.svg),this.setOrigin(),this.setDimensions(),this.listenTo(this.model,"add",this.onCellAdded),this.listenTo(this.model,"remove",this.removeView),this.listenTo(this.model,"reset",this.resetViews),this.listenTo(this.model,"sort",this.sortViews),i(document).on("mouseup touchend",this.pointerup),this._mousemoved=0,this._views={},this.on({"cell:highlight":this.onCellHighlight,"cell:unhighlight":this.onCellUnhighlight})},onRemove:function(){this.removeViews(),i(document).off("mouseup touchend",this.pointerup)},setDimensions:function(t,e){t=this.options.width=t||this.options.width,e=this.options.height=e||this.options.height,r(this.svg).attr({width:t,height:e}),this.trigger("resize",t,e)},setOrigin:function(t,e){this.options.origin.x=t||0,this.options.origin.y=e||0,r(this.viewport).translate(t,e,{absolute:!0}),this.trigger("translate",t,e)},fitToContent:function(t,e,i,a){n.isObject(t)?(a=t,t=a.gridWidth||1,e=a.gridHeight||1,i=a.padding||0):(a=a||{},t=t||1,e=e||1,i=i||0),i=s.util.normalizeSides(i);var o=r(this.viewport).bbox(!0,this.svg),l=r(this.viewport).scale();o.x*=l.sx,o.y*=l.sy,o.width*=l.sx,o.height*=l.sy;var u=Math.max(Math.ceil((o.width+o.x)/t),1)*t,c=Math.max(Math.ceil((o.height+o.y)/e),1)*e,h=0,d=0;("negative"==a.allowNewOrigin&&o.x<0||"positive"==a.allowNewOrigin&&o.x>=0||"any"==a.allowNewOrigin)&&(h=Math.ceil(-o.x/t)*t,h+=i.left,u+=h),("negative"==a.allowNewOrigin&&o.y<0||"positive"==a.allowNewOrigin&&o.y>=0||"any"==a.allowNewOrigin)&&(d=Math.ceil(-o.y/e)*e,d+=i.top,c+=d),u+=i.right,c+=i.bottom,u=Math.max(u,a.minWidth||0),c=Math.max(c,a.minHeight||0),u=Math.min(u,a.maxWidth||Number.MAX_VALUE),c=Math.min(c,a.maxHeight||Number.MAX_VALUE);var f=u!=this.options.width||c!=this.options.height,g=h!=this.options.origin.x||d!=this.options.origin.y;g&&this.setOrigin(h,d),f&&this.setDimensions(u,c)},scaleContentToFit:function(t){var e=this.getContentBBox();if(e.width&&e.height){t=t||{},n.defaults(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var i=t.padding,a=t.minScaleX||t.minScale,s=t.maxScaleX||t.maxScale,l=t.minScaleY||t.minScale,u=t.maxScaleY||t.maxScale,c=t.fittingBBox||{x:this.options.origin.x,y:this.options.origin.y,width:this.options.width,height:this.options.height};c=o.rect(c).moveAndExpand({x:i,y:i,width:-2*i,height:-2*i});var h=r(this.viewport).scale(),d=c.width/e.width*h.sx,f=c.height/e.height*h.sy;if(t.preserveAspectRatio&&(d=f=Math.min(d,f)),t.scaleGrid){var g=t.scaleGrid;d=g*Math.floor(d/g),f=g*Math.floor(f/g)}d=Math.min(s,Math.max(a,d)),f=Math.min(u,Math.max(l,f)),this.scale(d,f);var p=this.getContentBBox(),m=c.x-p.x,v=c.y-p.y;this.setOrigin(m,v)}},getContentBBox:function(){var t=this.viewport.getBoundingClientRect(),e=this.viewport.getScreenCTM(),n=this.viewport.getCTM(),i=o.rect({x:t.left-e.e+n.e,y:t.top-e.f+n.f,width:t.width,height:t.height});return i},getArea:function(){var t=this.viewport.getCTM().inverse(),e={x:0,y:0,width:this.options.width,height:this.options.height};return o.rect(r.transformRect(e,t))},getRestrictedArea:function(){var t;return t=n.isFunction(this.options.restrictTranslate)?this.options.restrictTranslate.apply(this,arguments):this.options.restrictTranslate===!0?this.getArea():this.options.restrictTranslate||null},createViewForModel:function(t){var n,i,r=this.options.cellViewNamespace,a=t.get("type")+"View",o=s.util.getByPath(r,a,".");t.isLink()?(n=this.options.linkView,i=s.dia.LinkView):(n=this.options.elementView,i=s.dia.ElementView);var l=n.prototype instanceof e.View?o||n:n.call(this,t)||o||i;return new l({model:t,interactive:this.options.interactive})},onCellAdded:function(t,e,i){if(this.options.async&&i.async!==!1&&n.isNumber(i.position)){if(this._asyncCells=this._asyncCells||[],this._asyncCells.push(t),0==i.position){if(this._frameId)throw new Error("another asynchronous rendering in progress");this.asyncRenderViews(this._asyncCells,i),delete this._asyncCells}}else this.renderView(t)},removeView:function(t){var e=this._views[t.id];return e&&(e.remove(),delete this._views[t.id]),e},renderView:function(t){var e=this._views[t.id]=this.createViewForModel(t);return r(this.viewport).append(e.el),e.paper=this,e.render(),i(e.el).find("image").on("dragstart",function(){return!1}),e},beforeRenderViews:function(t){return t.sort(function(t,e){return t instanceof s.dia.Link?1:-1}),t},afterRenderViews:function(){this.sortViews()},resetViews:function(t,e){i(this.viewport).empty(),this.removeViews();var r=t.models.slice();r=this.beforeRenderViews(r,e)||r,this._frameId&&(s.util.cancelFrame(this._frameId),delete this._frameId),this.options.async?this.asyncRenderViews(r,e):(n.each(r,this.renderView,this),this.sortViews())},removeViews:function(){n.invoke(this._views,"remove"),this._views={}},asyncBatchAdded:n.noop,asyncRenderViews:function(t,e){if(this._frameId){var i=this.options.async&&this.options.async.batchSize||50,r=t.splice(0,i),a=this.model.get("cells");n.each(r,function(t){t.collection===a&&this.renderView(t)},this),this.asyncBatchAdded()}t.length?this._frameId=s.util.nextFrame(function(){this.asyncRenderViews(t,e)},this):(delete this._frameId,this.afterRenderViews(e),this.trigger("render:done",e))},sortViews:function(){var t=i(this.viewport).children("[model-id]"),e=this.model.get("cells");s.util.sortElements(t,function(t,n){var r=e.get(i(t).attr("model-id")),a=e.get(i(n).attr("model-id"));return(r.get("z")||0)>(a.get("z")||0)?1:-1})},scale:function(t,e,i,a){e=e||t,n.isUndefined(i)&&(i=0,a=0),r(this.viewport).attr("transform","");var o=this.options.origin.x,s=this.options.origin.y;if(i||a||o||s){var l=o-i*(t-1),u=s-a*(e-1);this.setOrigin(l,u)}return r(this.viewport).scale(t,e),this.trigger("scale",t,e,i,a),this},rotate:function(t,e,i){if(n.isUndefined(e)){var a=this.viewport.getBBox();e=a.width/2,i=a.height/2}r(this.viewport).rotate(t,e,i)},findView:function(t){for(var e=n.isString(t)?this.viewport.querySelector(t):t instanceof i?t[0]:t;e&&e!==this.el&&e!==document;){var r=e.getAttribute("model-id");if(r)return this._views[r];e=e.parentNode}},findViewByModel:function(t){var e=n.isString(t)?t:t.id;return this._views[e]},findViewsFromPoint:function(t){t=o.point(t);var e=n.map(this.model.getElements(),this.findViewByModel,this);return n.filter(e,function(e){return e&&o.rect(e.vel.bbox(!1,this.viewport)).containsPoint(t)},this)},findViewsInArea:function(t,e){e=n.defaults(e||{},{strict:!1}),t=o.rect(t);var i=n.map(this.model.getElements(),this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return n.filter(i,function(e){return e&&t[r](o.rect(e.vel.bbox(!1,this.viewport)))},this)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t){var e=r(this.viewport).toLocalPoint(t.x,t.y);return{x:o.snapToGrid(e.x,this.options.gridSize),y:o.snapToGrid(e.y,this.options.gridSize)}},clientToLocalPoint:function(t){t=o.point(t);var e=r("rect",{width:this.options.width,height:this.options.height,x:0,y:0,opacity:0});r(this.svg).prepend(e);var n=i(this.svg).offset();e.remove();var a=document.body.scrollTop||document.documentElement.scrollTop,s=document.body.scrollLeft||document.documentElement.scrollLeft;return t.offset(s-n.left,a-n.top),r.transformPoint(t,this.viewport.getCTM().inverse())},linkAllowed:function(t){var e;if(t instanceof s.dia.Link)e=t;else{if(!(t instanceof s.dia.LinkView))throw new Error("Must provide link model or view.");e=t.model}if(!this.options.multiLinks){var i=e.get("source"),r=e.get("target");if(i.id&&r.id){var a=e.getSourceElement();if(a){var o=this.model.getConnectedLinks(a,{outbound:!0,inbound:!1}),l=n.filter(o,function(t){var e=t.get("source"),n=t.get("target");return e&&e.id===i.id&&(!e.port||e.port===i.port)&&n&&n.id===r.id&&(!n.port||n.port===r.port)}).length;if(l>1)return!1}}}return!!(this.options.linkPinning||n.has(e.get("source"),"id")&&n.has(e.get("target"),"id"))},getDefaultLink:function(t,e){return n.isFunction(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},onCellHighlight:function(t,e){r(e).addClass("highlighted")},onCellUnhighlight:function(t,e){r(e).removeClass("highlighted")},mousedblclick:function(t){t.preventDefault(),t=s.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},mouseclick:function(t){if(this._mousemoved<=this.options.clickThreshold){t=s.util.normalizeEvent(t);var e=this.findView(t.target);if(this.guard(t,e))return;var n=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.pointerclick(t,n.x,n.y):this.trigger("blank:pointerclick",t,n.x,n.y)}},guard:function(t,e){return this.options.guard&&this.options.guard(t,e)?!0:e&&e.model&&e.model instanceof s.dia.Cell?!1:this.svg!==t.target&&this.el!==t.target&&!i.contains(this.svg,t.target)},contextmenu:function(t){t=s.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){t=s.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){t.preventDefault(),this._mousemoved=0;var n=this.snapToGrid({x:t.clientX,y:t.clientY});e?(this.sourceView=e,e.pointerdown(t,n.x,n.y)):this.trigger("blank:pointerdown",t,n.x,n.y)}},pointermove:function(t){if(t.preventDefault(),t=s.util.normalizeEvent(t),this.sourceView){this._mousemoved++;var e=this.snapToGrid({x:t.clientX,y:t.clientY});this.sourceView.pointermove(t,e.x,e.y)}},pointerup:function(t){t=s.util.normalizeEvent(t);var e=this.snapToGrid({x:t.clientX,y:t.clientY});this.sourceView?(this.sourceView.pointerup(t,e.x,e.y),this.sourceView=null):this.trigger("blank:pointerup",t,e.x,e.y)},cellMouseover:function(t){t=s.util.normalizeEvent(t);var e=this.findView(t.target);if(e){if(this.guard(t,e))return;e.mouseover(t)}},cellMouseout:function(t){t=s.util.normalizeEvent(t);var e=this.findView(t.target);if(e){if(this.guard(t,e))return;e.mouseout(t)}}}),s.shapes.basic={},s.shapes.basic.Generic=s.dia.Element.extend({defaults:s.util.deepSupplement({type:"basic.Generic",attrs:{".":{fill:"#ffffff",stroke:"none"}}},s.dia.Element.prototype.defaults)}),s.shapes.basic.Rect=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>',defaults:s.util.deepSupplement({type:"basic.Rect",attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.TextView=s.dia.ElementView.extend({initialize:function(){s.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:attrs",this.resize)}}),s.shapes.basic.Text=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><text/></g></g>',defaults:s.util.deepSupplement({type:"basic.Text",attrs:{text:{"font-size":18,fill:"#000000"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.Circle=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>',defaults:s.util.deepSupplement({type:"basic.Circle",size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.Ellipse=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>',defaults:s.util.deepSupplement({type:"basic.Ellipse",size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.Polygon=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>',defaults:s.util.deepSupplement({type:"basic.Polygon",size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.Polyline=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>',defaults:s.util.deepSupplement({type:"basic.Polyline",size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.Image=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>',defaults:s.util.deepSupplement({type:"basic.Image",attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.Path=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>',defaults:s.util.deepSupplement({type:"basic.Path",size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.basic.Rhombus=s.shapes.basic.Path.extend({defaults:s.util.deepSupplement({type:"basic.Rhombus",attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"y-alignment":"middle"}}},s.shapes.basic.Path.prototype.defaults)}),s.shapes.basic.PortsModelInterface={initialize:function(){this.updatePortsAttrs(),this.on("change:inPorts change:outPorts",this.updatePortsAttrs,this),this.constructor.__super__.constructor.__super__.initialize.apply(this,arguments)},updatePortsAttrs:function(t){var e=this.get("attrs");n.each(this._portSelectors,function(t){e[t]&&delete e[t]}),this._portSelectors=[];var i={};n.each(this.get("inPorts"),function(t,e,r){var a=this.getPortAttrs(t,e,r.length,".inPorts","in");this._portSelectors=this._portSelectors.concat(n.keys(a)),n.extend(i,a)},this),n.each(this.get("outPorts"),function(t,e,r){var a=this.getPortAttrs(t,e,r.length,".outPorts","out");this._portSelectors=this._portSelectors.concat(n.keys(a)),n.extend(i,a)},this),this.attr(i,{silent:!0}),this.processPorts(),this.trigger("process:ports")},getPortSelector:function(t){var e=".inPorts",n=this.get("inPorts").indexOf(t);if(0>n&&(e=".outPorts",n=this.get("outPorts").indexOf(t),0>n))throw new Error("getPortSelector(): Port doesn't exist.");return e+">g:nth-child("+(n+1)+")>.port-body"}},s.shapes.basic.PortsViewInterface={initialize:function(){this.listenTo(this.model,"process:ports",this.update),s.dia.ElementView.prototype.initialize.apply(this,arguments)},update:function(){this.renderPorts(),s.dia.ElementView.prototype.update.apply(this,arguments)},renderPorts:function(){var t=this.$(".inPorts").empty(),e=this.$(".outPorts").empty(),i=n.template(this.model.portMarkup);n.each(n.filter(this.model.ports,function(t){return"in"===t.type}),function(e,n){t.append(r(i({id:n,port:e})).node)}),n.each(n.filter(this.model.ports,function(t){return"out"===t.type}),function(t,n){e.append(r(i({id:n,port:t})).node)})}},s.shapes.basic.TextBlock=s.shapes.basic.Generic.extend({markup:['<g class="rotatable"><g class="scalable"><rect/></g><switch>','<foreignObject requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" class="fobj">','<body xmlns="http://www.w3.org/1999/xhtml"><div/></body>',"</foreignObject>",'<text class="content"/>',"</switch></g>"].join(""),defaults:s.util.deepSupplement({type:"basic.TextBlock",attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"",ref:"rect","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},s.shapes.basic.Generic.prototype.defaults),initialize:function(){"undefined"!=typeof SVGForeignObjectElement&&(this.setForeignObjectSize(this,this.get("size")),this.setDivContent(this,this.get("content")),this.listenTo(this,"change:size",this.setForeignObjectSize),this.listenTo(this,"change:content",this.setDivContent)),s.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},setForeignObjectSize:function(t,e){t.attr({".fobj":n.clone(e),div:{style:n.clone(e)}})},setDivContent:function(t,e){t.attr({div:{html:e}})}}),s.shapes.basic.TextBlockView=s.dia.ElementView.extend({initialize:function(){s.dia.ElementView.prototype.initialize.apply(this,arguments),"undefined"==typeof SVGForeignObjectElement&&(this.noSVGForeignObjectElement=!0,this.listenTo(this.model,"change:content",function(t){this.updateContent(t)}))},update:function(t,e){if(this.noSVGForeignObjectElement){var i=this.model,r=n.omit(e||i.get("attrs"),".content");s.dia.ElementView.prototype.update.call(this,i,r),e&&!n.has(e,".content")||this.updateContent(i,e)}else s.dia.ElementView.prototype.update.call(this,i,e)},updateContent:function(t,e){var i=n.merge({},(e||t.get("attrs"))[".content"]);delete i.text;var r=s.util.breakText(t.get("content"),t.get("size"),i,{svgDocument:this.paper.svg}),a=s.util.setByPath({},".content",i,"/");a[".content"].text=r,s.dia.ElementView.prototype.update.call(this,t,a)}}),s.routers.orthogonal=function(){function t(t,e){return t.x==e.x?t.y>e.y?"N":"S":t.y==e.y?t.x>e.x?"W":"E":null}function e(t,e){return t["W"==e||"E"==e?"width":"height"]}function i(t,e){return o.rect(t).moveAndExpand({x:-e,y:-e,width:2*e,height:2*e})}function r(t){return o.rect(t.x,t.y,0,0)}function a(t,e){var n=Math.min(t.x,e.x),i=Math.min(t.y,e.y),r=Math.max(t.x+t.width,e.x+e.width),a=Math.max(t.y+t.height,e.y+e.height);return o.rect(n,i,r-n,a-i)}function s(t,e,n){var i=o.point(t.x,e.y);return n.containsPoint(i)&&(i=o.point(e.x,t.y)),i}function l(e,n,i){var r=o.point(e.x,n.y),a=o.point(n.x,e.y),s=t(e,r),l=t(e,a),u=g[i],c=s==i||s!=u&&(l==u||l!=i)?r:a;return{points:[c],direction:t(c,n)}}function u(e,n,i){var r=s(e,n,i);return{points:[r],direction:t(r,n)}}function c(i,r,a,l){var u,c={},h=[o.point(i.x,r.y),o.point(r.x,i.y)],d=n.filter(h,function(t){return!a.containsPoint(t)}),f=n.filter(d,function(e){return t(e,i)!=l});if(f.length>0)u=n.filter(f,function(e){return t(i,e)==l}).pop(),u=u||f[0],c.points=[u],c.direction=t(u,r);else{u=n.difference(h,d)[0];var g=o.point(r).move(u,-e(a,l)/2),p=s(g,i,a);c.points=[p,g],c.direction=t(g,r)}return c}function h(n,i,r,a){var s=u(i,n,a),c=s.points[0];if(r.containsPoint(c)){s=u(n,i,r);var h=s.points[0];if(a.containsPoint(h)){var d=o.point(n).move(h,-e(r,t(n,h))/2),f=o.point(i).move(c,-e(a,t(i,c))/2),g=o.line(d,f).midpoint(),p=u(n,g,r),m=l(g,i,p.direction);s.points=[p.points[0],m.points[0]],s.direction=m.direction}}return s}function d(e,n,r,l,u){var c,h,d,f={},g=i(a(r,l),1),m=g.center().distance(n)>g.center().distance(e),v=m?n:e,y=m?e:n;return u?(c=o.point.fromPolar(g.width+g.height,p[u],v),c=g.pointNearestToPoint(c).move(c,-1)):c=g.pointNearestToPoint(v).move(v,1),h=s(c,y,g),c.round().equals(h.round())?(h=o.point.fromPolar(g.width+g.height,o.toRad(c.theta(v))+Math.PI/2,y),h=g.pointNearestToPoint(h).move(y,1).round(),d=s(c,h,g),f.points=m?[h,d,c]:[c,d,h]):f.points=m?[h,c]:[c,h],f.direction=m?t(c,n):t(h,n),
f}function f(e,a,s){var f=a.elementPadding||20,g=[],p=i(s.sourceBBox,f),m=i(s.targetBBox,f);e=n.map(e,o.point),e.unshift(p.center()),e.push(m.center());for(var v,y=0,I=e.length-1;I>y;y++){var b=null,C=e[y],w=e[y+1],A=!!t(C,w);if(0==y)y+1==I?p.intersect(i(m,1))?b=d(C,w,p,m):A||(b=h(C,w,p,m)):p.containsPoint(w)?b=d(C,w,p,i(r(w),f)):A||(b=u(C,w,p));else if(y+1==I){var x=A&&t(w,C)==v;m.containsPoint(C)||x?b=d(C,w,i(r(C),f),m,v):A||(b=c(C,w,m,v))}else A||(b=l(C,w,v));b?(Array.prototype.push.apply(g,b.points),v=b.direction):v=t(C,w),I>y+1&&g.push(w)}return g}var g={N:"S",S:"N",E:"W",W:"E"},p={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};return f}(),s.routers.manhattan=function(t,e){"use strict";function n(t){this.map={},this.options=t,this.mapGridSize=100}function i(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function r(t,e){for(var n,i=[],r={x:0,y:0},a=e;n=t[a];){var o=n.difference(a);o.equals(r)||(i.unshift(a),r=o),a=n}return i.unshift(a),i}function a(t,n,i){var r=i.step,a=t.center(),o=e.chain(i.directionMap).pick(n).map(function(e){var n=e.x*t.width/2,i=e.y*t.height/2,o=a.clone().offset(n,i);return t.containsPoint(o)&&o.offset(e.x*r,e.y*r),o.snapToGrid(r)}).value();return o}function o(e,n,i){var r=360/i;return Math.floor(t.normalizeAngle(e.theta(n)+r/2)/r)*r}function s(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function l(t,e){for(var n=1/0,i=0,r=e.length;r>i;i++){var a=t.manhattanDistance(e[i]);n>a&&(n=a)}return n}function u(n,u,c,h){var d,f,g,p,m=h.step;if(n instanceof t.rect?(d=a(n,h.startDirections,h),g=n.center()):(g=n.clone().snapToGrid(m),d=[n]),u instanceof t.rect?(f=a(u,h.endDirections,h),p=u.center()):(p=u.clone().snapToGrid(m),f=[u]),d=e.filter(d,c.isPointAccessible,c),f=e.filter(f,c.isPointAccessible,c),d.length>0&&f.length>0){var v=new i,y={},I={};e.each(d,function(t){var e=t.toString();v.add(e,l(t,f)),I[e]=0});for(var b,C,w=h.directions,A=w.length,x=h.maximumLoops,N=e.invoke(f,"toString");!v.isEmpty()&&x>0;){var M=v.pop(),k=t.point(M),T=I[M],j=y[M]?o(y[M],k,A):null!=h.previousDirAngle?h.previousDirAngle:o(g,k,A);if(N.indexOf(M)>=0&&(C=s(j,o(k,p,A)),k.equals(p)||180>C))return h.previousDirAngle=j,r(y,k);for(var D=0;A>D;D++)if(b=w[D],C=s(j,b.angle),!(C>h.maxAllowedDirectionChange)){var E=k.clone().offset(b.offsetX,b.offsetY),B=E.toString();if(!v.isClose(B)&&c.isPointAccessible(E)){var z=T+b.cost+h.penalties[C];(!v.isOpen(B)||z<I[B])&&(y[B]=k,I[B]=z,v.add(B,z+l(E,f)))}}x--}}return h.fallbackRoute(g,p,h)}function c(n){n.directions=e.result(n,"directions"),n.penalties=e.result(n,"penalties"),n.paddingBox=e.result(n,"paddingBox"),e.each(n.directions,function(e){var n=new t.point(0,0),i=new t.point(e.offsetX,e.offsetY),r=t.normalizeAngle(n.theta(i));e.angle=r})}function h(i,r){c(r),this.options.perpendicular=!!r.perpendicular;for(var a=t.rect(this.sourceBBox).moveAndExpand(r.paddingBox),o=t.rect(this.targetBBox).moveAndExpand(r.paddingBox),s=new n(r).build(this.paper.model,this.model),l=e.map(i,t.point),h=[],d=a.center().snapToGrid(r.step),f=0,g=l.length;g>=f;f++){var p=null,m=v||a,v=l[f];if(!v){v=o;var y=!this.model.get("source").id||!this.model.get("target").id;if(y&&e.isFunction(r.draggingRoute)){var I=m instanceof t.rect?m.center():m;p=r.draggingRoute(I,v.origin(),r)}}p=p||u(m,v,s,r);var b=e.first(p);b&&b.equals(d)&&p.shift(),d=e.last(p)||d,Array.prototype.push.apply(h,p)}return h}var d={step:10,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],maximumLoops:2e3,startDirections:["left","right","top","bottom"],endDirections:["left","right","top","bottom"],directionMap:{right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0},top:{x:0,y:-1}},maxAllowedDirectionChange:90,paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},directions:function(){var t=this.step;return[{offsetX:t,offsetY:0,cost:t},{offsetX:0,offsetY:t,cost:t},{offsetX:-t,offsetY:0,cost:t},{offsetX:0,offsetY:-t,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},fallbackRoute:function(e,n,i){var r=(i.previousDirAngle||0)%180===0?t.point(e.x,n.y):t.point(n.x,e.y);return[r,n]},draggingRoute:null};return n.prototype.build=function(t,n){var i=this.options,r=e.chain(i.excludeEnds).map(n.get,n).pluck("id").map(t.getCell,t).value(),a=[],o=t.getCell(n.get("source").id);o&&(a=e.union(a,e.map(o.getAncestors(),"id")));var s=t.getCell(n.get("target").id);s&&(a=e.union(a,e.map(s.getAncestors(),"id")));var l=this.mapGridSize;return e.chain(t.getElements()).difference(r).reject(function(t){return e.contains(i.excludeTypes,t.get("type"))||e.contains(a,t.id)}).invoke("getBBox").invoke("moveAndExpand",i.paddingBox).foldl(function(t,e){for(var n=e.origin().snapToGrid(l),i=e.corner().snapToGrid(l),r=n.x;r<=i.x;r+=l)for(var a=n.y;a<=i.y;a+=l){var o=r+"@"+a;t[o]=t[o]||[],t[o].push(e)}return t},this.map).value(),this},n.prototype.isPointAccessible=function(t){var n=t.clone().snapToGrid(this.mapGridSize).toString();return e.every(this.map[n],function(e){return!e.containsPoint(t)})},i.prototype.add=function(t,n){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=n;var i=e.sortedIndex(this.items,t,function(t){return this.values[t]},this);this.items.splice(i,0,t)},i.prototype.remove=function(t){this.hash[t]=this.CLOSE},i.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},i.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},i.prototype.isEmpty=function(){return 0===this.items.length},i.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t},function(t,n,i){return h.call(i,t,e.extend({},d,n))}}(o,n),s.routers.metro=function(){if(!n.isFunction(s.routers.manhattan))throw"Metro requires the manhattan router.";var t={diagonalCost:null,directions:function(){var t=this.step,e=this.diagonalCost||Math.ceil(Math.sqrt(t*t<<1));return[{offsetX:t,offsetY:0,cost:t},{offsetX:t,offsetY:t,cost:e},{offsetX:0,offsetY:t,cost:t},{offsetX:-t,offsetY:t,cost:e},{offsetX:-t,offsetY:0,cost:t},{offsetX:-t,offsetY:-t,cost:e},{offsetX:0,offsetY:-t,cost:t},{offsetX:t,offsetY:-t,cost:e}]},maxAllowedDirectionChange:45,fallbackRoute:function(t,e,n){var i=t.theta(e),r={x:e.x,y:t.y},a={x:t.x,y:e.y};if(i%180>90){var s=r;r=a,a=s}var l=45>i%90?r:a,u=o.line(t,l),c=90*Math.ceil(i/90),h=o.point.fromPolar(u.squaredLength(),o.toRad(c+135),l),d=o.line(e,h),f=u.intersection(d);return f?[f.round(),e]:[e]}};return function(e,i,r){return s.routers.manhattan(e,n.extend({},t,i),r)}}(),s.routers.oneSide=function(t,e,n){var i,r,a,o=e.side||"bottom",s=e.padding||40,l=n.sourceBBox,u=n.targetBBox,c=l.center(),h=u.center();switch(o){case"bottom":a=1,i="y",r="height";break;case"top":a=-1,i="y",r="height";break;case"left":a=-1,i="x",r="width";break;case"right":a=1,i="x",r="width";break;default:throw new Error("Router: invalid side")}return c[i]+=a*(l[r]/2+s),h[i]+=a*(u[r]/2+s),a*(c[i]-h[i])>0?h[i]=c[i]:c[i]=h[i],[c].concat(t,h)},s.connectors.normal=function(t,e,i){var r=["M",t.x,t.y];return n.each(i,function(t){r.push(t.x,t.y)}),r.push(e.x,e.y),r.join(" ")},s.connectors.rounded=function(t,e,i,r){r=r||{};var a,s,l,u,c,h,d=r.radius||10,f=["M",t.x,t.y];return n.each(i,function(n,r){c=i[r-1]||t,h=i[r+1]||e,l=u||o.point(n).distance(c)/2,u=o.point(n).distance(h)/2,a=o.point(n).move(c,-Math.min(d,l)).round(),s=o.point(n).move(h,-Math.min(d,u)).round(),f.push(a.x,a.y,"S",n.x,n.y,s.x,s.y,"L")}),f.push(e.x,e.y),f.join(" ")},s.connectors.smooth=function(t,e,n){var i;if(n.length)i=o.bezier.curveThroughPoints([t].concat(n).concat([e]));else{var r=t.x<e.x?e.x-(e.x-t.x)/2:t.x-(t.x-e.x)/2;i=["M",t.x,t.y,"C",r,t.y,r,e.y,e.x,e.y]}return i.join(" ")},s.connectors.jumpover=function(t,e){function n(t,n,i){var r=[].concat(t,i,n);return r.reduce(function(t,n,i){var a=r[i+1];return null!=a&&(t[i]=e.line(n,a)),t},[])}function i(t){var e=t.paper._jumpOverUpdateList;null==e&&(e=t.paper._jumpOverUpdateList=[],t.paper.on("cell:pointerup",r),t.paper.model.on("reset",function(){e=[]})),e.indexOf(t)<0&&(e.push(t),t.listenToOnce(t.model,"change:connector remove",function(){e.splice(e.indexOf(t),1)}))}function r(){for(var t=this._jumpOverUpdateList,e=0;e<t.length;e++)t[e].update()}function a(e,n){return t(n).map(function(t){return e.intersection(t)}).compact().value()}function o(t,n){return e.line(t,n).squaredLength()}function s(t,n,i){return n.reduce(function(r,a,o){if(a.skip===!0)return r;var s=r.pop()||t,l=e.point(a).move(s.start,-i),u=e.point(a).move(s.start,+i),c=n[o+1];if(null!=c){var d=u.distance(c);i>=d&&(u=c.move(s.start,d),c.skip=!0)}else{var f=l.distance(s.end);if(2*i+h>f)return r.push(s),r}var g=u.distance(s.start);if(2*i+h>g)return r.push(s),r;var p=e.line(l,u);return p.isJump=!0,r.push(e.line(s.start,l),p,e.line(u,s.end)),r},[])}function l(n,i,r){var a=["M",n[0].start.x,n[0].start.y],o=t(n).map(function(t){if(t.isJump){var n;if("arc"===r){n=t.start.difference(t.end);var a=Number(n.x<0&&n.y<0);return["A",i,i,0,0,a,t.end.x,t.end.y]}if("gap"===r)return["M",t.end.x,t.end.y];if("cubic"===r){n=t.start.difference(t.end);var o=t.start.theta(t.end),s=.6*i,l=1.35*i;n.x<0&&n.y<0&&(l*=-1);var u=e.point(t.start.x+s,t.start.y+l).rotate(t.start,o),c=e.point(t.end.x-s,t.end.y+l).rotate(t.end,o);return["C",u.x,u.y,c.x,c.y,t.end.x,t.end.y]}}return["L",t.end.x,t.end.y]}).flatten().value();return[].concat(a,o).join(" ")}var u=5,c=["arc","gap","cubic"],h=1,d=["smooth"];return function(e,r,h,f){i(this);var g=f.size||u,p=f.jump&&(""+f.jump).toLowerCase(),m=f.ignoreConnectors||d;-1===c.indexOf(p)&&(p=c[0]);var v=this.paper,y=v.model,I=y.getLinks();if(1===I.length)return l(n(e,r,h),g,p);var b=this.model,C=I.indexOf(b),w=v.options.defaultConnector||{},A=I.filter(function(e,n){var i=e.get("connector")||w;return t.contains(m,i.name)?!1:n>C?"jumpover"!==i.name:!0}),x=A.map(function(t){return v.findViewByModel(t)}),N=n(e,r,h),M=x.map(function(t){return null==t?[]:t===this?N:n(t.sourcePoint,t.targetPoint,t.route)},this),k=N.reduce(function(e,n){var i=t(A).map(function(t,e){return t===b?null:a(n,M[e])}).flatten().compact().sortBy(t.partial(o,n.start)).value();return i.length>0?e.push.apply(e,s(n,i,g)):e.push(n),e},[]);return l(k,g,p)}}(n,o),s.shapes.erd={},s.shapes.erd.Entity=s.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>',defaults:s.util.deepSupplement({type:"erd.Entity",size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,ref:".outer","ref-x":.5,"ref-y":.5,"x-alignment":"middle","y-alignment":"middle"}}},s.dia.Element.prototype.defaults)}),s.shapes.erd.WeakEntity=s.shapes.erd.Entity.extend({defaults:s.util.deepSupplement({type:"erd.WeakEntity",attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}},s.shapes.erd.Entity.prototype.defaults)}),s.shapes.erd.Relationship=s.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>',defaults:s.util.deepSupplement({type:"erd.Relationship",size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,ref:".","ref-x":.5,"ref-y":.5,"x-alignment":"middle","y-alignment":"middle"}}},s.dia.Element.prototype.defaults)}),s.shapes.erd.IdentifyingRelationship=s.shapes.erd.Relationship.extend({defaults:s.util.deepSupplement({type:"erd.IdentifyingRelationship",attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}},s.shapes.erd.Relationship.prototype.defaults)}),s.shapes.erd.Attribute=s.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>',defaults:s.util.deepSupplement({type:"erd.Attribute",size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,ref:".","ref-x":.5,"ref-y":.5,"x-alignment":"middle","y-alignment":"middle"}}},s.dia.Element.prototype.defaults)}),s.shapes.erd.Multivalued=s.shapes.erd.Attribute.extend({defaults:s.util.deepSupplement({type:"erd.Multivalued",attrs:{".inner":{display:"block"},text:{text:"multivalued"}}},s.shapes.erd.Attribute.prototype.defaults)}),s.shapes.erd.Derived=s.shapes.erd.Attribute.extend({defaults:s.util.deepSupplement({type:"erd.Derived",attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}},s.shapes.erd.Attribute.prototype.defaults)}),s.shapes.erd.Key=s.shapes.erd.Attribute.extend({defaults:s.util.deepSupplement({type:"erd.Key",attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}},s.shapes.erd.Attribute.prototype.defaults)}),s.shapes.erd.Normal=s.shapes.erd.Attribute.extend({defaults:s.util.deepSupplement({type:"erd.Normal",attrs:{text:{text:"Normal"}}},s.shapes.erd.Attribute.prototype.defaults)}),s.shapes.erd.ISA=s.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>',defaults:s.util.deepSupplement({type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,ref:"polygon","ref-x":.5,"ref-y":.3,"x-alignment":"middle","y-alignment":"middle"}}},s.dia.Element.prototype.defaults)}),s.shapes.erd.Line=s.dia.Link.extend({defaults:{type:"erd.Line"},cardinality:function(t){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:t}}}])}}),s.shapes.fsa={},s.shapes.fsa.State=s.shapes.basic.Circle.extend({defaults:s.util.deepSupplement({type:"fsa.State",attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}},s.shapes.basic.Circle.prototype.defaults)}),s.shapes.fsa.StartState=s.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>',defaults:s.util.deepSupplement({type:"fsa.StartState",size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},s.dia.Element.prototype.defaults)}),s.shapes.fsa.EndState=s.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>',defaults:s.util.deepSupplement({type:"fsa.EndState",size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},s.dia.Element.prototype.defaults)}),s.shapes.fsa.Arrow=s.dia.Link.extend({defaults:s.util.deepSupplement({type:"fsa.Arrow",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0},s.dia.Link.prototype.defaults)}),s.shapes.org={},s.shapes.org.Member=s.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>',defaults:s.util.deepSupplement({type:"org.Member",size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},s.dia.Element.prototype.defaults)}),s.shapes.org.Arrow=s.dia.Link.extend({defaults:{type:"org.Arrow",source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1}}),s.shapes.chess={},s.shapes.chess.KingWhite=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.KingWhite",size:{width:42,height:38}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.KingBlack=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.KingBlack",size:{width:42,height:38}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.QueenWhite=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.QueenWhite",size:{width:42,height:38}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.QueenBlack=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.QueenBlack",size:{width:42,height:38}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.RookWhite=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.RookWhite",size:{width:32,height:34}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.RookBlack=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.RookBlack",size:{width:32,height:34}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.BishopWhite=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.BishopWhite",size:{width:38,height:38}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.BishopBlack=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.BishopBlack",size:{width:38,height:38}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.KnightWhite=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.KnightWhite",size:{width:38,height:37}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.KnightBlack=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>',defaults:s.util.deepSupplement({type:"chess.KnightBlack",size:{width:38,height:37}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.PawnWhite=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>',defaults:s.util.deepSupplement({type:"chess.PawnWhite",size:{width:28,height:33}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.chess.PawnBlack=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>',
defaults:s.util.deepSupplement({type:"chess.PawnBlack",size:{width:28,height:33}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.pn={},s.shapes.pn.Place=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>',defaults:s.util.deepSupplement({type:"pn.Place",size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.pn.PlaceView=s.dia.ElementView.extend({initialize:function(){s.dia.ElementView.prototype.initialize.apply(this,arguments),this.model.on("change:tokens",function(){this.renderTokens(),this.update()},this)},render:function(){s.dia.ElementView.prototype.render.apply(this,arguments),this.renderTokens(),this.update()},renderTokens:function(){var t=this.$(".tokens").empty();t[0].className.baseVal="tokens";var e=this.model.get("tokens");if(e)switch(e){case 1:t[0].className.baseVal+=" one",t.append(r("<circle/>").node);break;case 2:t[0].className.baseVal+=" two",t.append(r("<circle/>").node,r("<circle/>").node);break;case 3:t[0].className.baseVal+=" three",t.append(r("<circle/>").node,r("<circle/>").node,r("<circle/>").node);break;default:t[0].className.baseVal+=" alot",t.append(r("<text/>").text(e+"").node)}}}),s.shapes.pn.Transition=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>',defaults:s.util.deepSupplement({type:"pn.Transition",size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.pn.Link=s.dia.Link.extend({defaults:s.util.deepSupplement({type:"pn.Link",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}},s.dia.Link.prototype.defaults)}),s.shapes.devs={},s.shapes.devs.Model=s.shapes.basic.Generic.extend(n.extend({},s.shapes.basic.PortsModelInterface,{markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><text class="label"/><g class="inPorts"/><g class="outPorts"/></g>',portMarkup:'<g class="port port<%= id %>"><circle class="port-body"/><text class="port-label"/></g>',defaults:s.util.deepSupplement({type:"devs.Model",size:{width:1,height:1},inPorts:[],outPorts:[],attrs:{".":{magnet:!1},".body":{width:150,height:250,stroke:"#000000"},".port-body":{r:10,magnet:!0,stroke:"#000000"},text:{"pointer-events":"none"},".label":{text:"Model","ref-x":.5,"ref-y":10,ref:".body","text-anchor":"middle",fill:"#000000"},".inPorts .port-label":{x:-15,dy:4,"text-anchor":"end",fill:"#000000"},".outPorts .port-label":{x:15,dy:4,fill:"#000000"}}},s.shapes.basic.Generic.prototype.defaults),getPortAttrs:function(t,e,i,r,a){var o={},s="port"+e,l=r+">."+s,u=l+">.port-label",c=l+">.port-body";return o[u]={text:t},o[c]={port:{id:t||n.uniqueId(a),type:a}},o[l]={ref:".body","ref-y":(e+.5)*(1/i)},".outPorts"===r&&(o[l]["ref-dx"]=0),o}})),s.shapes.devs.Atomic=s.shapes.devs.Model.extend({defaults:s.util.deepSupplement({type:"devs.Atomic",size:{width:80,height:80},attrs:{".body":{fill:"salmon"},".label":{text:"Atomic"},".inPorts .port-body":{fill:"PaleGreen"},".outPorts .port-body":{fill:"Tomato"}}},s.shapes.devs.Model.prototype.defaults)}),s.shapes.devs.Coupled=s.shapes.devs.Model.extend({defaults:s.util.deepSupplement({type:"devs.Coupled",size:{width:200,height:300},attrs:{".body":{fill:"seaGreen"},".label":{text:"Coupled"},".inPorts .port-body":{fill:"PaleGreen"},".outPorts .port-body":{fill:"Tomato"}}},s.shapes.devs.Model.prototype.defaults)}),s.shapes.devs.Link=s.dia.Link.extend({defaults:{type:"devs.Link",attrs:{".connection":{"stroke-width":2}}}}),s.shapes.devs.ModelView=s.dia.ElementView.extend(s.shapes.basic.PortsViewInterface),s.shapes.devs.AtomicView=s.shapes.devs.ModelView,s.shapes.devs.CoupledView=s.shapes.devs.ModelView,s.shapes.uml={},s.shapes.uml.Class=s.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),defaults:s.util.deepSupplement({type:"uml.Class",attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},s.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on("change:name change:attributes change:methods",function(){this.updateRectangles(),this.trigger("uml-update")},this),this.updateRectangles(),s.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var t=this.get("attrs"),e=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],i=0;n.each(e,function(e){var r=n.isArray(e.text)?e.text:[e.text],a=20*r.length+20;t[".uml-class-"+e.type+"-text"].text=r.join("\n"),t[".uml-class-"+e.type+"-rect"].height=a,t[".uml-class-"+e.type+"-rect"].transform="translate(0,"+i+")",i+=a})}}),s.shapes.uml.ClassView=s.dia.ElementView.extend({initialize:function(){s.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",function(){this.update(),this.resize()})}}),s.shapes.uml.Abstract=s.shapes.uml.Class.extend({defaults:s.util.deepSupplement({type:"uml.Abstract",attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},s.shapes.uml.Class.prototype.defaults),getClassName:function(){return["<<Abstract>>",this.get("name")]}}),s.shapes.uml.AbstractView=s.shapes.uml.ClassView,s.shapes.uml.Interface=s.shapes.uml.Class.extend({defaults:s.util.deepSupplement({type:"uml.Interface",attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},s.shapes.uml.Class.prototype.defaults),getClassName:function(){return["<<Interface>>",this.get("name")]}}),s.shapes.uml.InterfaceView=s.shapes.uml.ClassView,s.shapes.uml.Generalization=s.dia.Link.extend({defaults:{type:"uml.Generalization",attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}}),s.shapes.uml.Implementation=s.dia.Link.extend({defaults:{type:"uml.Implementation",attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}}),s.shapes.uml.Aggregation=s.dia.Link.extend({defaults:{type:"uml.Aggregation",attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}}),s.shapes.uml.Composition=s.dia.Link.extend({defaults:{type:"uml.Composition",attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}}),s.shapes.uml.Association=s.dia.Link.extend({defaults:{type:"uml.Association"}}),s.shapes.uml.State=s.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),defaults:s.util.deepSupplement({type:"uml.State",attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},s.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),s.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join("\n"))},updatePath:function(){var t="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",t,{silent:!0})}}),s.shapes.uml.StartState=s.shapes.basic.Circle.extend({defaults:s.util.deepSupplement({type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}},s.shapes.basic.Circle.prototype.defaults)}),s.shapes.uml.EndState=s.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>',defaults:s.util.deepSupplement({type:"uml.EndState",size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},s.shapes.basic.Generic.prototype.defaults)}),s.shapes.uml.Transition=s.dia.Link.extend({defaults:{type:"uml.Transition",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}}}),s.shapes.logic={},s.shapes.logic.Gate=s.shapes.basic.Generic.extend({defaults:s.util.deepSupplement({type:"logic.Gate",size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},s.shapes.basic.Generic.prototype.defaults),operation:function(){return!0}}),s.shapes.logic.IO=s.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>',defaults:s.util.deepSupplement({type:"logic.IO",size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},s.shapes.logic.Gate.prototype.defaults)}),s.shapes.logic.Input=s.shapes.logic.IO.extend({defaults:s.util.deepSupplement({type:"logic.Input",attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,"class":"output",port:"out"},text:{text:"input"}}},s.shapes.logic.IO.prototype.defaults)}),s.shapes.logic.Output=s.shapes.logic.IO.extend({defaults:s.util.deepSupplement({type:"logic.Output",attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive","class":"input",port:"in"},text:{text:"output"}}},s.shapes.logic.IO.prototype.defaults)}),s.shapes.logic.Gate11=s.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>',defaults:s.util.deepSupplement({type:"logic.Gate11",attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},s.shapes.logic.Gate.prototype.defaults)}),s.shapes.logic.Gate21=s.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>',defaults:s.util.deepSupplement({type:"logic.Gate21",attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},s.shapes.logic.Gate.prototype.defaults)}),s.shapes.logic.Repeater=s.shapes.logic.Gate11.extend({defaults:s.util.deepSupplement({type:"logic.Repeater",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="}}},s.shapes.logic.Gate11.prototype.defaults),operation:function(t){return t}}),s.shapes.logic.Not=s.shapes.logic.Gate11.extend({defaults:s.util.deepSupplement({type:"logic.Not",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},s.shapes.logic.Gate11.prototype.defaults),operation:function(t){return!t}}),s.shapes.logic.Or=s.shapes.logic.Gate21.extend({defaults:s.util.deepSupplement({type:"logic.Or",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="
}}},s.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return t||e}}),s.shapes.logic.And=s.shapes.logic.Gate21.extend({defaults:s.util.deepSupplement({type:"logic.And",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},s.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return t&&e}}),s.shapes.logic.Nor=s.shapes.logic.Gate21.extend({defaults:s.util.deepSupplement({type:"logic.Nor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},s.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return!(t||e)}}),s.shapes.logic.Nand=s.shapes.logic.Gate21.extend({defaults:s.util.deepSupplement({type:"logic.Nand",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},s.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return!(t&&e)}}),s.shapes.logic.Xor=s.shapes.logic.Gate21.extend({defaults:s.util.deepSupplement({type:"logic.Xor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"
}}},s.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return(!t||e)&&(t||!e)}}),s.shapes.logic.Xnor=s.shapes.logic.Gate21.extend({defaults:s.util.deepSupplement({type:"logic.Xnor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},s.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return(!t||!e)&&(t||e)}}),s.shapes.logic.Wire=s.dia.Link.extend({arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join(""),defaults:s.util.deepSupplement({type:"logic.Wire",attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},s.dia.Link.prototype.defaults)}),"object"==typeof exports)var l=require("graphlib"),u=require("dagre");return l=l||"undefined"!=typeof window&&window.graphlib,u=u||"undefined"!=typeof window&&window.dagre,s.dia.Graph.prototype.toGraphLib=function(t){t=t||{};var e=n.pick(t,"directed","compound","multigraph"),i=new l.Graph(e),r=t.setNodeLabel||n.noop,a=t.setEdgeLabel||n.noop,o=t.setEdgeName||n.noop;return this.get("cells").each(function(t){if(t.isLink()){var e=t.get("source"),n=t.get("target");if(!e.id||!n.id)return;i.setEdge(e.id,n.id,a(t),o(t))}else i.setNode(t.id,r(t)),i.isCompound()&&t.has("parent")&&i.setParent(t.id,t.get("parent"))}),i},s.dia.Graph.prototype.fromGraphLib=function(t,e){e=e||{};var i=e.importNode||n.noop,r=e.importEdge||n.noop;t.nodes().forEach(function(n){i.call(this,n,t,this,e)},this),t.edges().forEach(function(n){r.call(this,n,t,this,e)},this)},s.layout.DirectedGraph={layout:function(t,e){e=n.defaults(e||{},{resizeClusters:!0,clusterPadding:10});var i=t.toGraphLib({directed:!0,multigraph:!0,compound:!0,setNodeLabel:function(t){return{width:t.get("size").width,height:t.get("size").height,rank:t.get("rank")}},setEdgeLabel:function(t){return{minLen:t.get("minLen")||1}},setEdgeName:function(t){return t.id}}),r={};return e.rankDir&&(r.rankdir=e.rankDir),e.nodeSep&&(r.nodesep=e.nodeSep),e.edgeSep&&(r.edgesep=e.edgeSep),e.rankSep&&(r.ranksep=e.rankSep),e.marginX&&(r.marginx=e.marginX),e.marginY&&(r.marginy=e.marginY),i.setGraph(r),u.layout(i,{debugTiming:!!e.debugTiming}),t.fromGraphLib(i,{importNode:function(t,n){var i=this.getCell(t),r=n.node(t);e.setPosition?e.setPosition(i,r):i.set("position",{x:r.x-r.width/2,y:r.y-r.height/2})},importEdge:function(t,n){var i=this.getCell(t.name),r=n.edge(t);e.setLinkVertices&&(e.setVertices?e.setVertices(i,r.points):i.set("vertices",r.points))}}),e.resizeClusters&&n.chain(i.nodes()).filter(function(t){return i.children(t).length>0}).map(t.getCell,t).sortBy(function(t){return-t.getAncestors().length}).invoke("fitEmbeds",{padding:e.clusterPadding}).value(),i.graph()}},s.g=o,s.V=s.Vectorizer=r,s}),"object"==typeof exports)var graphlib=require("graphlib"),dagre=require("dagre");graphlib=graphlib||"undefined"!=typeof window&&window.graphlib,dagre=dagre||"undefined"!=typeof window&&window.dagre,joint.dia.Graph.prototype.toGraphLib=function(t){t=t||{};var e=_.pick(t,"directed","compound","multigraph"),n=new graphlib.Graph(e),i=t.setNodeLabel||_.noop,r=t.setEdgeLabel||_.noop,a=t.setEdgeName||_.noop;return this.get("cells").each(function(t){if(t.isLink()){var e=t.get("source"),o=t.get("target");if(!e.id||!o.id)return;n.setEdge(e.id,o.id,r(t),a(t))}else n.setNode(t.id,i(t)),n.isCompound()&&t.has("parent")&&n.setParent(t.id,t.get("parent"))}),n},joint.dia.Graph.prototype.fromGraphLib=function(t,e){e=e||{};var n=e.importNode||_.noop,i=e.importEdge||_.noop;t.nodes().forEach(function(i){n.call(this,i,t,this,e)},this),t.edges().forEach(function(n){i.call(this,n,t,this,e)},this)},joint.layout.DirectedGraph={layout:function(t,e){e=_.defaults(e||{},{resizeClusters:!0,clusterPadding:10});var n=t.toGraphLib({directed:!0,multigraph:!0,compound:!0,setNodeLabel:function(t){return{width:t.get("size").width,height:t.get("size").height,rank:t.get("rank")}},setEdgeLabel:function(t){return{minLen:t.get("minLen")||1}},setEdgeName:function(t){return t.id}}),i={};return e.rankDir&&(i.rankdir=e.rankDir),e.nodeSep&&(i.nodesep=e.nodeSep),e.edgeSep&&(i.edgesep=e.edgeSep),e.rankSep&&(i.ranksep=e.rankSep),e.marginX&&(i.marginx=e.marginX),e.marginY&&(i.marginy=e.marginY),n.setGraph(i),dagre.layout(n,{debugTiming:!!e.debugTiming}),t.fromGraphLib(n,{importNode:function(t,n){var i=this.getCell(t),r=n.node(t);e.setPosition?e.setPosition(i,r):i.set("position",{x:r.x-r.width/2,y:r.y-r.height/2})},importEdge:function(t,n){var i=this.getCell(t.name),r=n.edge(t);e.setLinkVertices&&(e.setVertices?e.setVertices(i,r.points):i.set("vertices",r.points))}}),e.resizeClusters&&_.chain(n.nodes()).filter(function(t){return n.children(t).length>0}).map(t.getCell,t).sortBy(function(t){return-t.getAncestors().length}).invoke("fitEmbeds",{padding:e.clusterPadding}).value(),n.graph()}};var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];!function(){function t(){var t={};return t.FRAMERATE=30,t.MAX_VIRTUAL_PIXELS=3e4,t.init=function(e){var n=0;t.UniqueId=function(){return n++,"canvg"+n},t.Definitions={},t.Styles={},t.Animations=[],t.Images=[],t.ctx=e,t.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},t.init(),t.ImagesLoaded=function(){for(var e=0;e<t.Images.length;e++)if(!t.Images[e].loaded)return!1;return!0},t.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},t.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},t.ajax=function(t){var e;return e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e?(e.open("GET",t,!1),e.send(null),e.responseText):null},t.parseXml=function(t){if(window.DOMParser){var e=new DOMParser;return e.parseFromString(t,"text/xml")}t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var n=new ActiveXObject("Microsoft.XMLDOM");return n.async="false",n.loadXML(t),n},t.Property=function(t,e){this.name=t,this.value=e},t.Property.prototype.getValue=function(){return this.value},t.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},t.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},t.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},t.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},t.Property.prototype.addOpacity=function(e){var n=this.value;if(null!=e&&""!=e&&"string"==typeof this.value){var i=new RGBColor(this.value);i.ok&&(n="rgba("+i.r+", "+i.g+", "+i.b+", "+e+")")}return new t.Property(this.name,n)},t.Property.prototype.getDefinition=function(){var e=this.value.match(/#([^\)'"]+)/);return e&&(e=e[1]),e||(e=this.value),t.Definitions[e]},t.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},t.Property.prototype.getFillStyleDefinition=function(e,n){var i=this.getDefinition();if(null!=i&&i.createGradient)return i.createGradient(t.ctx,e,n);if(null!=i&&i.createPattern){if(i.getHrefAttribute().hasValue()){var r=i.attribute("patternTransform");i=i.getHrefAttribute().getDefinition(),r.hasValue()&&(i.attribute("patternTransform",!0).value=r.value)}return i.createPattern(t.ctx,e)}return null},t.Property.prototype.getDPI=function(t){return 96},t.Property.prototype.getEM=function(e){var n=12,i=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);return i.hasValue()&&(n=i.toPixels(e)),n},t.Property.prototype.getUnits=function(){var t=this.value+"";return t.replace(/[0-9\.\-]/g,"")},t.Property.prototype.toPixels=function(e,n){if(!this.hasValue())return 0;var i=this.value+"";if(i.match(/em$/))return this.numValue()*this.getEM(e);if(i.match(/ex$/))return this.numValue()*this.getEM(e)/2;if(i.match(/px$/))return this.numValue();if(i.match(/pt$/))return this.numValue()*this.getDPI(e)*(1/72);if(i.match(/pc$/))return 15*this.numValue();if(i.match(/cm$/))return this.numValue()*this.getDPI(e)/2.54;if(i.match(/mm$/))return this.numValue()*this.getDPI(e)/25.4;if(i.match(/in$/))return this.numValue()*this.getDPI(e);if(i.match(/%$/))return this.numValue()*t.ViewPort.ComputeSize(e);var r=this.numValue();return n&&1>r?r*t.ViewPort.ComputeSize(e):r},t.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():t.match(/ms$/)?this.numValue():this.numValue()},t.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},t.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(e,n,i,r,a,o){var s=null!=o?this.Parse(o):this.CreateFont("","","","","",t.ctx.font);return{fontFamily:a||s.fontFamily,fontSize:r||s.fontSize,fontStyle:e||s.fontStyle,fontWeight:i||s.fontWeight,fontVariant:n||s.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var e=this;this.Parse=function(n){for(var i={},r=t.trim(t.compressSpaces(n||"")).split(" "),a={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},o="",s=0;s<r.length;s++)a.fontStyle||-1==e.Styles.indexOf(r[s])?a.fontVariant||-1==e.Variants.indexOf(r[s])?a.fontWeight||-1==e.Weights.indexOf(r[s])?a.fontSize?"inherit"!=r[s]&&(o+=r[s]):("inherit"!=r[s]&&(i.fontSize=r[s].split("/")[0]),a.fontStyle=a.fontVariant=a.fontWeight=a.fontSize=!0):("inherit"!=r[s]&&(i.fontWeight=r[s]),a.fontStyle=a.fontVariant=a.fontWeight=!0):("inherit"!=r[s]&&(i.fontVariant=r[s]),a.fontStyle=a.fontVariant=!0):("inherit"!=r[s]&&(i.fontStyle=r[s]),a.fontStyle=!0);return""!=o&&(i.fontFamily=o),i}},t.ToNumberArray=function(e){for(var n=t.trim(t.compressSpaces((e||"").replace(/,/g," "))).split(" "),i=0;i<n.length;i++)n[i]=parseFloat(n[i]);return n},t.Point=function(t,e){this.x=t,this.y=e},t.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},t.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],n=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=n},t.CreatePoint=function(e){var n=t.ToNumberArray(e);return new t.Point(n[0],n[1])},t.CreatePath=function(e){for(var n=t.ToNumberArray(e),i=[],r=0;r<n.length;r+=2)i.push(new t.Point(n[r],n[r+1]));return i},t.BoundingBox=function(t,e,n,r){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,n,i,r,a){var o=t+2/3*(n-t),s=e+2/3*(i-e),l=o+1/3*(r-t),u=s+1/3*(a-e);this.addBezierCurve(t,e,o,l,s,u,r,a)},this.addBezierCurve=function(t,e,n,r,a,o,s,l){var u=[t,e],c=[n,r],h=[a,o],d=[s,l];for(this.addPoint(u[0],u[1]),this.addPoint(d[0],d[1]),i=0;i<=1;i++){var f=function(t){return Math.pow(1-t,3)*u[i]+3*Math.pow(1-t,2)*t*c[i]+3*(1-t)*Math.pow(t,2)*h[i]+Math.pow(t,3)*d[i]},g=6*u[i]-12*c[i]+6*h[i],p=-3*u[i]+9*c[i]-9*h[i]+3*d[i],m=3*c[i]-3*u[i];if(0!=p){var v=Math.pow(g,2)-4*m*p;if(!(0>v)){var y=(-g+Math.sqrt(v))/(2*p);y>0&&1>y&&(0==i&&this.addX(f(y)),1==i&&this.addY(f(y)));var I=(-g-Math.sqrt(v))/(2*p);I>0&&1>I&&(0==i&&this.addX(f(I)),1==i&&this.addY(f(I)))}}else{if(0==g)continue;var b=-m/g;b>0&&1>b&&(0==i&&this.addX(f(b)),1==i&&this.addY(f(b)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,r)},t.Transform=function(e){var n=this;this.Type={},this.Type.translate=function(e){this.p=t.CreatePoint(e),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(e){var n=t.ToNumberArray(e);this.angle=new t.Property("angle",n[0]),this.cx=n[1]||0,this.cy=n[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(e){this.p=t.CreatePoint(e),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(e){this.m=t.ToNumberArray(e),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(e){this.base=n.Type.matrix,this.base(e),this.angle=new t.Property("angle",e)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var i=t.trim(t.compressSpaces(e)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),r=0;r<i.length;r++){var a=t.trim(i[r].split("(")[0]),o=i[r].split("(")[1].replace(")",""),s=new this.Type[a](o);s.type=a,this.transforms.push(s)}},t.AspectRatio=function(e,n,i,r,a,o,s,l,u,c){n=t.compressSpaces(n),n=n.replace(/^defer\s/,"");var h=n.split(" ")[0]||"xMidYMid",d=n.split(" ")[1]||"meet",f=i/r,g=a/o,p=Math.min(f,g),m=Math.max(f,g);"meet"==d&&(r*=p,o*=p),"slice"==d&&(r*=m,o*=m),u=new t.Property("refX",u),c=new t.Property("refY",c),u.hasValue()&&c.hasValue()?e.translate(-p*u.toPixels("x"),-p*c.toPixels("y")):(h.match(/^xMid/)&&("meet"==d&&p==g||"slice"==d&&m==g)&&e.translate(i/2-r/2,0),h.match(/YMid$/)&&("meet"==d&&p==f||"slice"==d&&m==f)&&e.translate(0,a/2-o/2),h.match(/^xMax/)&&("meet"==d&&p==g||"slice"==d&&m==g)&&e.translate(i-r,0),h.match(/YMax$/)&&("meet"==d&&p==f||"slice"==d&&m==f)&&e.translate(0,a-o)),"none"==h?e.scale(f,g):"meet"==d?e.scale(p,p):"slice"==d&&e.scale(m,m),e.translate(null==s?0:-s,null==l?0:-l)},t.Element={},t.EmptyProperty=new t.Property("EMPTY",""),t.Element.ElementBase=function(e){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(e,n){var i=this.attributes[e];return null!=i?i:(1==n&&(i=new t.Property(e,""),this.attributes[e]=i),i||t.EmptyProperty)},this.getHrefAttribute=function(){for(var e in this.attributes)if(e.match(/:href$/))return this.attributes[e];return t.EmptyProperty},this.style=function(e,n){var i=this.styles[e];if(null!=i)return i;var r=this.attribute(e);if(null!=r&&r.hasValue())return this.styles[e]=r,r;var a=this.parent;if(null!=a){var o=a.style(e);if(null!=o&&o.hasValue())return o}return 1==n&&(i=new t.Property(e,""),this.styles[e]=i),i||t.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value){if(t.save(),this.attribute("mask").hasValue()){var e=this.attribute("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(e,n){var i=e;n&&(i=t.CreateElement(e)),i.parent=this,this.children.push(i)},null!=e&&1==e.nodeType){for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];if(1==i.nodeType&&this.addChild(i,!0),this.captureTextNodes&&3==i.nodeType){var r=i.nodeValue||i.text||"";""!=t.trim(t.compressSpaces(r))&&this.addChild(new t.Element.tspan(i),!1)}}for(var n=0;n<e.attributes.length;n++){var a=e.attributes[n];this.attributes[a.nodeName]=new t.Property(a.nodeName,a.nodeValue)}var o=t.Styles[e.nodeName];if(null!=o)for(var s in o)this.styles[s]=o[s];if(this.attribute("class").hasValue())for(var l=t.compressSpaces(this.attribute("class").value).split(" "),u=0;u<l.length;u++){if(o=t.Styles["."+l[u]],null!=o)for(var s in o)this.styles[s]=o[s];if(o=t.Styles[e.nodeName+"."+l[u]],null!=o)for(var s in o)this.styles[s]=o[s]}if(this.attribute("id").hasValue()){var o=t.Styles["#"+this.attribute("id").value];if(null!=o)for(var s in o)this.styles[s]=o[s]}if(this.attribute("style").hasValue())for(var o=this.attribute("style").value.split(";"),n=0;n<o.length;n++)if(""!=t.trim(o[n])){var c=o[n].split(":"),s=t.trim(c[0]),h=t.trim(c[1]);this.styles[s]=new t.Property(s,h)}this.attribute("id").hasValue()&&null==t.Definitions[this.attribute("id").value]&&(t.Definitions[this.attribute("id").value]=this)}},t.Element.RenderedElementBase=function(e){this.base=t.Element.ElementBase,this.base(e),this.setContext=function(e){if(this.style("fill").isUrlDefinition()){var n=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=n&&(e.fillStyle=n)}else if(this.style("fill").hasValue()){var i=this.style("fill");"currentColor"==i.value&&(i.value=this.style("color").value),e.fillStyle="none"==i.value?"rgba(0,0,0,0)":i.value}if(this.style("fill-opacity").hasValue()){var i=new t.Property("fill",e.fillStyle);i=i.addOpacity(this.style("fill-opacity").value),e.fillStyle=i.value}if(this.style("stroke").isUrlDefinition()){var n=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=n&&(e.strokeStyle=n)}else if(this.style("stroke").hasValue()){var r=this.style("stroke");"currentColor"==r.value&&(r.value=this.style("color").value),e.strokeStyle="none"==r.value?"rgba(0,0,0,0)":r.value}if(this.style("stroke-opacity").hasValue()){var r=new t.Property("stroke",e.strokeStyle);r=r.addOpacity(this.style("stroke-opacity").value),e.strokeStyle=r.value}if(this.style("stroke-width").hasValue()){var a=this.style("stroke-width").toPixels();e.lineWidth=0==a?.001:a}if(this.style("stroke-linecap").hasValue()&&(e.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(e.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(e.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()){var o=t.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof e.setLineDash?e.setLineDash(o):"undefined"!=typeof e.webkitLineDash?e.webkitLineDash=o:"undefined"!=typeof e.mozDash&&(e.mozDash=o);var s=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof e.lineDashOffset?e.lineDashOffset=s:"undefined"!=typeof e.webkitLineDashOffset?e.webkitLineDashOffset=s:"undefined"!=typeof e.mozDashOffset&&(e.mozDashOffset=s)}if("undefined"!=typeof e.font&&(e.font=t.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),
this.attribute("transform").hasValue()){var l=new t.Transform(this.attribute("transform").value);l.apply(e)}if(this.style("clip-path").hasValue()){var u=this.style("clip-path").getDefinition();null!=u&&u.apply(e)}this.style("opacity").hasValue()&&(e.globalAlpha=this.style("opacity").numValue())}},t.Element.RenderedElementBase.prototype=new t.Element.ElementBase,t.Element.PathElementBase=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.path=function(e){return null!=e&&e.beginPath(),new t.BoundingBox},this.renderChildren=function(e){this.path(e),t.Mouse.checkPath(this,e),""!=e.fillStyle&&(this.attribute("fill-rule").hasValue()?e.fill(this.attribute("fill-rule").value):e.fill()),""!=e.strokeStyle&&e.stroke();var n=this.getMarkers();if(null!=n){if(this.style("marker-start").isUrlDefinition()){var i=this.style("marker-start").getDefinition();i.render(e,n[0][0],n[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var i=this.style("marker-mid").getDefinition(),r=1;r<n.length-1;r++)i.render(e,n[r][0],n[r][1]);if(this.style("marker-end").isUrlDefinition()){var i=this.style("marker-end").getDefinition();i.render(e,n[n.length-1][0],n[n.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},t.Element.PathElementBase.prototype=new t.Element.RenderedElementBase,t.Element.svg=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseClearContext=this.clearContext,this.clearContext=function(e){this.baseClearContext(e),t.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,this.baseSetContext(e),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),e.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var n=t.ViewPort.width(),i=t.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){n=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");var r=0,a=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(r=-this.attribute("refX").toPixels("x"),a=-this.attribute("refY").toPixels("y")),e.beginPath(),e.moveTo(r,a),e.lineTo(n,a),e.lineTo(n,i),e.lineTo(r,i),e.closePath(),e.clip()}if(t.ViewPort.SetCurrent(n,i),this.attribute("viewBox").hasValue()){var o=t.ToNumberArray(this.attribute("viewBox").value),s=o[0],l=o[1];n=o[2],i=o[3],t.AspectRatio(e,this.attribute("preserveAspectRatio").value,t.ViewPort.width(),n,t.ViewPort.height(),i,s,l,this.attribute("refX").value,this.attribute("refY").value),t.ViewPort.RemoveCurrent(),t.ViewPort.SetCurrent(o[2],o[3])}}},t.Element.svg.prototype=new t.Element.RenderedElementBase,t.Element.rect=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y"),o=this.attribute("rx").toPixels("x"),s=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(s=o),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(o=s),o=Math.min(o,r/2),s=Math.min(s,a/2),null!=e&&(e.beginPath(),e.moveTo(n+o,i),e.lineTo(n+r-o,i),e.quadraticCurveTo(n+r,i,n+r,i+s),e.lineTo(n+r,i+a-s),e.quadraticCurveTo(n+r,i+a,n+r-o,i+a),e.lineTo(n+o,i+a),e.quadraticCurveTo(n,i+a,n,i+a-s),e.lineTo(n,i+s),e.quadraticCurveTo(n,i,n+o,i),e.closePath()),new t.BoundingBox(n,i,n+r,i+a)}},t.Element.rect.prototype=new t.Element.PathElementBase,t.Element.circle=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var n=this.attribute("cx").toPixels("x"),i=this.attribute("cy").toPixels("y"),r=this.attribute("r").toPixels();return null!=e&&(e.beginPath(),e.arc(n,i,r,0,2*Math.PI,!0),e.closePath()),new t.BoundingBox(n-r,i-r,n+r,i+r)}},t.Element.circle.prototype=new t.Element.PathElementBase,t.Element.ellipse=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var n=4*((Math.sqrt(2)-1)/3),i=this.attribute("rx").toPixels("x"),r=this.attribute("ry").toPixels("y"),a=this.attribute("cx").toPixels("x"),o=this.attribute("cy").toPixels("y");return null!=e&&(e.beginPath(),e.moveTo(a,o-r),e.bezierCurveTo(a+n*i,o-r,a+i,o-n*r,a+i,o),e.bezierCurveTo(a+i,o+n*r,a+n*i,o+r,a,o+r),e.bezierCurveTo(a-n*i,o+r,a-i,o+n*r,a-i,o),e.bezierCurveTo(a-i,o-n*r,a-n*i,o-r,a,o-r),e.closePath()),new t.BoundingBox(a-i,o-r,a+i,o+r)}},t.Element.ellipse.prototype=new t.Element.PathElementBase,t.Element.line=function(e){this.base=t.Element.PathElementBase,this.base(e),this.getPoints=function(){return[new t.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new t.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(e){var n=this.getPoints();return null!=e&&(e.beginPath(),e.moveTo(n[0].x,n[0].y),e.lineTo(n[1].x,n[1].y)),new t.BoundingBox(n[0].x,n[0].y,n[1].x,n[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},t.Element.line.prototype=new t.Element.PathElementBase,t.Element.polyline=function(e){this.base=t.Element.PathElementBase,this.base(e),this.points=t.CreatePath(this.attribute("points").value),this.path=function(e){var n=new t.BoundingBox(this.points[0].x,this.points[0].y);null!=e&&(e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y));for(var i=1;i<this.points.length;i++)n.addPoint(this.points[i].x,this.points[i].y),null!=e&&e.lineTo(this.points[i].x,this.points[i].y);return n},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},t.Element.polyline.prototype=new t.Element.PathElementBase,t.Element.polygon=function(e){this.base=t.Element.polyline,this.base(e),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},t.Element.polygon.prototype=new t.Element.polyline,t.Element.path=function(e){this.base=t.Element.PathElementBase,this.base(e);var n=this.attribute("d").value;n=n.replace(/,/gm," "),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),n=n.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([0-9])([+\-])/gm,"$1 $2"),n=n.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),n=n.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),n=t.compressSpaces(n),n=t.trim(n),this.PathParser=new function(e){this.tokens=e.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new t.Point(0,0),this.control=new t.Point(0,0),this.current=new t.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var e=new t.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(e)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var e=new t.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return e},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,n){null!=n&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(n),this.path=function(e){var n=this.PathParser;n.reset();var i=new t.BoundingBox;for(null!=e&&e.beginPath();!n.isEnd();)switch(n.nextCommand(),n.command){case"M":case"m":var r=n.getAsCurrentPoint();for(n.addMarker(r),i.addPoint(r.x,r.y),null!=e&&e.moveTo(r.x,r.y),n.start=n.current;!n.isCommandOrEnd();){var r=n.getAsCurrentPoint();n.addMarker(r,n.start),i.addPoint(r.x,r.y),null!=e&&e.lineTo(r.x,r.y)}break;case"L":case"l":for(;!n.isCommandOrEnd();){var a=n.current,r=n.getAsCurrentPoint();n.addMarker(r,a),i.addPoint(r.x,r.y),null!=e&&e.lineTo(r.x,r.y)}break;case"H":case"h":for(;!n.isCommandOrEnd();){var o=new t.Point((n.isRelativeCommand()?n.current.x:0)+n.getScalar(),n.current.y);n.addMarker(o,n.current),n.current=o,i.addPoint(n.current.x,n.current.y),null!=e&&e.lineTo(n.current.x,n.current.y)}break;case"V":case"v":for(;!n.isCommandOrEnd();){var o=new t.Point(n.current.x,(n.isRelativeCommand()?n.current.y:0)+n.getScalar());n.addMarker(o,n.current),n.current=o,i.addPoint(n.current.x,n.current.y),null!=e&&e.lineTo(n.current.x,n.current.y)}break;case"C":case"c":for(;!n.isCommandOrEnd();){var s=n.current,l=n.getPoint(),u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,l),i.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,c.x,c.y),null!=e&&e.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y)}break;case"S":case"s":for(;!n.isCommandOrEnd();){var s=n.current,l=n.getReflectedControlPoint(),u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,l),i.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,c.x,c.y),null!=e&&e.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y)}break;case"Q":case"q":for(;!n.isCommandOrEnd();){var s=n.current,u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,u),i.addQuadraticCurve(s.x,s.y,u.x,u.y,c.x,c.y),null!=e&&e.quadraticCurveTo(u.x,u.y,c.x,c.y)}break;case"T":case"t":for(;!n.isCommandOrEnd();){var s=n.current,u=n.getReflectedControlPoint();n.control=u;var c=n.getAsCurrentPoint();n.addMarker(c,u,u),i.addQuadraticCurve(s.x,s.y,u.x,u.y,c.x,c.y),null!=e&&e.quadraticCurveTo(u.x,u.y,c.x,c.y)}break;case"A":case"a":for(;!n.isCommandOrEnd();){var s=n.current,h=n.getScalar(),d=n.getScalar(),f=n.getScalar()*(Math.PI/180),g=n.getScalar(),p=n.getScalar(),c=n.getAsCurrentPoint(),m=new t.Point(Math.cos(f)*(s.x-c.x)/2+Math.sin(f)*(s.y-c.y)/2,-Math.sin(f)*(s.x-c.x)/2+Math.cos(f)*(s.y-c.y)/2),v=Math.pow(m.x,2)/Math.pow(h,2)+Math.pow(m.y,2)/Math.pow(d,2);v>1&&(h*=Math.sqrt(v),d*=Math.sqrt(v));var y=(g==p?-1:1)*Math.sqrt((Math.pow(h,2)*Math.pow(d,2)-Math.pow(h,2)*Math.pow(m.y,2)-Math.pow(d,2)*Math.pow(m.x,2))/(Math.pow(h,2)*Math.pow(m.y,2)+Math.pow(d,2)*Math.pow(m.x,2)));isNaN(y)&&(y=0);var I=new t.Point(y*h*m.y/d,y*-d*m.x/h),b=new t.Point((s.x+c.x)/2+Math.cos(f)*I.x-Math.sin(f)*I.y,(s.y+c.y)/2+Math.sin(f)*I.x+Math.cos(f)*I.y),C=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},w=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(C(t)*C(e))},A=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(w(t,e))},x=A([1,0],[(m.x-I.x)/h,(m.y-I.y)/d]),N=[(m.x-I.x)/h,(m.y-I.y)/d],M=[(-m.x-I.x)/h,(-m.y-I.y)/d],k=A(N,M);w(N,M)<=-1&&(k=Math.PI),w(N,M)>=1&&(k=0);var T=1-p?1:-1,j=x+T*(k/2),D=new t.Point(b.x+h*Math.cos(j),b.y+d*Math.sin(j));if(n.addMarkerAngle(D,j-T*Math.PI/2),n.addMarkerAngle(c,j-T*Math.PI),i.addPoint(c.x,c.y),null!=e){var w=h>d?h:d,E=h>d?1:h/d,B=h>d?d/h:1;e.translate(b.x,b.y),e.rotate(f),e.scale(E,B),e.arc(0,0,w,x,x+k,1-p),e.scale(1/E,1/B),e.rotate(-f),e.translate(-b.x,-b.y)}}break;case"Z":case"z":null!=e&&e.closePath(),n.current=n.start}return i},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),n=[],i=0;i<t.length;i++)n.push([t[i],e[i]]);return n}},t.Element.path.prototype=new t.Element.PathElementBase,t.Element.pattern=function(e){this.base=t.Element.ElementBase,this.base(e),this.createPattern=function(e,n){var i=this.attribute("width").toPixels("x",!0),r=this.attribute("height").toPixels("y",!0),a=new t.Element.svg;a.attributes.viewBox=new t.Property("viewBox",this.attribute("viewBox").value),a.attributes.width=new t.Property("width",i+"px"),a.attributes.height=new t.Property("height",r+"px"),a.attributes.transform=new t.Property("transform",this.attribute("patternTransform").value),a.children=this.children;var o=document.createElement("canvas");o.width=i,o.height=r;var s=o.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&s.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var l=-1;1>=l;l++)for(var u=-1;1>=u;u++)s.save(),s.translate(l*o.width,u*o.height),a.render(s),s.restore();var c=e.createPattern(o,"repeat");return c}},t.Element.pattern.prototype=new t.Element.ElementBase,t.Element.marker=function(e){this.base=t.Element.ElementBase,this.base(e),this.baseRender=this.render,this.render=function(e,n,i){e.translate(n.x,n.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(i),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(e.lineWidth,e.lineWidth),e.save();var r=new t.Element.svg;r.attributes.viewBox=new t.Property("viewBox",this.attribute("viewBox").value),r.attributes.refX=new t.Property("refX",this.attribute("refX").value),r.attributes.refY=new t.Property("refY",this.attribute("refY").value),r.attributes.width=new t.Property("width",this.attribute("markerWidth").value),r.attributes.height=new t.Property("height",this.attribute("markerHeight").value),r.attributes.fill=new t.Property("fill",this.attribute("fill").valueOrDefault("black")),r.attributes.stroke=new t.Property("stroke",this.attribute("stroke").valueOrDefault("none")),r.children=this.children,r.render(e),e.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(1/e.lineWidth,1/e.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(-i),e.translate(-n.x,-n.y)}},t.Element.marker.prototype=new t.Element.ElementBase,t.Element.defs=function(e){this.base=t.Element.ElementBase,this.base(e),this.render=function(t){}},t.Element.defs.prototype=new t.Element.ElementBase,t.Element.GradientBase=function(e){this.base=t.Element.ElementBase,this.base(e),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"stop"==i.type&&this.stops.push(i)}this.getGradient=function(){},this.createGradient=function(e,n,i){var r=this;this.getHrefAttribute().hasValue()&&(r=this.getHrefAttribute().getDefinition());var a=function(e){if(i.hasValue()){var n=new t.Property("color",e);return n.addOpacity(i.value).value}return e},o=this.getGradient(e,n);if(null==o)return a(r.stops[r.stops.length-1].color);for(var s=0;s<r.stops.length;s++)o.addColorStop(r.stops[s].offset,a(r.stops[s].color));if(this.attribute("gradientTransform").hasValue()){var l=t.ViewPort.viewPorts[0],u=new t.Element.rect;u.attributes.x=new t.Property("x",-t.MAX_VIRTUAL_PIXELS/3),u.attributes.y=new t.Property("y",-t.MAX_VIRTUAL_PIXELS/3),u.attributes.width=new t.Property("width",t.MAX_VIRTUAL_PIXELS),u.attributes.height=new t.Property("height",t.MAX_VIRTUAL_PIXELS);var c=new t.Element.g;c.attributes.transform=new t.Property("transform",this.attribute("gradientTransform").value),c.children=[u];var h=new t.Element.svg;h.attributes.x=new t.Property("x",0),h.attributes.y=new t.Property("y",0),h.attributes.width=new t.Property("width",l.width),h.attributes.height=new t.Property("height",l.height),h.children=[c];var d=document.createElement("canvas");d.width=l.width,d.height=l.height;var f=d.getContext("2d");return f.fillStyle=o,h.render(f),f.createPattern(d,"no-repeat")}return o}},t.Element.GradientBase.prototype=new t.Element.ElementBase,t.Element.linearGradient=function(e){this.base=t.Element.GradientBase,this.base(e),this.getGradient=function(t,e){var n=e.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),r="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),a="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),o="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return i==a&&r==o?null:t.createLinearGradient(i,r,a,o)}},t.Element.linearGradient.prototype=new t.Element.GradientBase,t.Element.radialGradient=function(e){this.base=t.Element.GradientBase,this.base(e),this.getGradient=function(t,e){var n=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),r="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),a=i,o=r;this.attribute("fx").hasValue()&&(a="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(o="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var s="objectBoundingBox"==this.gradientUnits?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(a,o,0,i,r,s)}},t.Element.radialGradient.prototype=new t.Element.GradientBase,t.Element.stop=function(e){this.base=t.Element.ElementBase,this.base(e),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var n=this.style("stop-color");this.style("stop-opacity").hasValue()&&(n=n.addOpacity(this.style("stop-opacity").value)),this.color=n.value},t.Element.stop.prototype=new t.Element.ElementBase,t.Element.AnimateBase=function(e){this.base=t.Element.ElementBase,this.base(e),t.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"!=this.attribute("repeatCount").value&&"indefinite"!=this.attribute("repeatDur").value)return"remove"!=this.attribute("fill").valueOrDefault("remove")||this.removed?!1:(this.removed=!0,this.getProperty().value=this.initialValue,!0);this.duration=0}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var n=this.calcValue();if(this.attribute("type").hasValue()){var i=this.attribute("type").value;n=i+"("+n+")"}this.getProperty().value=n,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var e={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var n=e.progress*(this.values.value.length-1),i=Math.floor(n),r=Math.ceil(n);e.from=new t.Property("from",parseFloat(this.values.value[i])),e.to=new t.Property("to",parseFloat(this.values.value[r])),e.progress=(n-i)/(r-i)}else e.from=this.from,e.to=this.to;return e}},t.Element.AnimateBase.prototype=new t.Element.ElementBase,t.Element.animate=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){var t=this.progress(),e=t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress;return e+this.initialUnits}},t.Element.animate.prototype=new t.Element.AnimateBase,t.Element.animateColor=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){var t=this.progress(),e=new RGBColor(t.from.value),n=new RGBColor(t.to.value);if(e.ok&&n.ok){var i=e.r+(n.r-e.r)*t.progress,r=e.g+(n.g-e.g)*t.progress,a=e.b+(n.b-e.b)*t.progress;return"rgb("+parseInt(i,10)+","+parseInt(r,10)+","+parseInt(a,10)+")"}return this.attribute("from").value}},t.Element.animateColor.prototype=new t.Element.AnimateBase,t.Element.animateTransform=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){for(var e=this.progress(),n=t.ToNumberArray(e.from.value),i=t.ToNumberArray(e.to.value),r="",a=0;a<n.length;a++)r+=n[a]+(i[a]-n[a])*e.progress+" ";return r}},t.Element.animateTransform.prototype=new t.Element.animate,t.Element.font=function(e){this.base=t.Element.ElementBase,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"font-face"==i.type?(this.fontFace=i,i.style("font-family").hasValue()&&(t.Definitions[i.style("font-family").value]=this)):"missing-glyph"==i.type?this.missingGlyph=i:"glyph"==i.type&&(""!=i.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[i.unicode]&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)}},t.Element.font.prototype=new t.Element.ElementBase,t.Element.fontface=function(e){this.base=t.Element.ElementBase,this.base(e),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},t.Element.fontface.prototype=new t.Element.ElementBase,t.Element.missingglyph=function(e){this.base=t.Element.path,this.base(e),this.horizAdvX=0},t.Element.missingglyph.prototype=new t.Element.path,t.Element.glyph=function(e){this.base=t.Element.path,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},t.Element.glyph.prototype=new t.Element.path,t.Element.text=function(e){this.captureTextNodes=!0,this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.style("dominant-baseline").hasValue()&&(t.textBaseline=this.style("dominant-baseline").value),this.style("alignment-baseline").hasValue()&&(t.textBaseline=this.style("alignment-baseline").value)},this.getBoundingBox=function(){return new t.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,e)},this.getAnchorDelta=function(t,e,n){var i=this.style("text-anchor").valueOrDefault("start");if("start"!=i){for(var r=0,a=n;a<e.children.length;a++){var o=e.children[a];if(a>n&&o.attribute("x").hasValue())break;r+=o.measureTextRecursive(t)}return-1*("end"==i?r:r/2)}return 0},this.renderChild=function(t,e,n){var i=e.children[n];i.attribute("x").hasValue()?i.x=i.attribute("x").toPixels("x")+this.getAnchorDelta(t,e,n):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),i.attribute("dx").hasValue()&&(this.x+=i.attribute("dx").toPixels("x")),i.x=this.x),this.x=i.x+i.measureText(t),i.attribute("y").hasValue()?i.y=i.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),i.attribute("dy").hasValue()&&(this.y+=i.attribute("dy").toPixels("y")),i.y=this.y),this.y=i.y,i.render(t);for(var n=0;n<i.children.length;n++)this.renderChild(t,i,n)}},t.Element.text.prototype=new t.Element.RenderedElementBase,t.Element.TextElementBase=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.getGlyph=function(t,e,n){var i=e[n],r=null;if(t.isArabic){var a="isolated";(0==n||" "==e[n-1])&&n<e.length-2&&" "!=e[n+1]&&(a="terminal"),n>0&&" "!=e[n-1]&&n<e.length-2&&" "!=e[n+1]&&(a="medial"),n>0&&" "!=e[n-1]&&(n==e.length-1||" "==e[n+1])&&(a="initial"),"undefined"!=typeof t.glyphs[i]&&(r=t.glyphs[i][a],null==r&&"glyph"==t.glyphs[i].type&&(r=t.glyphs[i]))}else r=t.glyphs[i];return null==r&&(r=t.missingGlyph),r},this.renderChildren=function(e){var n=this.parent.style("font-family").getDefinition();if(null==n)""!=e.fillStyle&&e.fillText(t.compressSpaces(this.getText()),this.x,this.y),""!=e.strokeStyle&&e.strokeText(t.compressSpaces(this.getText()),this.x,this.y);else{var i=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize),r=this.parent.style("font-style").valueOrDefault(t.Font.Parse(t.ctx.font).fontStyle),a=this.getText();n.isRTL&&(a=a.split("").reverse().join(""));for(var o=t.ToNumberArray(this.parent.attribute("dx").value),s=0;s<a.length;s++){var l=this.getGlyph(n,a,s),u=i/n.fontFace.unitsPerEm;e.translate(this.x,this.y),e.scale(u,-u);var c=e.lineWidth;e.lineWidth=e.lineWidth*n.fontFace.unitsPerEm/i,"italic"==r&&e.transform(1,0,.4,1,0,0),l.render(e),"italic"==r&&e.transform(1,0,-.4,1,0,0),e.lineWidth=c,e.scale(1/u,-1/u),e.translate(-this.x,-this.y),this.x+=i*(l.horizAdvX||n.horizAdvX)/n.fontFace.unitsPerEm,"undefined"==typeof o[s]||isNaN(o[s])||(this.x+=o[s])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),n=0;n<this.children.length;n++)e+=this.children[n].measureTextRecursive(t);return e},this.measureText=function(e){var n=this.parent.style("font-family").getDefinition();if(null!=n){var i=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize),r=0,a=this.getText();n.isRTL&&(a=a.split("").reverse().join(""));for(var o=t.ToNumberArray(this.parent.attribute("dx").value),s=0;s<a.length;s++){var l=this.getGlyph(n,a,s);r+=(l.horizAdvX||n.horizAdvX)*i/n.fontFace.unitsPerEm,"undefined"==typeof o[s]||isNaN(o[s])||(r+=o[s])}return r}var u=t.compressSpaces(this.getText());if(!e.measureText)return 10*u.length;e.save(),this.setContext(e);var c=e.measureText(u).width;return e.restore(),c}},t.Element.TextElementBase.prototype=new t.Element.RenderedElementBase,t.Element.tspan=function(e){this.captureTextNodes=!0,this.base=t.Element.TextElementBase,this.base(e),this.text=e.nodeValue||e.text||"",this.getText=function(){return this.text}},t.Element.tspan.prototype=new t.Element.TextElementBase,t.Element.tref=function(e){this.base=t.Element.TextElementBase,this.base(e),this.getText=function(){var t=this.getHrefAttribute().getDefinition();return null!=t?t.children[0].getText():void 0}},t.Element.tref.prototype=new t.Element.TextElementBase,t.Element.a=function(e){this.base=t.Element.TextElementBase,this.base(e),this.hasText=!0;for(var n=0;n<e.childNodes.length;n++)3!=e.childNodes[n].nodeType&&(this.hasText=!1);this.text=this.hasText?e.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(e){if(this.hasText){this.baseRenderChildren(e);var n=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);t.Mouse.checkBoundingBox(this,new t.BoundingBox(this.x,this.y-n.toPixels("y"),this.x+this.measureText(e),this.y))}else{var i=new t.Element.g;i.children=this.children,i.parent=this,i.render(e)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){t.ctx.canvas.style.cursor="pointer"}},t.Element.a.prototype=new t.Element.TextElementBase,t.Element.image=function(e){this.base=t.Element.RenderedElementBase,this.base(e);var n=this.getHrefAttribute().value,i=n.match(/\.svg$/);if(t.Images.push(this),this.loaded=!1,i)this.img=t.ajax(n),this.loaded=!0;else{this.img=document.createElement("img");var r=this;this.img.onload=function(){r.loaded=!0},this.img.onerror=function(){"undefined"!=typeof console&&(console.log('ERROR: image "'+n+'" not found'),r.loaded=!0)},this.img.src=n}this.renderChildren=function(e){var n=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");0!=a&&0!=o&&(e.save(),i?e.drawSvg(this.img,n,r,a,o):(e.translate(n,r),t.AspectRatio(e,this.attribute("preserveAspectRatio").value,a,this.img.width,o,this.img.height,0,0),e.drawImage(this.img,0,0)),e.restore())},this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");return new t.BoundingBox(e,n,e+i,n+r)}},t.Element.image.prototype=new t.Element.RenderedElementBase,t.Element.g=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.getBoundingBox=function(){for(var e=new t.BoundingBox,n=0;n<this.children.length;n++)e.addBoundingBox(this.children[n].getBoundingBox());return e}},t.Element.g.prototype=new t.Element.RenderedElementBase,t.Element.symbol=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){if(this.baseSetContext(e),this.attribute("viewBox").hasValue()){var n=t.ToNumberArray(this.attribute("viewBox").value),i=n[0],r=n[1];width=n[2],height=n[3],t.AspectRatio(e,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,i,r),t.ViewPort.SetCurrent(n[2],n[3])}}},t.Element.symbol.prototype=new t.Element.RenderedElementBase,t.Element.style=function(e){this.base=t.Element.ElementBase,this.base(e);for(var n="",i=0;i<e.childNodes.length;i++)n+=e.childNodes[i].nodeValue;n=n.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),n=t.compressSpaces(n);for(var r=n.split("}"),i=0;i<r.length;i++)if(""!=t.trim(r[i]))for(var a=r[i].split("{"),o=a[0].split(","),s=a[1].split(";"),l=0;l<o.length;l++){var u=t.trim(o[l]);if(""!=u){for(var c={},h=0;h<s.length;h++){var d=s[h].indexOf(":"),f=s[h].substr(0,d),g=s[h].substr(d+1,s[h].length-d);null!=f&&null!=g&&(c[t.trim(f)]=new t.Property(t.trim(f),t.trim(g)))}if(t.Styles[u]=c,"@font-face"==u)for(var p=c["font-family"].value.replace(/"/g,""),m=c.src.value.split(","),v=0;v<m.length;v++)if(m[v].indexOf('format("svg")')>0)for(var y=m[v].indexOf("url"),I=m[v].indexOf(")",y),b=m[v].substr(y+5,I-y-6),C=t.parseXml(t.ajax(b)),w=C.getElementsByTagName("font"),A=0;A<w.length;A++){var x=t.CreateElement(w[A]);t.Definitions[p]=x}}}},t.Element.style.prototype=new t.Element.ElementBase,t.Element.use=function(e){this.base=t.Element.RenderedElementBase,
this.base(e),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))},this.getDefinition=function(){var t=this.getHrefAttribute().getDefinition();return this.attribute("width").hasValue()&&(t.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(t.attribute("height",!0).value=this.attribute("height").value),t},this.path=function(t){var e=this.getDefinition();null!=e&&e.path(t)},this.getBoundingBox=function(){var t=this.getDefinition();return null!=t?t.getBoundingBox():void 0},this.renderChildren=function(t){var e=this.getDefinition();if(null!=e){var n=e.parent;e.parent=null,e.render(t),e.parent=n}}},t.Element.use.prototype=new t.Element.RenderedElementBase,t.Element.mask=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(e,n){var i=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");if(0==a&&0==o){for(var s=new t.BoundingBox,l=0;l<this.children.length;l++)s.addBoundingBox(this.children[l].getBoundingBox());var i=Math.floor(s.x1),r=Math.floor(s.y1),a=Math.floor(s.width()),o=Math.floor(s.height())}var u=n.attribute("mask").value;n.attribute("mask").value="";var c=document.createElement("canvas");c.width=i+a,c.height=r+o;var h=c.getContext("2d");this.renderChildren(h);var d=document.createElement("canvas");d.width=i+a,d.height=r+o;var f=d.getContext("2d");n.render(f),f.globalCompositeOperation="destination-in",f.fillStyle=h.createPattern(c,"no-repeat"),f.fillRect(0,0,i+a,r+o),e.fillStyle=f.createPattern(d,"no-repeat"),e.fillRect(0,0,i+a,r+o),n.attribute("mask").value=u},this.render=function(t){}},t.Element.mask.prototype=new t.Element.ElementBase,t.Element.clipPath=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(e){for(var n=0;n<this.children.length;n++){var i=this.children[n];if("undefined"!=typeof i.path){var r=null;i.attribute("transform").hasValue()&&(r=new t.Transform(i.attribute("transform").value),r.apply(e)),i.path(e),e.clip(),r&&r.unapply(e)}}},this.render=function(t){}},t.Element.clipPath.prototype=new t.Element.ElementBase,t.Element.filter=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e){var n=e.getBoundingBox(),i=Math.floor(n.x1),r=Math.floor(n.y1),a=Math.floor(n.width()),o=Math.floor(n.height()),s=e.style("filter").value;e.style("filter").value="";for(var l=0,u=0,c=0;c<this.children.length;c++){var h=this.children[c].extraFilterDistance||0;l=Math.max(l,h),u=Math.max(u,h)}var d=document.createElement("canvas");d.width=a+2*l,d.height=o+2*u;var f=d.getContext("2d");f.translate(-i+l,-r+u),e.render(f);for(var c=0;c<this.children.length;c++)this.children[c].apply(f,0,0,a+2*l,o+2*u);t.drawImage(d,0,0,a+2*l,o+2*u,i-l,r-u,a+2*l,o+2*u),e.style("filter",!0).value=s},this.render=function(t){}},t.Element.filter.prototype=new t.Element.ElementBase,t.Element.feMorphology=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e,n,i,r){}},t.Element.feMorphology.prototype=new t.Element.ElementBase,t.Element.feColorMatrix=function(e){function n(t,e,n,i,r,a){return t[n*i*4+4*e+a]}function i(t,e,n,i,r,a,o){t[n*i*4+4*e+a]=o}this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e,r,a,o){for(var s=t.getImageData(0,0,a,o),r=0;o>r;r++)for(var e=0;a>e;e++){var l=n(s.data,e,r,a,o,0),u=n(s.data,e,r,a,o,1),c=n(s.data,e,r,a,o,2),h=(l+u+c)/3;i(s.data,e,r,a,o,0,h),i(s.data,e,r,a,o,1,h),i(s.data,e,r,a,o,2,h)}t.clearRect(0,0,a,o),t.putImageData(s,0,0)}},t.Element.feColorMatrix.prototype=new t.Element.ElementBase,t.Element.feGaussianBlur=function(e){this.base=t.Element.ElementBase,this.base(e),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(e,n,i,r,a){return"undefined"==typeof stackBlurCanvasRGBA?void("undefined"!=typeof console&&console.log("ERROR: StackBlur.js must be included for blur to work")):(e.canvas.id=t.UniqueId(),e.canvas.style.display="none",document.body.appendChild(e.canvas),stackBlurCanvasRGBA(e.canvas.id,n,i,r,a,this.blurRadius),void document.body.removeChild(e.canvas))}},t.Element.feGaussianBlur.prototype=new t.Element.ElementBase,t.Element.title=function(t){},t.Element.title.prototype=new t.Element.ElementBase,t.Element.desc=function(t){},t.Element.desc.prototype=new t.Element.ElementBase,t.Element.MISSING=function(t){"undefined"!=typeof console&&console.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},t.Element.MISSING.prototype=new t.Element.ElementBase,t.CreateElement=function(e){var n=e.nodeName.replace(/^[^:]+:/,"");n=n.replace(/\-/g,"");var i=null;return i="undefined"!=typeof t.Element[n]?new t.Element[n](e):new t.Element.MISSING(e),i.type=e.nodeName,i},t.load=function(e,n){t.loadXml(e,t.ajax(n))},t.loadXml=function(e,n){t.loadXmlDoc(e,t.parseXml(n))},t.loadXmlDoc=function(e,n){t.init(e);var i=function(t){for(var n=e.canvas;n;)t.x-=n.offsetLeft,t.y-=n.offsetTop,n=n.offsetParent;return window.scrollX&&(t.x+=window.scrollX),window.scrollY&&(t.y+=window.scrollY),t};1!=t.opts.ignoreMouse&&(e.canvas.onclick=function(e){var n=i(new t.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));t.Mouse.onclick(n.x,n.y)},e.canvas.onmousemove=function(e){var n=i(new t.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));t.Mouse.onmousemove(n.x,n.y)});var r=t.CreateElement(n.documentElement);r.root=!0;var a=!0,o=function(){t.ViewPort.Clear(),e.canvas.parentNode&&t.ViewPort.SetCurrent(e.canvas.parentNode.clientWidth,e.canvas.parentNode.clientHeight),1!=t.opts.ignoreDimensions&&(r.style("width").hasValue()&&(e.canvas.width=r.style("width").toPixels("x"),e.canvas.style.width=e.canvas.width+"px"),r.style("height").hasValue()&&(e.canvas.height=r.style("height").toPixels("y"),e.canvas.style.height=e.canvas.height+"px"));var i=e.canvas.clientWidth||e.canvas.width,o=e.canvas.clientHeight||e.canvas.height;if(1==t.opts.ignoreDimensions&&r.style("width").hasValue()&&r.style("height").hasValue()&&(i=r.style("width").toPixels("x"),o=r.style("height").toPixels("y")),t.ViewPort.SetCurrent(i,o),null!=t.opts.offsetX&&(r.attribute("x",!0).value=t.opts.offsetX),null!=t.opts.offsetY&&(r.attribute("y",!0).value=t.opts.offsetY),null!=t.opts.scaleWidth&&null!=t.opts.scaleHeight){var s=1,l=1,u=t.ToNumberArray(r.attribute("viewBox").value);r.attribute("width").hasValue()?s=r.attribute("width").toPixels("x")/t.opts.scaleWidth:isNaN(u[2])||(s=u[2]/t.opts.scaleWidth),r.attribute("height").hasValue()?l=r.attribute("height").toPixels("y")/t.opts.scaleHeight:isNaN(u[3])||(l=u[3]/t.opts.scaleHeight),r.attribute("width",!0).value=t.opts.scaleWidth,r.attribute("height",!0).value=t.opts.scaleHeight,r.attribute("viewBox",!0).value="0 0 "+i*s+" "+o*l,r.attribute("preserveAspectRatio",!0).value="none"}1!=t.opts.ignoreClear&&e.clearRect(0,0,i,o),r.render(e),a&&(a=!1,"function"==typeof t.opts.renderCallback&&t.opts.renderCallback(n))},s=!0;t.ImagesLoaded()&&(s=!1,o()),t.intervalID=setInterval(function(){var e=!1;if(s&&t.ImagesLoaded()&&(s=!1,e=!0),1!=t.opts.ignoreMouse&&(e|=t.Mouse.hasEvents()),1!=t.opts.ignoreAnimation)for(var n=0;n<t.Animations.length;n++)e|=t.Animations[n].update(1e3/t.FRAMERATE);"function"==typeof t.opts.forceRedraw&&1==t.opts.forceRedraw()&&(e=!0),e&&(o(),t.Mouse.runEvents())},1e3/t.FRAMERATE)},t.stop=function(){t.intervalID&&clearInterval(t.intervalID)},t.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInPath&&e.isPointInPath(i.x,i.y)&&(this.eventElements[n]=t)}},this.checkBoundingBox=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInBox(i.x,i.y)&&(this.eventElements[n]=t)}},this.runEvents=function(){t.ctx.canvas.style.cursor="";for(var e=0;e<this.events.length;e++)for(var n=this.events[e],i=this.eventElements[e];i;)n.run(i),i=i.parent;this.events=[],this.eventElements=[]}},t}this.canvg=function(e,n,i){if(null!=e||null!=n||null!=i){i=i||{},"string"==typeof e&&(e=document.getElementById(e)),null!=e.svg&&e.svg.stop();var r=t();1==e.childNodes.length&&"OBJECT"==e.childNodes[0].nodeName||(e.svg=r),r.opts=i;var a=e.getContext("2d");"undefined"!=typeof n.documentElement?r.loadXmlDoc(a,n):"<"==n.substr(0,1)?r.loadXml(a,n):r.load(a,n)}else for(var o=document.getElementsByTagName("svg"),s=0;s<o.length;s++){var l=o[s],u=document.createElement("canvas");u.width=l.clientWidth,u.height=l.clientHeight,l.parentNode.insertBefore(u,l),l.parentNode.removeChild(l);var c=document.createElement("div");c.appendChild(l),canvg(u,c.innerHTML)}}}(),"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,n,i,r){canvg(this.canvas,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:n,scaleWidth:i,scaleHeight:r})});var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];!function(){function t(){var t={};return t.FRAMERATE=30,t.MAX_VIRTUAL_PIXELS=3e4,t.init=function(e){var n=0;t.UniqueId=function(){return n++,"canvg"+n},t.Definitions={},t.Styles={},t.Animations=[],t.Images=[],t.ctx=e,t.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},t.init(),t.ImagesLoaded=function(){for(var e=0;e<t.Images.length;e++)if(!t.Images[e].loaded)return!1;return!0},t.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},t.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},t.ajax=function(t){var e;return e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e?(e.open("GET",t,!1),e.send(null),e.responseText):null},t.parseXml=function(t){if(window.DOMParser){var e=new DOMParser;return e.parseFromString(t,"text/xml")}t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var n=new ActiveXObject("Microsoft.XMLDOM");return n.async="false",n.loadXML(t),n},t.Property=function(t,e){this.name=t,this.value=e},t.Property.prototype.getValue=function(){return this.value},t.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},t.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},t.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},t.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},t.Property.prototype.addOpacity=function(e){var n=this.value;if(null!=e&&""!=e&&"string"==typeof this.value){var i=new RGBColor(this.value);i.ok&&(n="rgba("+i.r+", "+i.g+", "+i.b+", "+e+")")}return new t.Property(this.name,n)},t.Property.prototype.getDefinition=function(){var e=this.value.match(/#([^\)'"]+)/);return e&&(e=e[1]),e||(e=this.value),t.Definitions[e]},t.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},t.Property.prototype.getFillStyleDefinition=function(e,n){var i=this.getDefinition();if(null!=i&&i.createGradient)return i.createGradient(t.ctx,e,n);if(null!=i&&i.createPattern){if(i.getHrefAttribute().hasValue()){var r=i.attribute("patternTransform");i=i.getHrefAttribute().getDefinition(),r.hasValue()&&(i.attribute("patternTransform",!0).value=r.value)}return i.createPattern(t.ctx,e)}return null},t.Property.prototype.getDPI=function(){return 96},t.Property.prototype.getEM=function(e){var n=12,i=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);return i.hasValue()&&(n=i.toPixels(e)),n},t.Property.prototype.getUnits=function(){var t=this.value+"";return t.replace(/[0-9\.\-]/g,"")},t.Property.prototype.toPixels=function(e,n){if(!this.hasValue())return 0;var i=this.value+"";if(i.match(/em$/))return this.numValue()*this.getEM(e);if(i.match(/ex$/))return this.numValue()*this.getEM(e)/2;if(i.match(/px$/))return this.numValue();if(i.match(/pt$/))return this.numValue()*this.getDPI(e)*(1/72);if(i.match(/pc$/))return 15*this.numValue();if(i.match(/cm$/))return this.numValue()*this.getDPI(e)/2.54;if(i.match(/mm$/))return this.numValue()*this.getDPI(e)/25.4;if(i.match(/in$/))return this.numValue()*this.getDPI(e);if(i.match(/%$/))return this.numValue()*t.ViewPort.ComputeSize(e);var r=this.numValue();return n&&1>r?r*t.ViewPort.ComputeSize(e):r},t.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():(t.match(/ms$/),this.numValue())},t.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},t.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(e,n,i,r,a,o){var s=null!=o?this.Parse(o):this.CreateFont("","","","","",t.ctx.font);return{fontFamily:a||s.fontFamily,fontSize:r||s.fontSize,fontStyle:e||s.fontStyle,fontWeight:i||s.fontWeight,fontVariant:n||s.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var e=this;this.Parse=function(n){for(var i={},r=t.trim(t.compressSpaces(n||"")).split(" "),a={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},o="",s=0;s<r.length;s++)a.fontStyle||-1==e.Styles.indexOf(r[s])?a.fontVariant||-1==e.Variants.indexOf(r[s])?a.fontWeight||-1==e.Weights.indexOf(r[s])?a.fontSize?"inherit"!=r[s]&&(o+=r[s]):("inherit"!=r[s]&&(i.fontSize=r[s].split("/")[0]),a.fontStyle=a.fontVariant=a.fontWeight=a.fontSize=!0):("inherit"!=r[s]&&(i.fontWeight=r[s]),a.fontStyle=a.fontVariant=a.fontWeight=!0):("inherit"!=r[s]&&(i.fontVariant=r[s]),a.fontStyle=a.fontVariant=!0):("inherit"!=r[s]&&(i.fontStyle=r[s]),a.fontStyle=!0);return""!=o&&(i.fontFamily=o),i}},t.ToNumberArray=function(e){for(var n=t.trim(t.compressSpaces((e||"").replace(/,/g," "))).split(" "),i=0;i<n.length;i++)n[i]=parseFloat(n[i]);return n},t.Point=function(t,e){this.x=t,this.y=e},t.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},t.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],n=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=n},t.CreatePoint=function(e){var n=t.ToNumberArray(e);return new t.Point(n[0],n[1])},t.CreatePath=function(e){for(var n=t.ToNumberArray(e),i=[],r=0;r<n.length;r+=2)i.push(new t.Point(n[r],n[r+1]));return i},t.BoundingBox=function(t,e,n,r){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,n,i,r,a){var o=t+2/3*(n-t),s=e+2/3*(i-e),l=o+1/3*(r-t),u=s+1/3*(a-e);this.addBezierCurve(t,e,o,l,s,u,r,a)},this.addBezierCurve=function(t,e,n,r,a,o,s,l){var u=[t,e],c=[n,r],h=[a,o],d=[s,l];for(this.addPoint(u[0],u[1]),this.addPoint(d[0],d[1]),i=0;1>=i;i++){var f=function(t){return Math.pow(1-t,3)*u[i]+3*Math.pow(1-t,2)*t*c[i]+3*(1-t)*Math.pow(t,2)*h[i]+Math.pow(t,3)*d[i]},g=6*u[i]-12*c[i]+6*h[i],p=-3*u[i]+9*c[i]-9*h[i]+3*d[i],m=3*c[i]-3*u[i];if(0!=p){var v=Math.pow(g,2)-4*m*p;if(!(0>v)){var y=(-g+Math.sqrt(v))/(2*p);y>0&&1>y&&(0==i&&this.addX(f(y)),1==i&&this.addY(f(y)));var I=(-g-Math.sqrt(v))/(2*p);I>0&&1>I&&(0==i&&this.addX(f(I)),1==i&&this.addY(f(I)))}}else{if(0==g)continue;var b=-m/g;b>0&&1>b&&(0==i&&this.addX(f(b)),1==i&&this.addY(f(b)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,r)},t.Transform=function(e){var n=this;this.Type={},this.Type.translate=function(e){this.p=t.CreatePoint(e),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(e){var n=t.ToNumberArray(e);this.angle=new t.Property("angle",n[0]),this.cx=n[1]||0,this.cy=n[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(e){this.p=t.CreatePoint(e),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(e){this.m=t.ToNumberArray(e),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(e){this.base=n.Type.matrix,this.base(e),this.angle=new t.Property("angle",e)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var i=t.trim(t.compressSpaces(e)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),r=0;r<i.length;r++){var a=t.trim(i[r].split("(")[0]),o=i[r].split("(")[1].replace(")",""),s=new this.Type[a](o);s.type=a,this.transforms.push(s)}},t.AspectRatio=function(e,n,i,r,a,o,s,l,u,c){n=t.compressSpaces(n),n=n.replace(/^defer\s/,"");var h=n.split(" ")[0]||"xMidYMid",d=n.split(" ")[1]||"meet",f=i/r,g=a/o,p=Math.min(f,g),m=Math.max(f,g);"meet"==d&&(r*=p,o*=p),"slice"==d&&(r*=m,o*=m),u=new t.Property("refX",u),c=new t.Property("refY",c),u.hasValue()&&c.hasValue()?e.translate(-p*u.toPixels("x"),-p*c.toPixels("y")):(h.match(/^xMid/)&&("meet"==d&&p==g||"slice"==d&&m==g)&&e.translate(i/2-r/2,0),h.match(/YMid$/)&&("meet"==d&&p==f||"slice"==d&&m==f)&&e.translate(0,a/2-o/2),h.match(/^xMax/)&&("meet"==d&&p==g||"slice"==d&&m==g)&&e.translate(i-r,0),h.match(/YMax$/)&&("meet"==d&&p==f||"slice"==d&&m==f)&&e.translate(0,a-o)),"none"==h?e.scale(f,g):"meet"==d?e.scale(p,p):"slice"==d&&e.scale(m,m),e.translate(null==s?0:-s,null==l?0:-l)},t.Element={},t.EmptyProperty=new t.Property("EMPTY",""),t.Element.ElementBase=function(e){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(e,n){var i=this.attributes[e];return null!=i?i:(1==n&&(i=new t.Property(e,""),this.attributes[e]=i),i||t.EmptyProperty)},this.getHrefAttribute=function(){for(var e in this.attributes)if(e.match(/:href$/))return this.attributes[e];return t.EmptyProperty},this.style=function(e,n){var i=this.styles[e];if(null!=i)return i;var r=this.attribute(e);if(null!=r&&r.hasValue())return this.styles[e]=r,r;var a=this.parent;if(null!=a){var o=a.style(e);if(null!=o&&o.hasValue())return o}return 1==n&&(i=new t.Property(e,""),this.styles[e]=i),i||t.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value){if(t.save(),this.attribute("mask").hasValue()){var e=this.attribute("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(){},this.clearContext=function(){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(e,n){var i=e;n&&(i=t.CreateElement(e)),i.parent=this,this.children.push(i)},null!=e&&1==e.nodeType){for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];if(1==i.nodeType&&this.addChild(i,!0),this.captureTextNodes&&3==i.nodeType){var r=i.nodeValue||i.text||"";""!=t.trim(t.compressSpaces(r))&&this.addChild(new t.Element.tspan(i),!1)}}for(var n=0;n<e.attributes.length;n++){var a=e.attributes[n];this.attributes[a.nodeName]=new t.Property(a.nodeName,a.nodeValue)}var o=t.Styles[e.nodeName];if(null!=o)for(var s in o)this.styles[s]=o[s];if(this.attribute("class").hasValue())for(var l=t.compressSpaces(this.attribute("class").value).split(" "),u=0;u<l.length;u++){if(o=t.Styles["."+l[u]],null!=o)for(var s in o)this.styles[s]=o[s];if(o=t.Styles[e.nodeName+"."+l[u]],null!=o)for(var s in o)this.styles[s]=o[s]}if(this.attribute("id").hasValue()){var o=t.Styles["#"+this.attribute("id").value];if(null!=o)for(var s in o)this.styles[s]=o[s]}if(this.attribute("style").hasValue())for(var o=this.attribute("style").value.split(";"),n=0;n<o.length;n++)if(""!=t.trim(o[n])){var c=o[n].split(":"),s=t.trim(c[0]),h=t.trim(c[1]);this.styles[s]=new t.Property(s,h)}this.attribute("id").hasValue()&&null==t.Definitions[this.attribute("id").value]&&(t.Definitions[this.attribute("id").value]=this)}},t.Element.RenderedElementBase=function(e){this.base=t.Element.ElementBase,this.base(e),this.setContext=function(e){if(this.style("fill").isUrlDefinition()){var n=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=n&&(e.fillStyle=n)}else if(this.style("fill").hasValue()){var i=this.style("fill");"currentColor"==i.value&&(i.value=this.style("color").value),e.fillStyle="none"==i.value?"rgba(0,0,0,0)":i.value}if(this.style("fill-opacity").hasValue()){var i=new t.Property("fill",e.fillStyle);i=i.addOpacity(this.style("fill-opacity").value),e.fillStyle=i.value}if(this.style("stroke").isUrlDefinition()){var n=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=n&&(e.strokeStyle=n)}else if(this.style("stroke").hasValue()){var r=this.style("stroke");"currentColor"==r.value&&(r.value=this.style("color").value),e.strokeStyle="none"==r.value?"rgba(0,0,0,0)":r.value}if(this.style("stroke-opacity").hasValue()){var r=new t.Property("stroke",e.strokeStyle);r=r.addOpacity(this.style("stroke-opacity").value),e.strokeStyle=r.value}if(this.style("stroke-width").hasValue()){var a=this.style("stroke-width").toPixels();e.lineWidth=0==a?.001:a}if(this.style("stroke-linecap").hasValue()&&(e.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(e.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(e.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()){var o=t.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof e.setLineDash?e.setLineDash(o):"undefined"!=typeof e.webkitLineDash?e.webkitLineDash=o:"undefined"!=typeof e.mozDash&&(e.mozDash=o);var s=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof e.lineDashOffset?e.lineDashOffset=s:"undefined"!=typeof e.webkitLineDashOffset?e.webkitLineDashOffset=s:"undefined"!=typeof e.mozDashOffset&&(e.mozDashOffset=s)}if("undefined"!=typeof e.font&&(e.font=t.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()){var l=new t.Transform(this.attribute("transform").value);l.apply(e)}if(this.style("clip-path").hasValue()){var u=this.style("clip-path").getDefinition();null!=u&&u.apply(e)}this.style("opacity").hasValue()&&(e.globalAlpha=this.style("opacity").numValue())}},t.Element.RenderedElementBase.prototype=new t.Element.ElementBase,t.Element.PathElementBase=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.path=function(e){return null!=e&&e.beginPath(),new t.BoundingBox},this.renderChildren=function(e){this.path(e),t.Mouse.checkPath(this,e),""!=e.fillStyle&&(this.attribute("fill-rule").hasValue()?e.fill(this.attribute("fill-rule").value):e.fill()),""!=e.strokeStyle&&e.stroke();var n=this.getMarkers();if(null!=n){if(this.style("marker-start").isUrlDefinition()){var i=this.style("marker-start").getDefinition();i.render(e,n[0][0],n[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var i=this.style("marker-mid").getDefinition(),r=1;r<n.length-1;r++)i.render(e,n[r][0],n[r][1]);if(this.style("marker-end").isUrlDefinition()){var i=this.style("marker-end").getDefinition();i.render(e,n[n.length-1][0],n[n.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},t.Element.PathElementBase.prototype=new t.Element.RenderedElementBase,t.Element.svg=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseClearContext=this.clearContext,this.clearContext=function(e){this.baseClearContext(e),t.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,this.baseSetContext(e),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),e.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var n=t.ViewPort.width(),i=t.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){n=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");var r=0,a=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(r=-this.attribute("refX").toPixels("x"),a=-this.attribute("refY").toPixels("y")),e.beginPath(),e.moveTo(r,a),e.lineTo(n,a),e.lineTo(n,i),e.lineTo(r,i),e.closePath(),e.clip()}if(t.ViewPort.SetCurrent(n,i),this.attribute("viewBox").hasValue()){var o=t.ToNumberArray(this.attribute("viewBox").value),s=o[0],l=o[1];n=o[2],i=o[3],t.AspectRatio(e,this.attribute("preserveAspectRatio").value,t.ViewPort.width(),n,t.ViewPort.height(),i,s,l,this.attribute("refX").value,this.attribute("refY").value),t.ViewPort.RemoveCurrent(),t.ViewPort.SetCurrent(o[2],o[3])}}},t.Element.svg.prototype=new t.Element.RenderedElementBase,t.Element.rect=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y"),o=this.attribute("rx").toPixels("x"),s=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(s=o),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(o=s),o=Math.min(o,r/2),s=Math.min(s,a/2),null!=e&&(e.beginPath(),e.moveTo(n+o,i),e.lineTo(n+r-o,i),e.quadraticCurveTo(n+r,i,n+r,i+s),e.lineTo(n+r,i+a-s),e.quadraticCurveTo(n+r,i+a,n+r-o,i+a),e.lineTo(n+o,i+a),e.quadraticCurveTo(n,i+a,n,i+a-s),e.lineTo(n,i+s),e.quadraticCurveTo(n,i,n+o,i),e.closePath()),new t.BoundingBox(n,i,n+r,i+a)}},t.Element.rect.prototype=new t.Element.PathElementBase,t.Element.circle=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var n=this.attribute("cx").toPixels("x"),i=this.attribute("cy").toPixels("y"),r=this.attribute("r").toPixels();return null!=e&&(e.beginPath(),e.arc(n,i,r,0,2*Math.PI,!0),e.closePath()),new t.BoundingBox(n-r,i-r,n+r,i+r)}},t.Element.circle.prototype=new t.Element.PathElementBase,t.Element.ellipse=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var n=4*((Math.sqrt(2)-1)/3),i=this.attribute("rx").toPixels("x"),r=this.attribute("ry").toPixels("y"),a=this.attribute("cx").toPixels("x"),o=this.attribute("cy").toPixels("y");return null!=e&&(e.beginPath(),e.moveTo(a,o-r),e.bezierCurveTo(a+n*i,o-r,a+i,o-n*r,a+i,o),e.bezierCurveTo(a+i,o+n*r,a+n*i,o+r,a,o+r),e.bezierCurveTo(a-n*i,o+r,a-i,o+n*r,a-i,o),e.bezierCurveTo(a-i,o-n*r,a-n*i,o-r,a,o-r),e.closePath()),new t.BoundingBox(a-i,o-r,a+i,o+r)}},t.Element.ellipse.prototype=new t.Element.PathElementBase,t.Element.line=function(e){this.base=t.Element.PathElementBase,this.base(e),this.getPoints=function(){return[new t.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new t.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))];
},this.path=function(e){var n=this.getPoints();return null!=e&&(e.beginPath(),e.moveTo(n[0].x,n[0].y),e.lineTo(n[1].x,n[1].y)),new t.BoundingBox(n[0].x,n[0].y,n[1].x,n[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},t.Element.line.prototype=new t.Element.PathElementBase,t.Element.polyline=function(e){this.base=t.Element.PathElementBase,this.base(e),this.points=t.CreatePath(this.attribute("points").value),this.path=function(e){var n=new t.BoundingBox(this.points[0].x,this.points[0].y);null!=e&&(e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y));for(var i=1;i<this.points.length;i++)n.addPoint(this.points[i].x,this.points[i].y),null!=e&&e.lineTo(this.points[i].x,this.points[i].y);return n},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},t.Element.polyline.prototype=new t.Element.PathElementBase,t.Element.polygon=function(e){this.base=t.Element.polyline,this.base(e),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},t.Element.polygon.prototype=new t.Element.polyline,t.Element.path=function(e){this.base=t.Element.PathElementBase,this.base(e);var n=this.attribute("d").value;n=n.replace(/,/gm," "),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),n=n.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([0-9])([+\-])/gm,"$1 $2"),n=n.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),n=n.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),n=t.compressSpaces(n),n=t.trim(n),this.PathParser=new function(e){this.tokens=e.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new t.Point(0,0),this.control=new t.Point(0,0),this.current=new t.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var e=new t.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(e)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var e=new t.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return e},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,n){null!=n&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(n),this.path=function(e){var n=this.PathParser;n.reset();var i=new t.BoundingBox;for(null!=e&&e.beginPath();!n.isEnd();)switch(n.nextCommand(),n.command){case"M":case"m":var r=n.getAsCurrentPoint();for(n.addMarker(r),i.addPoint(r.x,r.y),null!=e&&e.moveTo(r.x,r.y),n.start=n.current;!n.isCommandOrEnd();){var r=n.getAsCurrentPoint();n.addMarker(r,n.start),i.addPoint(r.x,r.y),null!=e&&e.lineTo(r.x,r.y)}break;case"L":case"l":for(;!n.isCommandOrEnd();){var a=n.current,r=n.getAsCurrentPoint();n.addMarker(r,a),i.addPoint(r.x,r.y),null!=e&&e.lineTo(r.x,r.y)}break;case"H":case"h":for(;!n.isCommandOrEnd();){var o=new t.Point((n.isRelativeCommand()?n.current.x:0)+n.getScalar(),n.current.y);n.addMarker(o,n.current),n.current=o,i.addPoint(n.current.x,n.current.y),null!=e&&e.lineTo(n.current.x,n.current.y)}break;case"V":case"v":for(;!n.isCommandOrEnd();){var o=new t.Point(n.current.x,(n.isRelativeCommand()?n.current.y:0)+n.getScalar());n.addMarker(o,n.current),n.current=o,i.addPoint(n.current.x,n.current.y),null!=e&&e.lineTo(n.current.x,n.current.y)}break;case"C":case"c":for(;!n.isCommandOrEnd();){var s=n.current,l=n.getPoint(),u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,l),i.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,c.x,c.y),null!=e&&e.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y)}break;case"S":case"s":for(;!n.isCommandOrEnd();){var s=n.current,l=n.getReflectedControlPoint(),u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,l),i.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,c.x,c.y),null!=e&&e.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y)}break;case"Q":case"q":for(;!n.isCommandOrEnd();){var s=n.current,u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,u),i.addQuadraticCurve(s.x,s.y,u.x,u.y,c.x,c.y),null!=e&&e.quadraticCurveTo(u.x,u.y,c.x,c.y)}break;case"T":case"t":for(;!n.isCommandOrEnd();){var s=n.current,u=n.getReflectedControlPoint();n.control=u;var c=n.getAsCurrentPoint();n.addMarker(c,u,u),i.addQuadraticCurve(s.x,s.y,u.x,u.y,c.x,c.y),null!=e&&e.quadraticCurveTo(u.x,u.y,c.x,c.y)}break;case"A":case"a":for(;!n.isCommandOrEnd();){var s=n.current,h=n.getScalar(),d=n.getScalar(),f=n.getScalar()*(Math.PI/180),g=n.getScalar(),p=n.getScalar(),c=n.getAsCurrentPoint(),m=new t.Point(Math.cos(f)*(s.x-c.x)/2+Math.sin(f)*(s.y-c.y)/2,-Math.sin(f)*(s.x-c.x)/2+Math.cos(f)*(s.y-c.y)/2),v=Math.pow(m.x,2)/Math.pow(h,2)+Math.pow(m.y,2)/Math.pow(d,2);v>1&&(h*=Math.sqrt(v),d*=Math.sqrt(v));var y=(g==p?-1:1)*Math.sqrt((Math.pow(h,2)*Math.pow(d,2)-Math.pow(h,2)*Math.pow(m.y,2)-Math.pow(d,2)*Math.pow(m.x,2))/(Math.pow(h,2)*Math.pow(m.y,2)+Math.pow(d,2)*Math.pow(m.x,2)));isNaN(y)&&(y=0);var I=new t.Point(y*h*m.y/d,y*-d*m.x/h),b=new t.Point((s.x+c.x)/2+Math.cos(f)*I.x-Math.sin(f)*I.y,(s.y+c.y)/2+Math.sin(f)*I.x+Math.cos(f)*I.y),C=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},w=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(C(t)*C(e))},A=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(w(t,e))},x=A([1,0],[(m.x-I.x)/h,(m.y-I.y)/d]),N=[(m.x-I.x)/h,(m.y-I.y)/d],M=[(-m.x-I.x)/h,(-m.y-I.y)/d],k=A(N,M);w(N,M)<=-1&&(k=Math.PI),w(N,M)>=1&&(k=0);var T=1-p?1:-1,j=x+T*(k/2),D=new t.Point(b.x+h*Math.cos(j),b.y+d*Math.sin(j));if(n.addMarkerAngle(D,j-T*Math.PI/2),n.addMarkerAngle(c,j-T*Math.PI),i.addPoint(c.x,c.y),null!=e){var w=h>d?h:d,E=h>d?1:h/d,B=h>d?d/h:1;e.translate(b.x,b.y),e.rotate(f),e.scale(E,B),e.arc(0,0,w,x,x+k,1-p),e.scale(1/E,1/B),e.rotate(-f),e.translate(-b.x,-b.y)}}break;case"Z":case"z":null!=e&&e.closePath(),n.current=n.start}return i},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),n=[],i=0;i<t.length;i++)n.push([t[i],e[i]]);return n}},t.Element.path.prototype=new t.Element.PathElementBase,t.Element.pattern=function(e){this.base=t.Element.ElementBase,this.base(e),this.createPattern=function(e){var n=this.attribute("width").toPixels("x",!0),i=this.attribute("height").toPixels("y",!0),r=new t.Element.svg;r.attributes.viewBox=new t.Property("viewBox",this.attribute("viewBox").value),r.attributes.width=new t.Property("width",n+"px"),r.attributes.height=new t.Property("height",i+"px"),r.attributes.transform=new t.Property("transform",this.attribute("patternTransform").value),r.children=this.children;var a=document.createElement("canvas");a.width=n,a.height=i;var o=a.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&o.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var s=-1;1>=s;s++)for(var l=-1;1>=l;l++)o.save(),o.translate(s*a.width,l*a.height),r.render(o),o.restore();var u=e.createPattern(a,"repeat");return u}},t.Element.pattern.prototype=new t.Element.ElementBase,t.Element.marker=function(e){this.base=t.Element.ElementBase,this.base(e),this.baseRender=this.render,this.render=function(e,n,i){e.translate(n.x,n.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(i),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(e.lineWidth,e.lineWidth),e.save();var r=new t.Element.svg;r.attributes.viewBox=new t.Property("viewBox",this.attribute("viewBox").value),r.attributes.refX=new t.Property("refX",this.attribute("refX").value),r.attributes.refY=new t.Property("refY",this.attribute("refY").value),r.attributes.width=new t.Property("width",this.attribute("markerWidth").value),r.attributes.height=new t.Property("height",this.attribute("markerHeight").value),r.attributes.fill=new t.Property("fill",this.attribute("fill").valueOrDefault("black")),r.attributes.stroke=new t.Property("stroke",this.attribute("stroke").valueOrDefault("none")),r.children=this.children,r.render(e),e.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(1/e.lineWidth,1/e.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(-i),e.translate(-n.x,-n.y)}},t.Element.marker.prototype=new t.Element.ElementBase,t.Element.defs=function(e){this.base=t.Element.ElementBase,this.base(e),this.render=function(){}},t.Element.defs.prototype=new t.Element.ElementBase,t.Element.GradientBase=function(e){this.base=t.Element.ElementBase,this.base(e),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"stop"==i.type&&this.stops.push(i)}this.getGradient=function(){},this.createGradient=function(e,n,i){var r=this;this.getHrefAttribute().hasValue()&&(r=this.getHrefAttribute().getDefinition());var a=function(e){if(i.hasValue()){var n=new t.Property("color",e);return n.addOpacity(i.value).value}return e},o=this.getGradient(e,n);if(null==o)return a(r.stops[r.stops.length-1].color);for(var s=0;s<r.stops.length;s++)o.addColorStop(r.stops[s].offset,a(r.stops[s].color));if(this.attribute("gradientTransform").hasValue()){var l=t.ViewPort.viewPorts[0],u=new t.Element.rect;u.attributes.x=new t.Property("x",-t.MAX_VIRTUAL_PIXELS/3),u.attributes.y=new t.Property("y",-t.MAX_VIRTUAL_PIXELS/3),u.attributes.width=new t.Property("width",t.MAX_VIRTUAL_PIXELS),u.attributes.height=new t.Property("height",t.MAX_VIRTUAL_PIXELS);var c=new t.Element.g;c.attributes.transform=new t.Property("transform",this.attribute("gradientTransform").value),c.children=[u];var h=new t.Element.svg;h.attributes.x=new t.Property("x",0),h.attributes.y=new t.Property("y",0),h.attributes.width=new t.Property("width",l.width),h.attributes.height=new t.Property("height",l.height),h.children=[c];var d=document.createElement("canvas");d.width=l.width,d.height=l.height;var f=d.getContext("2d");return f.fillStyle=o,h.render(f),f.createPattern(d,"no-repeat")}return o}},t.Element.GradientBase.prototype=new t.Element.ElementBase,t.Element.linearGradient=function(e){this.base=t.Element.GradientBase,this.base(e),this.getGradient=function(t,e){var n=e.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),r="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),a="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),o="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return i==a&&r==o?null:t.createLinearGradient(i,r,a,o)}},t.Element.linearGradient.prototype=new t.Element.GradientBase,t.Element.radialGradient=function(e){this.base=t.Element.GradientBase,this.base(e),this.getGradient=function(t,e){var n=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),r="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),a=i,o=r;this.attribute("fx").hasValue()&&(a="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(o="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var s="objectBoundingBox"==this.gradientUnits?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(a,o,0,i,r,s)}},t.Element.radialGradient.prototype=new t.Element.GradientBase,t.Element.stop=function(e){this.base=t.Element.ElementBase,this.base(e),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var n=this.style("stop-color");this.style("stop-opacity").hasValue()&&(n=n.addOpacity(this.style("stop-opacity").value)),this.color=n.value},t.Element.stop.prototype=new t.Element.ElementBase,t.Element.AnimateBase=function(e){this.base=t.Element.ElementBase,this.base(e),t.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"!=this.attribute("repeatCount").value&&"indefinite"!=this.attribute("repeatDur").value)return"remove"!=this.attribute("fill").valueOrDefault("remove")||this.removed?!1:(this.removed=!0,this.getProperty().value=this.initialValue,!0);this.duration=0}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var n=this.calcValue();if(this.attribute("type").hasValue()){var i=this.attribute("type").value;n=i+"("+n+")"}this.getProperty().value=n,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var e={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var n=e.progress*(this.values.value.length-1),i=Math.floor(n),r=Math.ceil(n);e.from=new t.Property("from",parseFloat(this.values.value[i])),e.to=new t.Property("to",parseFloat(this.values.value[r])),e.progress=(n-i)/(r-i)}else e.from=this.from,e.to=this.to;return e}},t.Element.AnimateBase.prototype=new t.Element.ElementBase,t.Element.animate=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){var t=this.progress(),e=t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress;return e+this.initialUnits}},t.Element.animate.prototype=new t.Element.AnimateBase,t.Element.animateColor=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){var t=this.progress(),e=new RGBColor(t.from.value),n=new RGBColor(t.to.value);if(e.ok&&n.ok){var i=e.r+(n.r-e.r)*t.progress,r=e.g+(n.g-e.g)*t.progress,a=e.b+(n.b-e.b)*t.progress;return"rgb("+parseInt(i,10)+","+parseInt(r,10)+","+parseInt(a,10)+")"}return this.attribute("from").value}},t.Element.animateColor.prototype=new t.Element.AnimateBase,t.Element.animateTransform=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){for(var e=this.progress(),n=t.ToNumberArray(e.from.value),i=t.ToNumberArray(e.to.value),r="",a=0;a<n.length;a++)r+=n[a]+(i[a]-n[a])*e.progress+" ";return r}},t.Element.animateTransform.prototype=new t.Element.animate,t.Element.font=function(e){this.base=t.Element.ElementBase,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"font-face"==i.type?(this.fontFace=i,i.style("font-family").hasValue()&&(t.Definitions[i.style("font-family").value]=this)):"missing-glyph"==i.type?this.missingGlyph=i:"glyph"==i.type&&(""!=i.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[i.unicode]&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)}},t.Element.font.prototype=new t.Element.ElementBase,t.Element.fontface=function(e){this.base=t.Element.ElementBase,this.base(e),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},t.Element.fontface.prototype=new t.Element.ElementBase,t.Element.missingglyph=function(e){this.base=t.Element.path,this.base(e),this.horizAdvX=0},t.Element.missingglyph.prototype=new t.Element.path,t.Element.glyph=function(e){this.base=t.Element.path,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},t.Element.glyph.prototype=new t.Element.path,t.Element.text=function(e){this.captureTextNodes=!0,this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.style("dominant-baseline").hasValue()&&(t.textBaseline=this.style("dominant-baseline").value),this.style("alignment-baseline").hasValue()&&(t.textBaseline=this.style("alignment-baseline").value)},this.getBoundingBox=function(){return new t.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,e)},this.getAnchorDelta=function(t,e,n){var i=this.style("text-anchor").valueOrDefault("start");if("start"!=i){for(var r=0,a=n;a<e.children.length;a++){var o=e.children[a];if(a>n&&o.attribute("x").hasValue())break;r+=o.measureTextRecursive(t)}return-1*("end"==i?r:r/2)}return 0},this.renderChild=function(t,e,n){var i=e.children[n];i.attribute("x").hasValue()?i.x=i.attribute("x").toPixels("x")+this.getAnchorDelta(t,e,n):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),i.attribute("dx").hasValue()&&(this.x+=i.attribute("dx").toPixels("x")),i.x=this.x),this.x=i.x+i.measureText(t),i.attribute("y").hasValue()?i.y=i.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),i.attribute("dy").hasValue()&&(this.y+=i.attribute("dy").toPixels("y")),i.y=this.y),this.y=i.y,i.render(t);for(var n=0;n<i.children.length;n++)this.renderChild(t,i,n)}},t.Element.text.prototype=new t.Element.RenderedElementBase,t.Element.TextElementBase=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.getGlyph=function(t,e,n){var i=e[n],r=null;if(t.isArabic){var a="isolated";(0==n||" "==e[n-1])&&n<e.length-2&&" "!=e[n+1]&&(a="terminal"),n>0&&" "!=e[n-1]&&n<e.length-2&&" "!=e[n+1]&&(a="medial"),n>0&&" "!=e[n-1]&&(n==e.length-1||" "==e[n+1])&&(a="initial"),"undefined"!=typeof t.glyphs[i]&&(r=t.glyphs[i][a],null==r&&"glyph"==t.glyphs[i].type&&(r=t.glyphs[i]))}else r=t.glyphs[i];return null==r&&(r=t.missingGlyph),r},this.renderChildren=function(e){var n=this.parent.style("font-family").getDefinition();if(null==n)""!=e.fillStyle&&e.fillText(t.compressSpaces(this.getText()),this.x,this.y),""!=e.strokeStyle&&e.strokeText(t.compressSpaces(this.getText()),this.x,this.y);else{var i=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize),r=this.parent.style("font-style").valueOrDefault(t.Font.Parse(t.ctx.font).fontStyle),a=this.getText();n.isRTL&&(a=a.split("").reverse().join(""));for(var o=t.ToNumberArray(this.parent.attribute("dx").value),s=0;s<a.length;s++){var l=this.getGlyph(n,a,s),u=i/n.fontFace.unitsPerEm;e.translate(this.x,this.y),e.scale(u,-u);var c=e.lineWidth;e.lineWidth=e.lineWidth*n.fontFace.unitsPerEm/i,"italic"==r&&e.transform(1,0,.4,1,0,0),l.render(e),"italic"==r&&e.transform(1,0,-.4,1,0,0),e.lineWidth=c,e.scale(1/u,-1/u),e.translate(-this.x,-this.y),this.x+=i*(l.horizAdvX||n.horizAdvX)/n.fontFace.unitsPerEm,"undefined"==typeof o[s]||isNaN(o[s])||(this.x+=o[s])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),n=0;n<this.children.length;n++)e+=this.children[n].measureTextRecursive(t);return e},this.measureText=function(e){var n=this.parent.style("font-family").getDefinition();if(null!=n){var i=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize),r=0,a=this.getText();n.isRTL&&(a=a.split("").reverse().join(""));for(var o=t.ToNumberArray(this.parent.attribute("dx").value),s=0;s<a.length;s++){var l=this.getGlyph(n,a,s);r+=(l.horizAdvX||n.horizAdvX)*i/n.fontFace.unitsPerEm,"undefined"==typeof o[s]||isNaN(o[s])||(r+=o[s])}return r}var u=t.compressSpaces(this.getText());if(!e.measureText)return 10*u.length;e.save(),this.setContext(e);var c=e.measureText(u).width;return e.restore(),c}},t.Element.TextElementBase.prototype=new t.Element.RenderedElementBase,t.Element.tspan=function(e){this.captureTextNodes=!0,this.base=t.Element.TextElementBase,this.base(e),this.text=e.nodeValue||e.text||"",this.getText=function(){return this.text}},t.Element.tspan.prototype=new t.Element.TextElementBase,t.Element.tref=function(e){this.base=t.Element.TextElementBase,this.base(e),this.getText=function(){var t=this.getHrefAttribute().getDefinition();return null!=t?t.children[0].getText():void 0}},t.Element.tref.prototype=new t.Element.TextElementBase,t.Element.a=function(e){this.base=t.Element.TextElementBase,this.base(e),this.hasText=!0;for(var n=0;n<e.childNodes.length;n++)3!=e.childNodes[n].nodeType&&(this.hasText=!1);this.text=this.hasText?e.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(e){if(this.hasText){this.baseRenderChildren(e);var n=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);t.Mouse.checkBoundingBox(this,new t.BoundingBox(this.x,this.y-n.toPixels("y"),this.x+this.measureText(e),this.y))}else{var i=new t.Element.g;i.children=this.children,i.parent=this,i.render(e)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){t.ctx.canvas.style.cursor="pointer"}},t.Element.a.prototype=new t.Element.TextElementBase,t.Element.image=function(e){this.base=t.Element.RenderedElementBase,this.base(e);var n=this.getHrefAttribute().value,i=n.match(/\.svg$/);if(t.Images.push(this),this.loaded=!1,i)this.img=t.ajax(n),this.loaded=!0;else{this.img=document.createElement("img");var r=this;this.img.onload=function(){r.loaded=!0},this.img.onerror=function(){"undefined"!=typeof console&&(console.log('ERROR: image "'+n+'" not found'),r.loaded=!0)},this.img.src=n}this.renderChildren=function(e){var n=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");0!=a&&0!=o&&(e.save(),i?e.drawSvg(this.img,n,r,a,o):(e.translate(n,r),t.AspectRatio(e,this.attribute("preserveAspectRatio").value,a,this.img.width,o,this.img.height,0,0),e.drawImage(this.img,0,0)),e.restore())},this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");return new t.BoundingBox(e,n,e+i,n+r)}},t.Element.image.prototype=new t.Element.RenderedElementBase,t.Element.g=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.getBoundingBox=function(){for(var e=new t.BoundingBox,n=0;n<this.children.length;n++)e.addBoundingBox(this.children[n].getBoundingBox());return e}},t.Element.g.prototype=new t.Element.RenderedElementBase,t.Element.symbol=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){if(this.baseSetContext(e),this.attribute("viewBox").hasValue()){var n=t.ToNumberArray(this.attribute("viewBox").value),i=n[0],r=n[1];width=n[2],height=n[3],t.AspectRatio(e,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,i,r),t.ViewPort.SetCurrent(n[2],n[3])}}},t.Element.symbol.prototype=new t.Element.RenderedElementBase,t.Element.style=function(e){this.base=t.Element.ElementBase,this.base(e);for(var n="",i=0;i<e.childNodes.length;i++)n+=e.childNodes[i].nodeValue;n=n.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),n=t.compressSpaces(n);for(var r=n.split("}"),i=0;i<r.length;i++)if(""!=t.trim(r[i]))for(var a=r[i].split("{"),o=a[0].split(","),s=a[1].split(";"),l=0;l<o.length;l++){var u=t.trim(o[l]);if(""!=u){for(var c={},h=0;h<s.length;h++){var d=s[h].indexOf(":"),f=s[h].substr(0,d),g=s[h].substr(d+1,s[h].length-d);null!=f&&null!=g&&(c[t.trim(f)]=new t.Property(t.trim(f),t.trim(g)))}if(t.Styles[u]=c,"@font-face"==u)for(var p=c["font-family"].value.replace(/"/g,""),m=c.src.value.split(","),v=0;v<m.length;v++)if(m[v].indexOf('format("svg")')>0)for(var y=m[v].indexOf("url"),I=m[v].indexOf(")",y),b=m[v].substr(y+5,I-y-6),C=t.parseXml(t.ajax(b)),w=C.getElementsByTagName("font"),A=0;A<w.length;A++){var x=t.CreateElement(w[A]);t.Definitions[p]=x}}}},t.Element.style.prototype=new t.Element.ElementBase,t.Element.use=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))},this.getDefinition=function(){var t=this.getHrefAttribute().getDefinition();return this.attribute("width").hasValue()&&(t.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(t.attribute("height",!0).value=this.attribute("height").value),t},this.path=function(t){var e=this.getDefinition();null!=e&&e.path(t)},this.getBoundingBox=function(){var t=this.getDefinition();return null!=t?t.getBoundingBox():void 0},this.renderChildren=function(t){var e=this.getDefinition();if(null!=e){var n=e.parent;e.parent=null,e.render(t),e.parent=n}}},t.Element.use.prototype=new t.Element.RenderedElementBase,t.Element.mask=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(e,n){var i=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");if(0==a&&0==o){for(var s=new t.BoundingBox,l=0;l<this.children.length;l++)s.addBoundingBox(this.children[l].getBoundingBox());var i=Math.floor(s.x1),r=Math.floor(s.y1),a=Math.floor(s.width()),o=Math.floor(s.height())}var u=n.attribute("mask").value;n.attribute("mask").value="";var c=document.createElement("canvas");c.width=i+a,c.height=r+o;var h=c.getContext("2d");this.renderChildren(h);var d=document.createElement("canvas");d.width=i+a,d.height=r+o;var f=d.getContext("2d");n.render(f),f.globalCompositeOperation="destination-in",f.fillStyle=h.createPattern(c,"no-repeat"),f.fillRect(0,0,i+a,r+o),e.fillStyle=f.createPattern(d,"no-repeat"),e.fillRect(0,0,i+a,r+o),n.attribute("mask").value=u},this.render=function(){}},t.Element.mask.prototype=new t.Element.ElementBase,t.Element.clipPath=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(e){for(var n=0;n<this.children.length;n++){var i=this.children[n];if("undefined"!=typeof i.path){var r=null;i.attribute("transform").hasValue()&&(r=new t.Transform(i.attribute("transform").value),r.apply(e)),i.path(e),e.clip(),r&&r.unapply(e)}}},this.render=function(){}},t.Element.clipPath.prototype=new t.Element.ElementBase,t.Element.filter=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e){var n=e.getBoundingBox(),i=Math.floor(n.x1),r=Math.floor(n.y1),a=Math.floor(n.width()),o=Math.floor(n.height()),s=e.style("filter").value;e.style("filter").value="";for(var l=0,u=0,c=0;c<this.children.length;c++){var h=this.children[c].extraFilterDistance||0;l=Math.max(l,h),u=Math.max(u,h)}var d=document.createElement("canvas");d.width=a+2*l,d.height=o+2*u;var f=d.getContext("2d");f.translate(-i+l,-r+u),e.render(f);for(var c=0;c<this.children.length;c++)this.children[c].apply(f,0,0,a+2*l,o+2*u);t.drawImage(d,0,0,a+2*l,o+2*u,i-l,r-u,a+2*l,o+2*u),e.style("filter",!0).value=s},this.render=function(){}},t.Element.filter.prototype=new t.Element.ElementBase,t.Element.feMorphology=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(){}},t.Element.feMorphology.prototype=new t.Element.ElementBase,t.Element.feColorMatrix=function(e){function n(t,e,n,i,r,a){return t[n*i*4+4*e+a]}function i(t,e,n,i,r,a,o){t[n*i*4+4*e+a]=o}this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e,r,a,o){for(var s=t.getImageData(0,0,a,o),r=0;o>r;r++)for(var e=0;a>e;e++){var l=n(s.data,e,r,a,o,0),u=n(s.data,e,r,a,o,1),c=n(s.data,e,r,a,o,2),h=(l+u+c)/3;i(s.data,e,r,a,o,0,h),i(s.data,e,r,a,o,1,h),i(s.data,e,r,a,o,2,h)}t.clearRect(0,0,a,o),t.putImageData(s,0,0)}},t.Element.feColorMatrix.prototype=new t.Element.ElementBase,t.Element.feGaussianBlur=function(e){this.base=t.Element.ElementBase,this.base(e),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(e,n,i,r,a){return"undefined"==typeof stackBlurCanvasRGBA?void("undefined"!=typeof console&&console.log("ERROR: StackBlur.js must be included for blur to work")):(e.canvas.id=t.UniqueId(),e.canvas.style.display="none",document.body.appendChild(e.canvas),stackBlurCanvasRGBA(e.canvas.id,n,i,r,a,this.blurRadius),void document.body.removeChild(e.canvas))}},t.Element.feGaussianBlur.prototype=new t.Element.ElementBase,t.Element.title=function(){},t.Element.title.prototype=new t.Element.ElementBase,t.Element.desc=function(){},t.Element.desc.prototype=new t.Element.ElementBase,t.Element.MISSING=function(t){"undefined"!=typeof console&&console.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},t.Element.MISSING.prototype=new t.Element.ElementBase,t.CreateElement=function(e){var n=e.nodeName.replace(/^[^:]+:/,"");n=n.replace(/\-/g,"");var i=null;return i="undefined"!=typeof t.Element[n]?new t.Element[n](e):new t.Element.MISSING(e),i.type=e.nodeName,i},t.load=function(e,n){t.loadXml(e,t.ajax(n))},t.loadXml=function(e,n){t.loadXmlDoc(e,t.parseXml(n));
},t.loadXmlDoc=function(e,n){t.init(e);var i=function(t){for(var n=e.canvas;n;)t.x-=n.offsetLeft,t.y-=n.offsetTop,n=n.offsetParent;return window.scrollX&&(t.x+=window.scrollX),window.scrollY&&(t.y+=window.scrollY),t};1!=t.opts.ignoreMouse&&(e.canvas.onclick=function(e){var n=i(new t.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));t.Mouse.onclick(n.x,n.y)},e.canvas.onmousemove=function(e){var n=i(new t.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));t.Mouse.onmousemove(n.x,n.y)});var r=t.CreateElement(n.documentElement);r.root=!0;var a=!0,o=function(){t.ViewPort.Clear(),e.canvas.parentNode&&t.ViewPort.SetCurrent(e.canvas.parentNode.clientWidth,e.canvas.parentNode.clientHeight),1!=t.opts.ignoreDimensions&&(r.style("width").hasValue()&&(e.canvas.width=r.style("width").toPixels("x"),e.canvas.style.width=e.canvas.width+"px"),r.style("height").hasValue()&&(e.canvas.height=r.style("height").toPixels("y"),e.canvas.style.height=e.canvas.height+"px"));var i=e.canvas.clientWidth||e.canvas.width,o=e.canvas.clientHeight||e.canvas.height;if(1==t.opts.ignoreDimensions&&r.style("width").hasValue()&&r.style("height").hasValue()&&(i=r.style("width").toPixels("x"),o=r.style("height").toPixels("y")),t.ViewPort.SetCurrent(i,o),null!=t.opts.offsetX&&(r.attribute("x",!0).value=t.opts.offsetX),null!=t.opts.offsetY&&(r.attribute("y",!0).value=t.opts.offsetY),null!=t.opts.scaleWidth&&null!=t.opts.scaleHeight){var s=1,l=1,u=t.ToNumberArray(r.attribute("viewBox").value);r.attribute("width").hasValue()?s=r.attribute("width").toPixels("x")/t.opts.scaleWidth:isNaN(u[2])||(s=u[2]/t.opts.scaleWidth),r.attribute("height").hasValue()?l=r.attribute("height").toPixels("y")/t.opts.scaleHeight:isNaN(u[3])||(l=u[3]/t.opts.scaleHeight),r.attribute("width",!0).value=t.opts.scaleWidth,r.attribute("height",!0).value=t.opts.scaleHeight,r.attribute("viewBox",!0).value="0 0 "+i*s+" "+o*l,r.attribute("preserveAspectRatio",!0).value="none"}1!=t.opts.ignoreClear&&e.clearRect(0,0,i,o),r.render(e),a&&(a=!1,"function"==typeof t.opts.renderCallback&&t.opts.renderCallback(n))},s=!0;t.ImagesLoaded()&&(s=!1,o()),t.intervalID=setInterval(function(){var e=!1;if(s&&t.ImagesLoaded()&&(s=!1,e=!0),1!=t.opts.ignoreMouse&&(e|=t.Mouse.hasEvents()),1!=t.opts.ignoreAnimation)for(var n=0;n<t.Animations.length;n++)e|=t.Animations[n].update(1e3/t.FRAMERATE);"function"==typeof t.opts.forceRedraw&&1==t.opts.forceRedraw()&&(e=!0),e&&(o(),t.Mouse.runEvents())},1e3/t.FRAMERATE)},t.stop=function(){t.intervalID&&clearInterval(t.intervalID)},t.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInPath&&e.isPointInPath(i.x,i.y)&&(this.eventElements[n]=t)}},this.checkBoundingBox=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInBox(i.x,i.y)&&(this.eventElements[n]=t)}},this.runEvents=function(){t.ctx.canvas.style.cursor="";for(var e=0;e<this.events.length;e++)for(var n=this.events[e],i=this.eventElements[e];i;)n.run(i),i=i.parent;this.events=[],this.eventElements=[]}},t}this.canvg=function(e,n,i){if(null!=e||null!=n||null!=i){i=i||{},"string"==typeof e&&(e=document.getElementById(e)),null!=e.svg&&e.svg.stop();var r=t();(1!=e.childNodes.length||"OBJECT"!=e.childNodes[0].nodeName)&&(e.svg=r),r.opts=i;var a=e.getContext("2d");"undefined"!=typeof n.documentElement?r.loadXmlDoc(a,n):"<"==n.substr(0,1)?r.loadXml(a,n):r.load(a,n)}else for(var o=document.getElementsByTagName("svg"),s=0;s<o.length;s++){var l=o[s],u=document.createElement("canvas");u.width=l.clientWidth,u.height=l.clientHeight,l.parentNode.insertBefore(u,l),l.parentNode.removeChild(l);var c=document.createElement("div");c.appendChild(l),canvg(u,c.innerHTML)}}}(),"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,n,i,r){canvg(this.canvas,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:n,scaleWidth:i,scaleHeight:r})});